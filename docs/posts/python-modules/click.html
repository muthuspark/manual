<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>click - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MXDPF6L5TL"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MXDPF6L5TL', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta property="og:title" content="click - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">click - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-click" id="toc-what-is-click">What is Click?</a></li>
  <li><a href="#why-use-click" id="toc-why-use-click">Why use Click?</a></li>
  <li><a href="#installation" id="toc-installation">Installation</a></li>
  <li><a href="#basic-example" id="toc-basic-example">Basic Example</a></li>
  <li><a href="#core-concepts" id="toc-core-concepts">Core Concepts</a>
  <ul>
  <li><a href="#commands-and-groups" id="toc-commands-and-groups">Commands and Groups</a></li>
  <li><a href="#options-and-arguments" id="toc-options-and-arguments">Options and Arguments</a></li>
  <li><a href="#contexts" id="toc-contexts">Contexts</a></li>
  <li><a href="#callbacks" id="toc-callbacks">Callbacks</a></li>
  </ul></li>
  <li><a href="#defining-commands" id="toc-defining-commands">Defining Commands</a>
  <ul>
  <li><a href="#the-click.command-decorator" id="toc-the-click.command-decorator">The <code>@click.command</code> decorator</a></li>
  <li><a href="#defining-options-with-click.option" id="toc-defining-options-with-click.option">Defining options with <code>@click.option</code></a></li>
  <li><a href="#defining-arguments-with-click.argument" id="toc-defining-arguments-with-click.argument">Defining arguments with <code>@click.argument</code></a></li>
  <li><a href="#command-parameters" id="toc-command-parameters">Command parameters</a></li>
  <li><a href="#command-help-text" id="toc-command-help-text">Command help text</a></li>
  <li><a href="#default-values" id="toc-default-values">Default values</a></li>
  </ul></li>
  <li><a href="#working-with-options" id="toc-working-with-options">Working with Options</a>
  <ul>
  <li><a href="#option-types" id="toc-option-types">Option types</a></li>
  <li><a href="#flag-options" id="toc-flag-options">Flag options</a></li>
  <li><a href="#count-options" id="toc-count-options">Count options</a></li>
  <li><a href="#multiple-options" id="toc-multiple-options">Multiple options</a></li>
  <li><a href="#hidden-options" id="toc-hidden-options">Hidden options</a></li>
  <li><a href="#environmental-variables" id="toc-environmental-variables">Environmental variables</a></li>
  <li><a href="#option-validation" id="toc-option-validation">Option validation</a></li>
  </ul></li>
  <li><a href="#working-with-arguments" id="toc-working-with-arguments">Working with Arguments</a>
  <ul>
  <li><a href="#positional-arguments" id="toc-positional-arguments">Positional arguments</a></li>
  <li><a href="#required-vs.-optional-arguments" id="toc-required-vs.-optional-arguments">Required vs.&nbsp;optional arguments</a></li>
  <li><a href="#argument-type-conversion" id="toc-argument-type-conversion">Argument type conversion</a></li>
  <li><a href="#argument-validation" id="toc-argument-validation">Argument validation</a></li>
  <li><a href="#multiple-arguments" id="toc-multiple-arguments">Multiple arguments</a></li>
  </ul></li>
  <li><a href="#command-groups" id="toc-command-groups">Command Groups</a>
  <ul>
  <li><a href="#the-click.group-decorator" id="toc-the-click.group-decorator">The <code>@click.group</code> decorator</a></li>
  <li><a href="#nesting-command-groups" id="toc-nesting-command-groups">Nesting command groups</a></li>
  <li><a href="#managing-subcommands" id="toc-managing-subcommands">Managing subcommands</a></li>
  <li><a href="#group-help-text" id="toc-group-help-text">Group help text</a></li>
  </ul></li>
  <li><a href="#contexts-and-callbacks" id="toc-contexts-and-callbacks">Contexts and Callbacks</a>
  <ul>
  <li><a href="#understanding-contexts" id="toc-understanding-contexts">Understanding contexts</a></li>
  <li><a href="#using-callbacks" id="toc-using-callbacks">Using callbacks</a></li>
  <li><a href="#context-specific-options-and-arguments" id="toc-context-specific-options-and-arguments">Context-specific options and arguments</a></li>
  <li><a href="#passing-data-between-commands" id="toc-passing-data-between-commands">Passing data between commands</a></li>
  </ul></li>
  <li><a href="#advanced-usage" id="toc-advanced-usage">Advanced Usage</a>
  <ul>
  <li><a href="#working-with-files" id="toc-working-with-files">Working with files</a></li>
  <li><a href="#handling-errors" id="toc-handling-errors">Handling errors</a></li>
  <li><a href="#custom-help-messages" id="toc-custom-help-messages">Custom help messages</a></li>
  <li><a href="#inputoutput-redirection" id="toc-inputoutput-redirection">Input/Output redirection</a></li>
  <li><a href="#click-with-other-libraries" id="toc-click-with-other-libraries">Click with other libraries</a></li>
  <li><a href="#testing-click-applications" id="toc-testing-click-applications">Testing Click applications</a></li>
  <li><a href="#extending-click" id="toc-extending-click">Extending Click</a></li>
  </ul></li>
  <li><a href="#best-practices-and-style-guide" id="toc-best-practices-and-style-guide">Best Practices and Style Guide</a>
  <ul>
  <li><a href="#writing-clean-and-readable-click-applications" id="toc-writing-clean-and-readable-click-applications">Writing clean and readable Click applications</a></li>
  <li><a href="#structuring-your-code" id="toc-structuring-your-code">Structuring your code</a></li>
  <li><a href="#choosing-appropriate-option-names" id="toc-choosing-appropriate-option-names">Choosing appropriate option names</a></li>
  <li><a href="#consistent-error-handling" id="toc-consistent-error-handling">Consistent error handling</a></li>
  <li><a href="#testing-and-documentation" id="toc-testing-and-documentation">Testing and documentation</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-click">What is Click?</h3>
<p>Click is a Python package for creating beautiful command line interfaces in a composable way with as little code as necessary. It’s designed to make creating complex command-line tools easy and enjoyable, handling argument parsing, help page generation, and more, automatically. Click takes care of the tedious aspects of command-line interface development, allowing you to focus on the functionality of your application.</p>
<h3 id="why-use-click">Why use Click?</h3>
<ul>
<li><p><strong>Simplicity:</strong> Click’s API is straightforward and intuitive, making it easy to learn and use. Even complex command-line structures can be created with relatively little code.</p></li>
<li><p><strong>Composability:</strong> Click allows you to build complex commands from smaller, reusable components. This promotes code organization and reusability.</p></li>
<li><p><strong>Automatic Help Generation:</strong> Click automatically generates helpful usage messages and option descriptions, saving you time and effort.</p></li>
<li><p><strong>Flexibility:</strong> Click supports various command-line argument types, including flags, options, and positional arguments, offering flexibility in how you design your CLI.</p></li>
<li><p><strong>Rich Features:</strong> Beyond basic argument parsing, Click provides features such as progress bars, confirmation prompts, and support for different input/output formats.</p></li>
<li><p><strong>Widely Used and Well-Maintained:</strong> Click is a mature and popular package with a large community, ensuring ongoing support and updates.</p></li>
</ul>
<h3 id="installation">Installation</h3>
<p>Click is easily installed using pip:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install click</span></code></pre></div>
<p>This will install the Click package and its dependencies. Ensure you have <code>pip</code> installed; if not, consult the instructions for your Python distribution (e.g., Python’s official website).</p>
<h3 id="basic-example">Basic Example</h3>
<p>Here’s a simple example demonstrating a basic Click application:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--count'</span>, default<span class="op">=</span><span class="dv">1</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Number of greetings.'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'name'</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hello(count, name):</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Simple program that greets NAME for a given COUNT number of times."""</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(count):</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="ss">f"Hello </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    hello()</span></code></pre></div>
<p>This code defines a command <code>hello</code> that takes a name as an argument and an optional <code>--count</code> option. Running this script from the command line (e.g., <code>python your_script.py John --count 3</code>) will print “Hello John!” three times. The <code>@click.command()</code> decorator transforms the <code>hello</code> function into a Click command, and <code>@click.option()</code> and <code>@click.argument()</code> decorators define the command’s options and arguments respectively. The docstring within the <code>hello</code> function becomes the help text for the command. You can access this help text using <code>python your_script.py --help</code>.</p>
<h2 id="core-concepts">Core Concepts</h2>
<h3 id="commands-and-groups">Commands and Groups</h3>
<p>Click’s fundamental building blocks are <em>commands</em> and <em>groups</em>. A command represents a single action your CLI can perform. A group is a container for multiple commands, allowing you to organize your CLI into a hierarchical structure.</p>
<p>A command is defined by a function decorated with <code>@click.command()</code>. This function’s parameters define the command’s options and arguments. A group is created using <code>@click.group()</code>. Groups can contain other groups and commands, forming a tree-like structure. This enables creating complex CLIs with subcommands.</p>
<p>For example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.group</span>()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cli():</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">@cli.command</span>()</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hello():</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="st">"Hello, world!"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">@cli.command</span>()</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'name'</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(name):</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    cli()</span></code></pre></div>
<p>This defines a group <code>cli</code> containing two commands: <code>hello</code> and <code>greet</code>. Running <code>python your_script.py hello</code> executes the <code>hello</code> command, and <code>python your_script.py greet John</code> executes <code>greet</code> with the argument “John”.</p>
<h3 id="options-and-arguments">Options and Arguments</h3>
<p>Options and arguments are how users provide input to your commands. Options are typically specified using flags (e.g., <code>--verbose</code>, <code>-v</code>), while arguments are positional parameters (e.g., the filename in <code>copy file1.txt file2.txt</code>).</p>
<ul>
<li><p><strong>Options:</strong> Defined using <code>@click.option()</code>, options modify the behavior of a command. They can have default values and are often optional. Options can be specified using short flags (single dash) and long flags (double dash).</p></li>
<li><p><strong>Arguments:</strong> Defined using <code>@click.argument()</code>, arguments are required unless specified as optional. They are positional, meaning their order matters.</p></li>
</ul>
<p>Example demonstrating both:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--count'</span>, default<span class="op">=</span><span class="dv">1</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Number of greetings.'</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'name'</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(count, name):</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(count):</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    greet()</span></code></pre></div>
<p>Here, <code>--count</code> is an option, and <code>name</code> is an argument.</p>
<h3 id="contexts">Contexts</h3>
<p>A Click <em>context</em> is an object that holds information about the current command invocation. This includes the command being executed, its options and arguments, and the parent group (if any). Contexts are crucial for passing data between commands and for accessing Click’s features.</p>
<p>Contexts are automatically created and managed by Click. You can access the context using the <code>ctx</code> parameter in your command functions:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--verbose/--no-verbose'</span>, default<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(verbose, ctx):</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    ctx.obj <span class="op">=</span> {<span class="st">'verbose'</span>: verbose} <span class="co"># Store data in the context object</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Verbose mode is </span><span class="sc">{</span><span class="st">'on'</span> <span class="cf">if</span> verbose <span class="cf">else</span> <span class="st">'off'</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">@click.group</span>()</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cli():</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>cli.add_command(my_command)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    cli()</span></code></pre></div>
<p>In this example, we store a verbose setting in the context object <code>ctx.obj</code>. This makes the setting available to other commands within the same invocation.</p>
<h3 id="callbacks">Callbacks</h3>
<p>Callbacks are functions that are executed at specific points during the command execution lifecycle. Click provides several callback mechanisms to enhance your CLI’s functionality. Common uses include:</p>
<ul>
<li><p><strong><code>@click.pass_context</code>:</strong> This decorator allows you to pass the context object explicitly to your command functions, giving you access to the context information, as shown in the Context section.</p></li>
<li><p><strong><code>@click.pass_obj</code>:</strong> This passes the object stored in <code>ctx.obj</code> to your command function. This is useful for sharing data between commands within a group.</p></li>
<li><p><strong><code>@click.before_invoke</code> and <code>@click.after_invoke</code>:</strong> These decorators define functions to be called before and after a command is invoked, respectively. This is useful for setup (e.g., connecting to a database) and cleanup (e.g., closing a connection) actions.</p></li>
</ul>
<p>Example using <code>@click.before_invoke</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.before_invoke</span>(<span class="kw">lambda</span> ctx: <span class="bu">print</span>(<span class="st">"Before invoke"</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="at">@click.after_invoke</span>(<span class="kw">lambda</span> ctx: <span class="bu">print</span>(<span class="st">"After invoke"</span>))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command():</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="st">"Hello from my command"</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>This will print “Before invoke”, then “Hello from my command”, and finally “After invoke”.</p>
<p>These callbacks provide hooks to customize the command execution flow in a controlled and reusable way.</p>
<h2 id="defining-commands">Defining Commands</h2>
<h3 id="the-click.command-decorator">The <code>@click.command</code> decorator</h3>
<p>The <code>@click.command()</code> decorator is the cornerstone of creating Click commands. It transforms a Python function into a callable command-line interface element. The function’s parameters define the command’s options and arguments. The function’s docstring becomes the help text for the command.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hello():</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Prints a greeting."""</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="st">"Hello, world!"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    hello()</span></code></pre></div>
<p>This simple example defines a command named <code>hello</code> that prints “Hello, world!”. The name of the command defaults to the function name (in this case <code>hello</code>), but can be overridden using the <code>name</code> parameter in <code>@click.command()</code>.</p>
<h3 id="defining-options-with-click.option">Defining options with <code>@click.option</code></h3>
<p>The <code>@click.option()</code> decorator adds options to your commands. Options are keyword arguments passed to your command, usually prefixed with a hyphen (<code>-</code> for short options) or double hyphen (<code>--</code> for long options).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--count'</span>, default<span class="op">=</span><span class="dv">1</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Number of greetings.'</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hello(count):</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Prints a greeting COUNT times."""</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(count):</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="st">"Hello, world!"</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    hello()</span></code></pre></div>
<p>This adds a <code>--count</code> option with a default value of 1. The <code>help</code> parameter provides a description that appears in the command’s help text. The <code>count</code> parameter in the <code>hello</code> function receives the option’s value. You can also specify short options using the <code>short</code> parameter (e.g., <code>@click.option('-c', '--count', ...)</code>). Numerous other parameters exist for fine-grained control over options (type checking, required flags, etc.).</p>
<h3 id="defining-arguments-with-click.argument">Defining arguments with <code>@click.argument</code></h3>
<p>The <code>@click.argument()</code> decorator adds positional arguments to your commands. Positional arguments are required parameters passed to your command in the order they are defined.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'name'</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(name):</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Greets NAME."""</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    greet()</span></code></pre></div>
<p>This adds a required positional argument <code>name</code>. The <code>name</code> parameter in the <code>greet</code> function receives the argument’s value. The <code>required</code> parameter in <code>@click.argument()</code> can be used to control whether an argument is required. You can also specify argument types for validation.</p>
<h3 id="command-parameters">Command parameters</h3>
<p>Parameters in your command function receive values from options and arguments. The order of the parameters is crucial - arguments must appear before options. The type of parameter usually is inferred but can be explicitly specified for better validation and error reporting.</p>
<h3 id="command-help-text">Command help text</h3>
<p>The docstring of your command function is used to generate help text. This text should concisely describe what your command does and any important parameters.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command():</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""This is the help text for my_command.  It should describe what the command does."""</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>Running <code>python your_script.py my_command --help</code> will display the docstring as help information.</p>
<h3 id="default-values">Default values</h3>
<p>Options and arguments can have default values. If a user doesn’t provide a value for an option or argument with a default value, Click will use the default instead.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--count'</span>, default<span class="op">=</span><span class="dv">1</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Number of greetings.'</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'name'</span>, default<span class="op">=</span><span class="st">'World'</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(count, name):</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(count):</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    greet()</span></code></pre></div>
<p>Here, <code>--count</code> defaults to 1, and <code>name</code> defaults to “World”. If called without arguments, <code>python your_script.py</code> will print “Hello, World!” once. Using <code>python your_script.py --count 3 John</code> will print “Hello, John!” three times.</p>
<h2 id="working-with-options">Working with Options</h2>
<h3 id="option-types">Option types</h3>
<p>Click provides built-in support for various option types, allowing you to specify the expected data type and perform basic validation. This improves user experience and prevents common errors. The <code>type</code> parameter in <code>@click.option()</code> is used to specify the type. Common types include <code>int</code>, <code>float</code>, <code>bool</code>, <code>str</code>, <code>Choice</code>, <code>File</code>, and <code>Path</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--count'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, default<span class="op">=</span><span class="dv">1</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Number of greetings.'</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--value'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">float</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'A floating-point value.'</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--filename'</span>, <span class="bu">type</span><span class="op">=</span>click.File(<span class="st">'r'</span>), <span class="bu">help</span><span class="op">=</span><span class="st">'A filename to read from.'</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--choice'</span>, <span class="bu">type</span><span class="op">=</span>click.Choice([<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>]), <span class="bu">help</span><span class="op">=</span><span class="st">'Choose from a, b, or c.'</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--path'</span>, <span class="bu">type</span><span class="op">=</span>click.Path(exists<span class="op">=</span><span class="va">True</span>), <span class="bu">help</span><span class="op">=</span><span class="st">'Path to an existing file or directory.'</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(count, value, filename, choice, path):</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... your command logic ...</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Count: </span><span class="sc">{</span>count<span class="sc">}</span><span class="ss">, Value: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">, Choice: </span><span class="sc">{</span>choice<span class="sc">}</span><span class="ss">, Path: </span><span class="sc">{</span>path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> filename:</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>        click.echo(filename.read()) <span class="co"># Read from the file object</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>This example showcases different option types: <code>int</code>, <code>float</code>, <code>click.File</code>, <code>click.Choice</code>, and <code>click.Path</code>. <code>click.File('r')</code> opens the file in read mode, and <code>click.Path(exists=True)</code> ensures that the path exists. Improper input will result in user-friendly error messages.</p>
<h3 id="flag-options">Flag options</h3>
<p>Flag options are boolean options that represent a simple on/off switch. They are typically specified with a single flag, such as <code>--verbose</code> or <code>-v</code>. Click handles the boolean logic automatically.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--verbose'</span>, is_flag<span class="op">=</span><span class="va">True</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Enable verbose output.'</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(verbose):</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> verbose:</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="st">"Verbose output enabled."</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="st">"Verbose output disabled."</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>The <code>is_flag=True</code> parameter indicates a boolean option; no value is required.</p>
<h3 id="count-options">Count options</h3>
<p>Count options are similar to flag options but keep track of how many times the option is specified. This is useful for increasing verbosity levels, for example.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--verbose'</span>, count<span class="op">=</span><span class="va">True</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Increase verbosity level.'</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(verbose):</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> verbose <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="st">"Verbose level 1"</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> verbose <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="ss">f"Verbose level </span><span class="sc">{</span>verbose<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="st">"Normal output"</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>Each occurrence of <code>--verbose</code> increments the <code>verbose</code> parameter.</p>
<h3 id="multiple-options">Multiple options</h3>
<p>Click allows you to specify multiple values for a single option. The <code>multiple=True</code> parameter enables this functionality; the option’s value will be a list.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--files'</span>, multiple<span class="op">=</span><span class="va">True</span>, <span class="bu">type</span><span class="op">=</span>click.Path(exists<span class="op">=</span><span class="va">True</span>), <span class="bu">help</span><span class="op">=</span><span class="st">'List of files.'</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(files):</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> files:</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="ss">f"Processing file: </span><span class="sc">{</span><span class="bu">file</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>The user can specify <code>--files file1.txt --files file2.txt</code>.</p>
<h3 id="hidden-options">Hidden options</h3>
<p>Options can be hidden from the help output using the <code>hidden=True</code> parameter. This is useful for options intended for internal use or advanced users.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--hidden-option'</span>, hidden<span class="op">=</span><span class="va">True</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'This option is hidden.'</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(hidden_option):</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ...</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>The <code>--hidden-option</code> won’t be visible when running <code>my_command --help</code>.</p>
<h3 id="environmental-variables">Environmental variables</h3>
<p>Options can be set using environment variables. The <code>envvar</code> parameter specifies the name of the environment variable.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--config'</span>, envvar<span class="op">=</span><span class="st">'MY_CONFIG'</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Configuration file path.'</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(config):</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Config file: </span><span class="sc">{</span>config<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>If the <code>MY_CONFIG</code> environment variable is set, its value will be used for the <code>--config</code> option.</p>
<h3 id="option-validation">Option validation</h3>
<p>You can perform custom validation on option values using the <code>callback</code> parameter in <code>@click.option</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> validate_port(ctx, param, value):</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> <span class="dv">1024</span> <span class="op">&lt;=</span> value <span class="op">&lt;=</span> <span class="dv">65535</span>:</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> click.BadParameter(<span class="st">'Port must be between 1024 and 65535.'</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--port'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, callback<span class="op">=</span>validate_port, <span class="bu">help</span><span class="op">=</span><span class="st">'Server port.'</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(port):</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Using port: </span><span class="sc">{</span>port<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>The <code>validate_port</code> function checks if the port number is within the valid range. <code>click.BadParameter</code> raises a user-friendly error message if validation fails.</p>
<h2 id="working-with-arguments">Working with Arguments</h2>
<h3 id="positional-arguments">Positional arguments</h3>
<p>Positional arguments are parameters that are provided to a Click command based on their position in the command line. They are defined using the <code>@click.argument()</code> decorator. Unlike options, positional arguments are not prefixed with hyphens or double hyphens.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'filename'</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_file(filename):</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Processing file: </span><span class="sc">{</span>filename<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    process_file()</span></code></pre></div>
<p>In this example, <code>filename</code> is a positional argument. To run this command, you would provide the filename as an argument: <code>python your_script.py myfile.txt</code>.</p>
<h3 id="required-vs.-optional-arguments">Required vs.&nbsp;optional arguments</h3>
<p>By default, arguments defined with <code>@click.argument()</code> are required. To make an argument optional, set the <code>required</code> parameter to <code>False</code>. If an optional argument isn’t provided, its value will be <code>None</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'filename'</span>, required<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_file(filename):</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> filename:</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="ss">f"Processing file: </span><span class="sc">{</span>filename<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="st">"No file specified."</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    process_file()</span></code></pre></div>
<p>Now, <code>python your_script.py</code> will execute without error, printing “No file specified.”</p>
<h3 id="argument-type-conversion">Argument type conversion</h3>
<p>Like options, arguments can have their types specified using the <code>type</code> parameter in <code>@click.argument()</code>. This allows for automatic type conversion and validation.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'number'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> show_number(number):</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"The number is: </span><span class="sc">{</span>number<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    show_number()</span></code></pre></div>
<p>Here, the <code>number</code> argument is converted to an integer. Providing a non-integer value will result in a user-friendly error message. Click supports various built-in types (e.g., <code>int</code>, <code>float</code>, <code>str</code>, <code>Path</code>, <code>File</code>) and custom type converters.</p>
<h3 id="argument-validation">Argument validation</h3>
<p>Custom validation for arguments can be implemented using the <code>callback</code> parameter in <code>@click.argument()</code>, similar to options. The callback function receives the context, parameter, and value as arguments. It should return the validated value or raise <code>click.BadParameter</code> if validation fails.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> validate_filepath(ctx, param, value):</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> value.endswith(<span class="st">".txt"</span>):</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> click.BadParameter(<span class="st">"File must have a .txt extension."</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'filepath'</span>, callback<span class="op">=</span>validate_filepath)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_file(filepath):</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Processing file: </span><span class="sc">{</span>filepath<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    process_file()</span></code></pre></div>
<p>This example validates that the filepath ends with “.txt”.</p>
<h3 id="multiple-arguments">Multiple arguments</h3>
<p>Click allows you to accept multiple arguments of the same type using the <code>nargs</code> parameter in <code>@click.argument()</code>. If <code>nargs</code> is set to -1, it will consume all remaining arguments.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'filenames'</span>, nargs<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_files(filenames):</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> filenames:</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="ss">f"Processing file: </span><span class="sc">{</span>filename<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    process_files()</span></code></pre></div>
<p>Running <code>python your_script.py file1.txt file2.txt file3.txt</code> will process all three files. Note that if <code>nargs</code> is a positive integer, exactly that number of arguments must be provided. If <code>nargs</code> is set to a number using a range (e.g.&nbsp;<code>nargs=2</code>), then you will have to provide exactly that many arguments. If you need to accept an arbitrary amount of arguments (i.e.&nbsp;zero or more) and treat them as a list, set <code>nargs=-1</code>.</p>
<h2 id="command-groups">Command Groups</h2>
<h3 id="the-click.group-decorator">The <code>@click.group</code> decorator</h3>
<p>The <code>@click.group()</code> decorator is used to create command groups, which are essentially containers for organizing multiple related commands. This helps create a structured and more manageable CLI. A command group itself isn’t directly executable; it serves to organize subcommands.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.group</span>()</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cli():</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""A simple CLI with subcommands."""</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="at">@cli.command</span>()</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hello():</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="st">"Hello, world!"</span>)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    cli()</span></code></pre></div>
<p>This creates a group named <code>cli</code> (the name defaults to the function name) containing the subcommand <code>hello</code>. To run the <code>hello</code> command, you would use <code>python your_script.py hello</code>.</p>
<h3 id="nesting-command-groups">Nesting command groups</h3>
<p>Command groups can be nested to create a hierarchical structure, reflecting the logical organization of your CLI.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.group</span>()</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cli():</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="at">@cli.group</span>()</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> user():</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Manage users."""</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="at">@user.command</span>()</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add():</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Add a new user."""</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="st">"Adding a user..."</span>)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="at">@user.command</span>()</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove():</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Remove a user."""</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="st">"Removing a user..."</span>)</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="at">@cli.command</span>()</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> project():</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Manage projects."""</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="st">"Managing projects..."</span>)</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    cli()</span></code></pre></div>
<p>This nests the <code>user</code> group within the <code>cli</code> group. You’d run subcommands like <code>python your_script.py user add</code> or <code>python your_script.py project</code>.</p>
<h3 id="managing-subcommands">Managing subcommands</h3>
<p>Subcommands are added to a group by decorating functions with <code>@group.command()</code>, where <code>group</code> is the group object returned by <code>@click.group()</code>. You can also use <code>group.add_command(command)</code> to add a command created elsewhere.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.group</span>()</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cli():</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command():</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  click.echo(<span class="st">"Hello from my command"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>cli.add_command(my_command, name<span class="op">=</span><span class="st">"mycmd"</span>) <span class="co"># name is an optional parameter</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  cli()</span></code></pre></div>
<p>This adds <code>my_command</code> to the <code>cli</code> group under the name “mycmd”. It can then be invoked as <code>python your_script.py mycmd</code>.</p>
<h3 id="group-help-text">Group help text</h3>
<p>Like commands, the docstring of a group function generates help text for the group. This text should describe the group’s purpose and list its subcommands.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.group</span>()</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cli():</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""This is a top-level CLI group.  It manages users and projects."""</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ... subcommands ...</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    cli()</span></code></pre></div>
<p>Running <code>python your_script.py --help</code> will display the group’s help text. The help text also shows the available subcommands. You can also add context to your help texts through the <code>context_settings</code> parameter. For example, to add a custom epilogue to your help text you can write something like this:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.group</span>(context_settings<span class="op">=</span><span class="bu">dict</span>(help_option_names<span class="op">=</span>[<span class="st">'-h'</span>, <span class="st">'--help'</span>], epilog<span class="op">=</span><span class="st">"This is some extra information"</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cli():</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ... subcommands ...</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    cli()</span></code></pre></div>
<p>The <code>help_option_names</code> parameter helps define the help options that users can use.</p>
<h2 id="contexts-and-callbacks">Contexts and Callbacks</h2>
<h3 id="understanding-contexts">Understanding contexts</h3>
<p>A Click context object is a container holding information relevant to the current command invocation. This includes:</p>
<ul>
<li><strong>The invoked command:</strong> The specific command being executed.</li>
<li><strong>Options and arguments:</strong> The values provided by the user for options and arguments.</li>
<li><strong>Parent group (if any):</strong> The parent command group, if the command is part of a nested group structure.</li>
<li><strong>Invoked parameters:</strong> The parameters passed to the command.</li>
<li><strong>Object:</strong> A user-defined object that can be used to share data between commands (<code>ctx.obj</code>).</li>
</ul>
<p>The context is automatically created and managed by Click. It’s crucial for accessing command-line parameters, passing data between commands, and executing callbacks. You can access the context object within your command or group functions by adding a <code>ctx</code> parameter.</p>
<h3 id="using-callbacks">Using callbacks</h3>
<p>Callbacks are functions that are invoked at specific points during command execution. They allow you to perform actions before or after a command runs or to modify the behavior of options and arguments. Common callback decorators include:</p>
<ul>
<li><p><strong><code>@click.pass_context</code>:</strong> Passes the context object as an argument to the function.</p></li>
<li><p><strong><code>@click.pass_obj</code>:</strong> Passes the object stored in <code>ctx.obj</code> (see below).</p></li>
<li><p><strong><code>@click.before_invoke</code>:</strong> Executes a function before the command is invoked. Useful for setup tasks.</p></li>
<li><p><strong><code>@click.after_invoke</code>:</strong> Executes a function after the command is invoked. Useful for cleanup tasks.</p></li>
<li><p><strong><code>@click.callback</code>:</strong> A callback that can modify the behavior of an option or argument.</p></li>
</ul>
<p>Example using <code>@click.before_invoke</code> and <code>@click.after_invoke</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.before_invoke</span>(<span class="kw">lambda</span> ctx: <span class="bu">print</span>(<span class="st">"Setting up..."</span>))</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">@click.after_invoke</span>(<span class="kw">lambda</span> ctx: <span class="bu">print</span>(<span class="st">"Cleaning up..."</span>))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command():</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="st">"Command executed."</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<h3 id="context-specific-options-and-arguments">Context-specific options and arguments</h3>
<p>Callbacks can access and modify the context, allowing for context-sensitive behavior. For instance, you can use callbacks to validate options based on other options or arguments in the context.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> validate_option(ctx, param, value):</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ctx.params[<span class="st">'verbose'</span>] <span class="kw">and</span> value <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> click.BadParameter(<span class="st">"Value must be at least 10 in verbose mode."</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--verbose'</span>, is_flag<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="at">@click.option</span>(<span class="st">'--value'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, callback<span class="op">=</span>validate_option)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command(verbose, value):</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Verbose: </span><span class="sc">{</span>verbose<span class="sc">}</span><span class="ss">, Value: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>Here, the <code>validate_option</code> callback checks if <code>value</code> meets a condition based on the <code>verbose</code> flag.</p>
<h3 id="passing-data-between-commands">Passing data between commands</h3>
<p>The <code>ctx.obj</code> attribute of the context object provides a mechanism for sharing data between commands, particularly within the same group. You typically initialize <code>ctx.obj</code> in a group’s invocation function and then access it in subcommands.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.group</span>()</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cli():</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    ctx.obj <span class="op">=</span> {}</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="at">@cli.command</span>()</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'name'</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> set_name(ctx, name):</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    ctx.obj[<span class="st">'name'</span>] <span class="op">=</span> name</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Name set to: </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="at">@cli.command</span>()</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet():</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> ctx.obj.get(<span class="st">'name'</span>, <span class="st">'World'</span>)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    click.echo(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    cli()</span></code></pre></div>
<p>First, <code>set_name</code> stores the name in <code>ctx.obj</code>. Then, <code>greet</code> retrieves the name from <code>ctx.obj</code> to use in its greeting. If <code>set_name</code> hasn’t been run, it defaults to “World”. This allows you to share data across multiple commands without using global variables, improving code organization and maintainability.</p>
<h2 id="advanced-usage">Advanced Usage</h2>
<h3 id="working-with-files">Working with files</h3>
<p>Click provides convenient ways to work with files, primarily through the <code>click.File</code> type. This type handles file opening and closing automatically, ensuring resources are properly managed, even in case of errors. You can specify the file mode (<code>'r'</code> for reading, <code>'w'</code> for writing, <code>'a'</code> for appending, etc.) when defining the option or argument.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'filename'</span>, <span class="bu">type</span><span class="op">=</span>click.File(<span class="st">'r'</span>))</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_file(filename):</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> filename:</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        click.echo(line.strip())</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    process_file()</span></code></pre></div>
<p>This reads and prints each line of the specified file. If the file doesn’t exist or cannot be opened, Click will handle the error gracefully, providing a user-friendly message.</p>
<h3 id="handling-errors">Handling errors</h3>
<p>Click provides mechanisms for handling exceptions and presenting user-friendly error messages. The <code>click.BadParameter</code> exception is specifically designed for invalid command-line arguments. You can also use standard Python exception handling (<code>try...except</code>) to catch other errors.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.argument</span>(<span class="st">'filename'</span>, <span class="bu">type</span><span class="op">=</span>click.Path(exists<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_file(filename):</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Process the file</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">FileNotFoundError</span>:</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>        click.echo(<span class="ss">f"Error: File '</span><span class="sc">{</span>filename<span class="sc">}</span><span class="ss">' not found."</span>, err<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> click.Abort() <span class="co"># Stop execution</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    process_file()</span></code></pre></div>
<p>This example demonstrates handling <code>FileNotFoundError</code>; <code>click.Abort()</code> terminates the program cleanly. <code>err=True</code> sends the error message to <code>stderr</code>.</p>
<h3 id="custom-help-messages">Custom help messages</h3>
<p>You can customize the help messages generated by Click using several techniques:</p>
<ul>
<li><p><strong>Docstrings:</strong> The docstring of your command or group function serves as the primary help text.</p></li>
<li><p><strong><code>help</code> parameter:</strong> The <code>help</code> parameter in <code>@click.option()</code> and <code>@click.argument()</code> provides descriptions for individual options and arguments.</p></li>
<li><p><strong><code>context_settings</code>:</strong> The <code>context_settings</code> parameter in <code>@click.command()</code> and <code>@click.group()</code> allows setting additional context, such as an <code>epilog</code> for adding text at the end of the help message.</p></li>
<li><p><strong><code>help_option_names</code>:</strong> Customize the names of options that trigger the help message (default <code>['-h', '--help']</code>).</p></li>
</ul>
<h3 id="inputoutput-redirection">Input/Output redirection</h3>
<p>Click doesn’t directly manage input/output redirection (e.g., <code>&gt;</code> and <code>&gt;&gt;</code> in the shell), but you can use Python’s standard <code>sys</code> module to interact with standard input/output streams.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> click</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="at">@click.command</span>()</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_command():</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> sys.stdin:</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        click.echo(line.upper())</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    my_command()</span></code></pre></div>
<p>This command reads from <code>stdin</code> and writes to <code>stdout</code>. The user could redirect input and output using shell commands.</p>
<h3 id="click-with-other-libraries">Click with other libraries</h3>
<p>Click integrates well with many other Python libraries. For example, you can use it with libraries for:</p>
<ul>
<li><strong>Logging:</strong> Combine Click with the <code>logging</code> module to add detailed logging to your CLI application.</li>
<li><strong>Configuration:</strong> Use libraries like <code>configparser</code> or <code>toml</code> to load settings from configuration files.</li>
<li><strong>Asynchronous operations:</strong> Integrate with <code>asyncio</code> for handling long-running tasks in a non-blocking manner.</li>
<li><strong>Data serialization:</strong> Use libraries like <code>json</code> or <code>pickle</code> to handle data input and output in various formats.</li>
</ul>
<h3 id="testing-click-applications">Testing Click applications</h3>
<p>Testing Click applications involves verifying that commands behave as expected with different arguments and options. The <code>click.testing</code> module provides tools for creating test cases. It allows you to run commands with mocked inputs and check their outputs.</p>
<h3 id="extending-click">Extending Click</h3>
<p>Click is extensible. You can create custom types, decorators, and other components to adapt it to your specific needs. This involves creating custom classes inheriting from Click classes or extending existing behavior. You might want to extend Click if you require additional functionalities or wish to enforce custom validation logic not supported by built-in types.</p>
<h2 id="best-practices-and-style-guide">Best Practices and Style Guide</h2>
<h3 id="writing-clean-and-readable-click-applications">Writing clean and readable Click applications</h3>
<p>Writing clean, readable Click applications involves focusing on several key aspects:</p>
<ul>
<li><p><strong>Modular design:</strong> Break down complex CLIs into smaller, well-defined commands and groups, promoting reusability and maintainability. Avoid creating overly large functions or commands.</p></li>
<li><p><strong>Meaningful names:</strong> Choose descriptive names for commands, groups, options, and arguments to clearly communicate their purpose. Follow Python’s naming conventions (snake_case).</p></li>
<li><p><strong>Consistent formatting:</strong> Maintain consistent indentation, spacing, and code style throughout your application using a tool like <code>black</code>.</p></li>
<li><p><strong>Clear docstrings:</strong> Write concise and informative docstrings for all commands and groups to provide clear help messages.</p></li>
<li><p><strong>Effective comments:</strong> Use comments to explain complex logic or non-obvious behavior.</p></li>
<li><p><strong>Error handling:</strong> Implement robust error handling to provide users with informative messages in case of problems.</p></li>
</ul>
<h3 id="structuring-your-code">Structuring your code</h3>
<p>Organize your Click application’s code into logical modules or packages to avoid creating monolithic files. A common approach is to:</p>
<ol type="1">
<li>Have a main script that defines the top-level group.</li>
<li>Create separate modules or packages for individual commands or groups of related commands.</li>
<li>Use a well-defined structure that separates command logic from supporting functions or utilities.</li>
</ol>
<p>For example, you might have a <code>cli.py</code> file for the main entry point and separate files (e.g., <code>user_commands.py</code>, <code>project_commands.py</code>) for different command sets.</p>
<h3 id="choosing-appropriate-option-names">Choosing appropriate option names</h3>
<p>Option names should be clear, concise, and consistent. Favor long option names that clearly describe the option’s purpose over short options. Use the double-hyphen (<code>--</code>) prefix for long option names. For example, <code>--verbose</code> is preferable to <code>-v</code>, especially in more complex CLIs where short options can become ambiguous. Consider using standard option names where applicable (e.g., <code>--help</code>, <code>--version</code>). If the option takes a value, ensure the name clearly indicates the type of value expected.</p>
<h3 id="consistent-error-handling">Consistent error handling</h3>
<p>Maintain consistency in how you handle errors throughout your application. Use <code>click.BadParameter</code> for invalid input, provide user-friendly error messages, and handle exceptions gracefully. Consider using a centralized logging system for more comprehensive error tracking and debugging. For critical errors, terminate the program using <code>click.Abort()</code> for a clean exit and provide the user with information on how to proceed.</p>
<h3 id="testing-and-documentation">Testing and documentation</h3>
<p>Thoroughly test your Click application to ensure that commands work as expected with various inputs and conditions. Use a testing framework like <code>pytest</code> along with <code>click.testing</code> to write unit tests for individual commands. Provide comprehensive documentation explaining how to use your CLI, including a clear usage guide with examples. Tools like Sphinx can help generate professional-looking documentation from docstrings and other comments in your code. Include examples of how to use your CLI, detailing both common and advanced usage patterns. Make sure your documentation keeps pace with your code updates; a stale documentation is worse than no documentation.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>