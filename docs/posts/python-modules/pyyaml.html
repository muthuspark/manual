<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>pyyaml - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id="></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="../../favicon.ico">
<meta property="og:title" content="pyyaml - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">pyyaml - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-pyyaml" id="toc-what-is-pyyaml">What is PyYAML?</a></li>
  <li><a href="#why-use-pyyaml" id="toc-why-use-pyyaml">Why use PyYAML?</a></li>
  <li><a href="#installation-and-setup" id="toc-installation-and-setup">Installation and Setup</a></li>
  <li><a href="#basic-yaml-syntax" id="toc-basic-yaml-syntax">Basic YAML Syntax</a></li>
  <li><a href="#loading-yaml-data" id="toc-loading-yaml-data">Loading YAML Data</a>
  <ul>
  <li><a href="#using-yaml.load-and-yaml.safe_load" id="toc-using-yaml.load-and-yaml.safe_load">Using <code>yaml.load()</code> and <code>yaml.safe_load()</code></a></li>
  <li><a href="#handling-different-yaml-data-types" id="toc-handling-different-yaml-data-types">Handling different YAML data types</a></li>
  <li><a href="#error-handling-and-exception-management" id="toc-error-handling-and-exception-management">Error Handling and Exception Management</a></li>
  <li><a href="#working-with-yaml-anchors-and-aliases" id="toc-working-with-yaml-anchors-and-aliases">Working with YAML anchors and aliases</a></li>
  </ul></li>
  <li><a href="#dumping-yaml-data" id="toc-dumping-yaml-data">Dumping YAML Data</a>
  <ul>
  <li><a href="#using-yaml.dump" id="toc-using-yaml.dump">Using <code>yaml.dump()</code></a></li>
  <li><a href="#customizing-yaml-output-indentation-style" id="toc-customizing-yaml-output-indentation-style">Customizing YAML output (indentation, style)</a></li>
  <li><a href="#representing-python-objects-in-yaml" id="toc-representing-python-objects-in-yaml">Representing Python objects in YAML</a></li>
  <li><a href="#controlling-data-serialization" id="toc-controlling-data-serialization">Controlling data serialization</a></li>
  </ul></li>
  <li><a href="#advanced-pyyaml-features" id="toc-advanced-pyyaml-features">Advanced PyYAML Features</a>
  <ul>
  <li><a href="#constructors-and-representers" id="toc-constructors-and-representers">Constructors and Representers</a></li>
  <li><a href="#using-custom-types" id="toc-using-custom-types">Using custom types</a></li>
  <li><a href="#working-with-yaml-tags" id="toc-working-with-yaml-tags">Working with YAML tags</a></li>
  <li><a href="#extending-pyyaml-functionality" id="toc-extending-pyyaml-functionality">Extending PyYAML functionality</a></li>
  </ul></li>
  <li><a href="#best-practices-and-common-pitfalls" id="toc-best-practices-and-common-pitfalls">Best Practices and Common Pitfalls</a>
  <ul>
  <li><a href="#security-considerations-safe_load" id="toc-security-considerations-safe_load">Security Considerations (<code>safe_load</code>)</a></li>
  <li><a href="#efficient-yaml-data-handling" id="toc-efficient-yaml-data-handling">Efficient YAML data handling</a></li>
  <li><a href="#debugging-yaml-parsing-errors" id="toc-debugging-yaml-parsing-errors">Debugging YAML parsing errors</a></li>
  <li><a href="#common-mistakes-and-how-to-avoid-them" id="toc-common-mistakes-and-how-to-avoid-them">Common mistakes and how to avoid them</a></li>
  </ul></li>
  <li><a href="#pyyaml-and-other-libraries" id="toc-pyyaml-and-other-libraries">PyYAML and Other Libraries</a>
  <ul>
  <li><a href="#integration-with-other-python-libraries" id="toc-integration-with-other-python-libraries">Integration with other Python libraries</a></li>
  <li><a href="#yaml-interoperability" id="toc-yaml-interoperability">YAML interoperability</a></li>
  <li><a href="#working-with-different-yaml-versions-and-formats" id="toc-working-with-different-yaml-versions-and-formats">Working with different YAML versions and formats</a></li>
  </ul></li>
  <li><a href="#appendix-yaml-syntax-reference" id="toc-appendix-yaml-syntax-reference">Appendix: YAML Syntax Reference</a>
  <ul>
  <li><a href="#scalar-types" id="toc-scalar-types">Scalar Types</a></li>
  <li><a href="#sequence-types" id="toc-sequence-types">Sequence Types</a></li>
  <li><a href="#mapping-types" id="toc-mapping-types">Mapping Types</a></li>
  <li><a href="#anchors-and-aliases" id="toc-anchors-and-aliases">Anchors and Aliases</a></li>
  <li><a href="#directives" id="toc-directives">Directives</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-pyyaml">What is PyYAML?</h3>
<p>PyYAML is a YAML parser and emitter for Python. YAML (YAML Ain’t Markup Language) is a human-readable data serialization language often used for configuration files and data interchange. PyYAML provides Pythonic ways to read and write YAML data, making it easy to integrate YAML into your Python applications. It’s a widely used and well-maintained library, offering robust support for various YAML features.</p>
<h3 id="why-use-pyyaml">Why use PyYAML?</h3>
<p>PyYAML offers several advantages for working with YAML in Python:</p>
<ul>
<li><p><strong>Ease of Use:</strong> PyYAML provides a simple and intuitive API for interacting with YAML data. The library handles the complexities of YAML parsing and emitting, allowing you to focus on your application logic.</p></li>
<li><p><strong>Readability:</strong> YAML’s human-readable format makes configuration files and data easier to understand and maintain compared to other serialization formats like JSON or XML. This improves collaboration and reduces the likelihood of errors.</p></li>
<li><p><strong>Flexibility:</strong> YAML supports a wide range of data types, including scalars, sequences (lists), and mappings (dictionaries), making it suitable for representing diverse data structures.</p></li>
<li><p><strong>Wide Adoption:</strong> YAML is a popular choice for configuration files and data exchange in many applications and projects. Using PyYAML allows seamless integration with systems and applications that already use YAML.</p></li>
<li><p><strong>Robustness:</strong> PyYAML is a mature and well-tested library, ensuring reliable parsing and emitting of YAML data.</p></li>
</ul>
<h3 id="installation-and-setup">Installation and Setup</h3>
<p>PyYAML can be installed easily using pip, the Python package installer:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pyyaml</span></code></pre></div>
<p>This command will download and install the latest version of PyYAML. No additional configuration is typically required. After installation, you can import the library into your Python scripts using <code>import yaml</code>.</p>
<h3 id="basic-yaml-syntax">Basic YAML Syntax</h3>
<p>YAML uses indentation to structure data. Indentation must be consistent (typically spaces, not tabs) within a given level. Here are some basic YAML syntax elements:</p>
<ul>
<li><strong>Scalars:</strong> Simple values like strings, numbers, and booleans.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> John Doe</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">age</span><span class="kw">:</span><span class="at"> </span><span class="dv">30</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is_active</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<ul>
<li><strong>Sequences (Lists):</strong> Ordered collections of values.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">languages</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Python</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Java</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> JavaScript</span></span></code></pre></div>
<ul>
<li><strong>Mappings (Dictionaries):</strong> Key-value pairs.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">address</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">street</span><span class="kw">:</span><span class="at"> 123 Main St</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">city</span><span class="kw">:</span><span class="at"> Anytown</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">zip</span><span class="kw">:</span><span class="at"> </span><span class="dv">12345</span></span></code></pre></div>
<ul>
<li><strong>Comments:</strong> Lines starting with <code>#</code> are ignored.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> John Doe</span><span class="co"> # This is a comment</span></span></code></pre></div>
<p>These basic elements can be combined to create complex data structures. Remember consistent indentation is crucial for correct parsing. More advanced YAML features, such as anchors and aliases, are also supported by PyYAML but are beyond the scope of this basic introduction.</p>
<h2 id="loading-yaml-data">Loading YAML Data</h2>
<h3 id="using-yaml.load-and-yaml.safe_load">Using <code>yaml.load()</code> and <code>yaml.safe_load()</code></h3>
<p>PyYAML provides two primary functions for loading YAML data: <code>yaml.load()</code> and <code>yaml.safe_load()</code>. The key difference lies in security.</p>
<p><code>yaml.load()</code> is more flexible and allows for the construction of arbitrary Python objects from the YAML data. However, this can pose a security risk if the YAML data originates from an untrusted source. Maliciously crafted YAML could potentially execute arbitrary code.</p>
<p><code>yaml.safe_load()</code>, on the other hand, restricts the types of objects that can be created, mitigating the security risks. It’s generally recommended to use <code>yaml.safe_load()</code> unless you have a specific need for the unrestricted capabilities of <code>yaml.load()</code>.</p>
<p>Here’s how to use them:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>yaml_data <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="st">name: John Doe</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="st">age: 30</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Using safe_load() (recommended)</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> yaml.safe_load(yaml_data)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)  <span class="co"># Output: {'name': 'John Doe', 'age': 30}</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Using load() (use with caution)</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># data = yaml.load(yaml_data)  #Potentially unsafe!</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># print(data)</span></span></code></pre></div>
<h3 id="handling-different-yaml-data-types">Handling different YAML data types</h3>
<p>PyYAML automatically handles various YAML data types and converts them into their corresponding Python equivalents:</p>
<ul>
<li><strong>Scalars:</strong> Strings, integers, floats, booleans are loaded as their Python counterparts.</li>
<li><strong>Sequences:</strong> YAML lists are loaded as Python lists.</li>
<li><strong>Mappings:</strong> YAML dictionaries are loaded as Python dictionaries.</li>
<li><strong>Null:</strong> YAML null values are loaded as <code>None</code> in Python.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>yaml_data <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="st">name: John Doe</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="st">age: 30</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="st">is_active: true</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="st">languages:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="st">  - Python</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="st">  - Java</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="st">  address:</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="st">    street: 123 Main St</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="st">    zip: null</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> yaml.safe_load(yaml_data)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data[<span class="st">'name'</span>])       <span class="co"># Output: John Doe</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data[<span class="st">'age'</span>])        <span class="co"># Output: 30</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data[<span class="st">'is_active'</span>])  <span class="co"># Output: True</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data[<span class="st">'languages'</span>])  <span class="co"># Output: ['Python', 'Java']</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data[<span class="st">'address'</span>][<span class="st">'zip'</span>]) <span class="co"># Output: None</span></span></code></pre></div>
<h3 id="error-handling-and-exception-management">Error Handling and Exception Management</h3>
<p>When loading YAML data, errors can occur due to invalid YAML syntax or other issues. PyYAML raises exceptions to signal these errors. The most common exception is <code>yaml.YAMLError</code>. It’s crucial to handle these exceptions gracefully to prevent your application from crashing.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    yaml_data <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="st">    name: John Doe</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="st">    age: thirty # Invalid YAML - age should be a number</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> yaml.safe_load(yaml_data)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(data)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> yaml.YAMLError <span class="im">as</span> e:</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"YAML error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>) <span class="co">#Output: YAML error: while scanning a simple key</span></span></code></pre></div>
<p>You can use more specific exception types within <code>yaml.YAMLError</code> for finer-grained error handling if needed. Refer to PyYAML’s documentation for details.</p>
<h3 id="working-with-yaml-anchors-and-aliases">Working with YAML anchors and aliases</h3>
<p>YAML anchors (<code>&amp;</code>) and aliases (<code>*</code>) allow you to define reusable parts of your YAML data. An anchor assigns a name to a section, and aliases reference that named section. PyYAML handles these seamlessly.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>yaml_data <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="st">address: &amp;address</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="st">  street: 123 Main St</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="st">  city: Anytown</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="st">person1:</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="st">  name: Alice</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="st">  address: *address</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="st">person2:</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="st">  name: Bob</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="st">  address: *address</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> yaml.safe_load(yaml_data)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Output:</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># {'address': {'street': '123 Main St', 'city': 'Anytown'}, 'person1': {'name': 'Alice', 'address': {'street': '123 Main St', 'city': 'Anytown'}}, 'person2': {'name': 'Bob', 'address': {'street': '123 Main St', 'city': 'Anytown'</span><span class="re">}}}</span></span></code></pre></div>
<p>Note that aliases resolve to the original anchored data; changes to the original anchor are reflected in all its aliases.</p>
<h2 id="dumping-yaml-data">Dumping YAML Data</h2>
<h3 id="using-yaml.dump">Using <code>yaml.dump()</code></h3>
<p>The <code>yaml.dump()</code> function is used to serialize Python objects into YAML. It takes a Python object as input and returns a YAML string representation.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'name'</span>: <span class="st">'John Doe'</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'age'</span>: <span class="dv">30</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'address'</span>: {</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'street'</span>: <span class="st">'123 Main St'</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'city'</span>: <span class="st">'Anytown'</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>yaml_string <span class="op">=</span> yaml.dump(data)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(yaml_string)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Output (may vary slightly depending on PyYAML version):</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># address:</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   city: Anytown</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   street: 123 Main St</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co"># age: 30</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># name: John Doe</span></span></code></pre></div>
<p>The <code>yaml.dump()</code> function can also take a file object as its second argument, writing the YAML data directly to a file.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ... (data defined as above) ...</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'output.yaml'</span>, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    yaml.dump(data, f)</span></code></pre></div>
<h3 id="customizing-yaml-output-indentation-style">Customizing YAML output (indentation, style)</h3>
<p>The output format of <code>yaml.dump()</code> can be customized using various parameters:</p>
<ul>
<li><p><code>default_flow_style</code>: Controls whether sequences and mappings are represented in flow style (inline) or block style (multiline). <code>None</code> (default) uses block style for mappings and flow style for sequences when appropriate; <code>False</code> forces block style; <code>True</code> forces flow style.</p></li>
<li><p><code>indent</code>: Specifies the indentation level (number of spaces) for block style. The default is 2.</p></li>
<li><p><code>width</code>: Sets the maximum line width. Lines longer than this will be wrapped. The default is 76.</p></li>
<li><p><code>allow_unicode</code>: If True (default), allows Unicode characters in output; otherwise, only ASCII characters are used.</p></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'name'</span>: <span class="st">'John Doe'</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'age'</span>: <span class="dv">30</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'languages'</span>: [<span class="st">'Python'</span>, <span class="st">'Java'</span>, <span class="st">'JavaScript'</span>]</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Customized output</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>yaml_string <span class="op">=</span> yaml.dump(data, indent<span class="op">=</span><span class="dv">4</span>, default_flow_style<span class="op">=</span><span class="va">False</span>, width<span class="op">=</span><span class="dv">40</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(yaml_string)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Output (will be formatted with 4 spaces indentation and wider lines):</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># name: John Doe</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># age: 30</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co"># languages:</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#     - Python</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#     - Java</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#     - JavaScript</span></span></code></pre></div>
<h3 id="representing-python-objects-in-yaml">Representing Python objects in YAML</h3>
<p>PyYAML automatically handles many standard Python data types. However, for custom classes or objects, you might need to provide a custom representation. This is done using a <code>representer</code> within a <code>yaml.Dumper</code> subclass.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Person:</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, age):</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.age <span class="op">=</span> age</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> represent_person(dumper, data):</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dumper.represent_mapping(<span class="st">'!Person'</span>, {<span class="st">'name'</span>: data.name, <span class="st">'age'</span>: data.age})</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>yaml.add_representer(Person, represent_person)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>person <span class="op">=</span> Person(<span class="st">'Alice'</span>, <span class="dv">25</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>yaml_string <span class="op">=</span> yaml.dump(person)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(yaml_string) <span class="co"># Output: !Person {age: 25, name: Alice}</span></span></code></pre></div>
<p>This example adds a custom representer for the <code>Person</code> class, allowing it to be serialized into YAML as a mapping with a custom tag (<code>!Person</code>).</p>
<h3 id="controlling-data-serialization">Controlling data serialization</h3>
<p>By default, <code>yaml.dump()</code> serializes all attributes of a Python object. To control which attributes are included, you can use the <code>Dumper</code> class and override the <code>represent_data</code> method. You can also use the <code>explicit_start</code> and <code>explicit_end</code> flags to control the use of YAML’s <code>---</code> and <code>...</code> document separators. This is particularly useful when dumping multiple documents.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyData:</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, a, b, c):</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.a <span class="op">=</span> a</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.b <span class="op">=</span> b</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.c <span class="op">=</span> c</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> MyData(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> represent_mydata(dumper, data):</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dumper.represent_mapping(<span class="st">'!MyData'</span>, {<span class="st">'a'</span>: data.a, <span class="st">'b'</span>: data.b}) <span class="co"># c is omitted</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>yaml.add_representer(MyData, represent_mydata)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>yaml_string <span class="op">=</span> yaml.dump(data, Dumper<span class="op">=</span>yaml.Dumper, default_flow_style<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(yaml_string) <span class="co"># Output: !MyData {a: 1, b: 2}</span></span></code></pre></div>
<p>This example shows how to selectively serialize attributes of the <code>MyData</code> object. The attribute <code>c</code> is deliberately excluded from the YAML output. Using a custom <code>Dumper</code> allows for complete control over the serialization process.</p>
<h2 id="advanced-pyyaml-features">Advanced PyYAML Features</h2>
<h3 id="constructors-and-representers">Constructors and Representers</h3>
<p>Constructors and representers are fundamental to PyYAML’s ability to handle custom data types and extend its functionality beyond the standard Python types. A constructor is a function that takes a YAML node and creates a corresponding Python object. A representer, conversely, takes a Python object and creates a YAML node to represent it.</p>
<p>PyYAML automatically handles the construction and representation of standard Python types, but for custom types, you need to define your own constructors and representers. This is done using <code>yaml.add_constructor</code> and <code>yaml.add_representer</code>. These functions take a tag (a string identifying the type) and the constructor/representer function as arguments. The tag is typically a YAML tag that uniquely identifies your custom type in the YAML document. This lets you map between YAML syntax and your custom Python objects.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Point:</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, x, y):</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.x <span class="op">=</span> x</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.y <span class="op">=</span> y</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> construct_point(loader, node):</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    mapping <span class="op">=</span> loader.construct_mapping(node)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Point(mapping[<span class="st">'x'</span>], mapping[<span class="st">'y'</span>])</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> represent_point(dumper, data):</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dumper.represent_mapping(<span class="st">'!Point'</span>, {<span class="st">'x'</span>: data.x, <span class="st">'y'</span>: data.y})</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>yaml.add_constructor(<span class="st">'!Point'</span>, construct_point)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>yaml.add_representer(Point, represent_point)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>point <span class="op">=</span> Point(<span class="dv">10</span>, <span class="dv">20</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>yaml_string <span class="op">=</span> yaml.dump(point)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(yaml_string)  <span class="co"># Output: !Point {x: 10, y: 20}</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>loaded_point <span class="op">=</span> yaml.load(yaml_string)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(loaded_point.x, loaded_point.y) <span class="co"># Output: 10 20</span></span></code></pre></div>
<h3 id="using-custom-types">Using custom types</h3>
<p>By defining custom constructors and representers, you can seamlessly integrate your own classes and data structures with PyYAML. This extends PyYAML’s ability to handle more complex data than just built-in Python types. This approach is essential when you are working with domain-specific data models that need to be represented in YAML. The key here is to define a consistent mapping between your Python objects and their YAML representation using appropriate tags.</p>
<h3 id="working-with-yaml-tags">Working with YAML tags</h3>
<p>YAML tags provide a mechanism for specifying the type of a YAML node. They are prefixed with an exclamation mark (<code>!</code>). Custom constructors and representers are often associated with specific tags, allowing PyYAML to determine how to handle objects with those tags. Using custom tags helps maintain clarity and avoids ambiguity when working with diverse data types. They provide a way to explicitly state what kind of data is being represented.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yaml</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ... (Point class, construct_point, and represent_point from previous example) ...</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>yaml_data <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="st">point: !Point {x: 30, y: 40}</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> yaml.load(yaml_data)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data[<span class="st">'point'</span>].x, data[<span class="st">'point'</span>].y)  <span class="co"># Output: 30 40</span></span></code></pre></div>
<p>In this example, <code>!Point</code> acts as the tag, triggering the custom constructor to create a <code>Point</code> object.</p>
<h3 id="extending-pyyaml-functionality">Extending PyYAML functionality</h3>
<p>PyYAML’s flexibility allows for significant extension beyond its core functionality. You can:</p>
<ul>
<li><p><strong>Create custom resolvers:</strong> To handle YAML aliases and anchors in a specific way, you can create custom resolvers. Resolvers are crucial when dealing with complex YAML structures where you might need fine-grained control over how references are handled.</p></li>
<li><p><strong>Implement custom loaders and dumpers:</strong> To manage the entire process of loading and dumping YAML, you can build your own loaders and dumpers. This offers maximum control over every aspect of YAML data processing. This would typically involve subclassing <code>yaml.Loader</code> and <code>yaml.Dumper</code> and overriding methods to adjust behavior as needed.</p></li>
<li><p><strong>Integrate with other libraries:</strong> PyYAML’s simple API enables easy integration with other libraries for tasks such as schema validation, data transformation, or data visualization.</p></li>
</ul>
<p>By combining custom constructors, representers, resolvers, and loaders/dumpers, you can adapt PyYAML to suit almost any data serialization need within your Python applications. This adaptability makes it a powerful tool for a wide range of projects.</p>
<h2 id="best-practices-and-common-pitfalls">Best Practices and Common Pitfalls</h2>
<h3 id="security-considerations-safe_load">Security Considerations (<code>safe_load</code>)</h3>
<p>The most crucial security consideration when using PyYAML is to <strong>always prefer <code>yaml.safe_load()</code> over <code>yaml.load()</code></strong>. <code>yaml.load()</code> allows arbitrary code execution if the YAML data is maliciously crafted. This vulnerability is serious and can compromise the security of your application. <code>yaml.safe_load()</code> restricts the types of objects that can be created, significantly reducing this risk. Only use <code>yaml.load()</code> if you absolutely understand the security implications and have thoroughly vetted the source of the YAML data. For any production environment or untrusted data sources, <code>yaml.safe_load()</code> is the only safe option.</p>
<h3 id="efficient-yaml-data-handling">Efficient YAML data handling</h3>
<p>For large YAML files, processing can become computationally expensive. Consider these optimizations:</p>
<ul>
<li><p><strong>Streaming:</strong> For very large files, using PyYAML’s streaming capabilities (e.g., <code>yaml.safe_load_all</code>) can significantly improve performance. This avoids loading the entire YAML document into memory at once; instead, data is processed incrementally.</p></li>
<li><p><strong>Optimized data structures:</strong> If possible, use efficient Python data structures (like NumPy arrays) for numerical data to reduce memory usage and improve processing speed.</p></li>
<li><p><strong>Data validation:</strong> Validate the YAML data against a schema (e.g., using a library like <code>jsonschema</code>) to prevent errors and ensure data integrity before further processing. This will catch invalid YAML structures early, preventing runtime failures.</p></li>
</ul>
<h3 id="debugging-yaml-parsing-errors">Debugging YAML parsing errors</h3>
<p>When encountering YAML parsing errors, the error message often indicates the line number and type of error. However, pinpointing the exact problem within a large YAML file can be challenging. These debugging tips can help:</p>
<ul>
<li><p><strong>Simplify the input:</strong> Try parsing smaller sections of the YAML file to isolate the problematic area.</p></li>
<li><p><strong>Check indentation:</strong> Ensure consistent indentation (using spaces, not tabs) throughout the file. Incorrect indentation is a common cause of YAML parsing errors.</p></li>
<li><p><strong>Use a YAML validator:</strong> Online YAML validators or tools can help identify syntax errors before attempting to parse the file using PyYAML.</p></li>
<li><p><strong>Print the error message:</strong> Pay close attention to the error message. It usually provides a precise location and description of the issue.</p></li>
<li><p><strong>Examine the YAML:</strong> Carefully review the problematic section to look for issues such as missing colons, incorrect quoting, or extra characters.</p></li>
</ul>
<h3 id="common-mistakes-and-how-to-avoid-them">Common mistakes and how to avoid them</h3>
<ul>
<li><p><strong>Inconsistent indentation:</strong> Always use consistent indentation (spaces are recommended) at each level in your YAML file. Mixing tabs and spaces leads to parsing errors.</p></li>
<li><p><strong>Incorrect data types:</strong> Ensure that the data types in your YAML file match the expected types in your Python code. Mismatches can lead to unexpected behavior or exceptions.</p></li>
<li><p><strong>Forgetting quotes:</strong> String values must always be enclosed in single or double quotes unless they are simple identifiers that match the YAML specification.</p></li>
<li><p><strong>Using <code>yaml.load()</code> instead of <code>yaml.safe_load()</code>:</strong> Always use <code>yaml.safe_load()</code> unless you fully understand and accept the security risks of <code>yaml.load()</code>.</p></li>
<li><p><strong>Ignoring error handling:</strong> Always wrap your YAML loading operations in <code>try...except</code> blocks to handle potential <code>yaml.YAMLError</code> exceptions gracefully. Unexpected exceptions can crash your application if not handled correctly.</p></li>
<li><p><strong>Not using a YAML validator:</strong> Before parsing, validate your YAML to prevent many common errors. This significantly reduces runtime errors and improves code stability.</p></li>
</ul>
<p>By following these best practices and being mindful of common pitfalls, you can write more robust and secure Python applications that use PyYAML effectively.</p>
<h2 id="pyyaml-and-other-libraries">PyYAML and Other Libraries</h2>
<h3 id="integration-with-other-python-libraries">Integration with other Python libraries</h3>
<p>PyYAML integrates well with many other Python libraries, extending its capabilities and enabling powerful workflows. Here are some examples:</p>
<ul>
<li><p><strong>Data validation:</strong> Libraries like <code>jsonschema</code> can be used to validate YAML data against a schema, ensuring data integrity and preventing errors. You can load YAML with PyYAML and then use <code>jsonschema</code> to verify that it conforms to a defined structure.</p></li>
<li><p><strong>Data transformation:</strong> Libraries like <code>pandas</code> can efficiently process and manipulate data loaded from YAML files using PyYAML. This allows for combining YAML’s configuration capabilities with pandas’ powerful data analysis tools.</p></li>
<li><p><strong>Configuration management:</strong> Frameworks like <code>Ansible</code> and <code>SaltStack</code> often use YAML for configuration files. PyYAML can help parse and manage this configuration data within your Python scripts that interact with these tools.</p></li>
<li><p><strong>Serialization and deserialization:</strong> PyYAML can complement other serialization libraries like <code>json</code> or <code>pickle</code>. If you are working with systems that handle multiple serialization formats, PyYAML offers a way to easily incorporate YAML into your data exchange processes.</p></li>
<li><p><strong>Web frameworks:</strong> Web frameworks like <code>Flask</code> and <code>Django</code> can utilize PyYAML to read configuration files or handle data from external sources formatted in YAML.</p></li>
</ul>
<p>The simple API of PyYAML makes it straightforward to integrate into these and other libraries. The focus is on efficiently parsing and handling YAML data, making it a flexible component in larger systems.</p>
<h3 id="yaml-interoperability">YAML interoperability</h3>
<p>YAML’s design emphasizes interoperability. PyYAML is designed to conform to the YAML specification, enabling seamless data exchange between different systems and programming languages. However, subtle differences in YAML implementations across different languages might exist. To minimize issues:</p>
<ul>
<li><p><strong>Stick to the YAML specification:</strong> Adhere to the YAML 1.2 specification as closely as possible in your YAML files to ensure compatibility. Avoid using features that are implementation-specific or not well-supported across different YAML parsers.</p></li>
<li><p><strong>Test across different parsers:</strong> When exchanging YAML data with systems using other YAML libraries (e.g., in different programming languages), test the interoperability thoroughly to ensure that the data is interpreted consistently.</p></li>
</ul>
<h3 id="working-with-different-yaml-versions-and-formats">Working with different YAML versions and formats</h3>
<p>While PyYAML generally handles various YAML versions, it’s recommended to be explicit about the YAML version you’re using. While the YAML 1.2 specification is the most commonly used, there are subtle differences in the older 1.1 specification. If backward compatibility is critical (for example, working with older systems or configurations), you might need to carefully consider how your YAML files are structured and how they interact with the PyYAML library.</p>
<p>PyYAML’s strength lies in its ability to handle a wide range of YAML formats and versions, but being aware of potential compatibility issues and testing interoperability are vital steps in ensuring smooth data exchange in diverse environments. Clear specification of YAML versions used in documentation and code comments helps prevent misunderstandings and reduces compatibility problems.</p>
<h2 id="appendix-yaml-syntax-reference">Appendix: YAML Syntax Reference</h2>
<p>This appendix provides a concise reference to YAML syntax relevant to PyYAML’s capabilities. For a complete and detailed YAML specification, refer to the official YAML documentation.</p>
<h3 id="scalar-types">Scalar Types</h3>
<p>Scalar types represent single data values. Common scalar types in YAML include:</p>
<ul>
<li><strong>String:</strong> Text enclosed in single (<code>'</code>) or double quotes (<code>"</code>). Double quotes allow escaping special characters. Plain strings (without quotes) are also allowed if they don’t contain spaces, special characters, or certain control characters.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"John Doe"</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">'This is a description.'</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">simple_string</span><span class="kw">:</span><span class="at"> this_is_a_simple_string</span></span></code></pre></div>
<ul>
<li><strong>Integer:</strong> A whole number.</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">age</span><span class="kw">:</span><span class="at"> </span><span class="dv">30</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span><span class="kw">:</span><span class="at"> </span><span class="dv">100</span></span></code></pre></div>
<ul>
<li><strong>Float:</strong> A number with a decimal point.</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">price</span><span class="kw">:</span><span class="at"> </span><span class="fl">99.99</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">temperature</span><span class="kw">:</span><span class="at"> </span><span class="fl">25.5</span></span></code></pre></div>
<ul>
<li><strong>Boolean:</strong> <code>true</code> or <code>false</code>.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is_active</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
<ul>
<li><strong>Null:</strong> Represents the absence of a value. Can be represented as <code>null</code>, <code>~</code>, or <code>null</code>.</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">optional_field</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span></code></pre></div>
<h3 id="sequence-types">Sequence Types</h3>
<p>Sequence types represent ordered lists of values. They are denoted by a hyphen (<code>-</code>) at the beginning of each item.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">languages</span><span class="kw">:</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Python</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Java</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> JavaScript</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">numbers</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="dv">1</span><span class="kw">,</span><span class="at"> </span><span class="dv">2</span><span class="kw">,</span><span class="at"> </span><span class="dv">3</span><span class="kw">,</span><span class="at"> </span><span class="dv">4</span><span class="kw">,</span><span class="at"> </span><span class="dv">5</span><span class="kw">]</span><span class="co"> # Flow style sequence</span></span></code></pre></div>
<p>Items in sequences can be of any YAML data type (scalar, sequence, or mapping).</p>
<h3 id="mapping-types">Mapping Types</h3>
<p>Mapping types represent key-value pairs, similar to dictionaries in Python. Keys are written before a colon (<code>:</code>), and values follow.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">address</span><span class="kw">:</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">street</span><span class="kw">:</span><span class="at"> 123 Main St</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">city</span><span class="kw">:</span><span class="at"> Anytown</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">zip</span><span class="kw">:</span><span class="at"> </span><span class="dv">12345</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">person</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"Alice"</span><span class="kw">,</span><span class="at"> </span><span class="fu">age</span><span class="kw">:</span><span class="at"> </span><span class="dv">30</span><span class="at"> </span><span class="kw">}</span><span class="co"> # Flow style mapping</span></span></code></pre></div>
<p>Keys must be scalars, and values can be scalars, sequences, or mappings.</p>
<h3 id="anchors-and-aliases">Anchors and Aliases</h3>
<p>Anchors (<code>&amp;</code>) and aliases (<code>*</code>) allow for the reuse of YAML data structures. An anchor assigns a name to a section, and an alias references that section.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">address</span><span class="kw">:</span><span class="at"> </span><span class="ot">&amp;address</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">street</span><span class="kw">:</span><span class="at"> 123 Main St</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">city</span><span class="kw">:</span><span class="at"> Anytown</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">person1</span><span class="kw">:</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Alice</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">address</span><span class="kw">:</span><span class="at"> </span><span class="ot">*address</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">person2</span><span class="kw">:</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Bob</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">address</span><span class="kw">:</span><span class="at"> </span><span class="ot">*address</span></span></code></pre></div>
<p>This example defines <code>address</code> as an anchor and then uses it as an alias in <code>person1</code> and <code>person2</code>. Changes to the anchor’s definition will be reflected in all its aliases.</p>
<h3 id="directives">Directives</h3>
<p>Directives provide instructions to the YAML processor. They start with a percent sign (<code>%</code>) and are typically placed at the beginning of a YAML document. The most commonly used directive is <code>%YAML</code>, which specifies the YAML version.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="pp">%YAML 1.2</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> John Doe</span></span></code></pre></div>
<p>While PyYAML supports directives, they are not always strictly required for parsing. The <code>%YAML</code> directive clarifies which YAML version the document adheres to, but PyYAML often infers this from the document content. Using explicit directives, however, enhances readability and clarity, especially when dealing with complex YAML files or for interoperability concerns.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>