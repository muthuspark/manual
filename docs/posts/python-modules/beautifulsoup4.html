<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>beautifulsoup4 - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id="></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="../../favicon.ico">
<meta property="og:title" content="beautifulsoup4 - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">beautifulsoup4 - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-beautiful-soup" id="toc-what-is-beautiful-soup">What is Beautiful Soup?</a></li>
  <li><a href="#why-use-beautiful-soup" id="toc-why-use-beautiful-soup">Why use Beautiful Soup?</a></li>
  <li><a href="#installation-and-setup" id="toc-installation-and-setup">Installation and Setup</a></li>
  <li><a href="#choosing-a-parser" id="toc-choosing-a-parser">Choosing a Parser</a></li>
  <li><a href="#navigating-the-parse-tree" id="toc-navigating-the-parse-tree">Navigating the Parse Tree</a>
  <ul>
  <li><a href="#understanding-the-dom" id="toc-understanding-the-dom">Understanding the DOM</a></li>
  <li><a href="#finding-elements-by-tag-name" id="toc-finding-elements-by-tag-name">Finding Elements by Tag Name</a></li>
  <li><a href="#finding-elements-by-attributes" id="toc-finding-elements-by-attributes">Finding Elements by Attributes</a></li>
  <li><a href="#css-selectors" id="toc-css-selectors">CSS Selectors</a></li>
  <li><a href="#navigating-with-.find-and-.find_all" id="toc-navigating-with-.find-and-.find_all">Navigating with <code>.find()</code> and <code>.find_all()</code></a></li>
  <li><a href="#navigating-with-.next_sibling-and-.previous_sibling" id="toc-navigating-with-.next_sibling-and-.previous_sibling">Navigating with <code>.next_sibling</code> and <code>.previous_sibling</code></a></li>
  <li><a href="#navigating-with-.parent-.children-and-.descendants" id="toc-navigating-with-.parent-.children-and-.descendants">Navigating with <code>.parent</code>, <code>.children</code>, and <code>.descendants</code></a></li>
  <li><a href="#navigating-with-.find_next-and-.find_previous" id="toc-navigating-with-.find_next-and-.find_previous">Navigating with <code>.find_next()</code> and <code>.find_previous()</code></a></li>
  <li><a href="#navigating-with-.find_next_sibling-and-.find_previous_sibling" id="toc-navigating-with-.find_next_sibling-and-.find_previous_sibling">Navigating with <code>.find_next_sibling()</code> and <code>.find_previous_sibling()</code></a></li>
  </ul></li>
  <li><a href="#searching-the-parse-tree" id="toc-searching-the-parse-tree">Searching the Parse Tree</a>
  <ul>
  <li><a href="#advanced-search-techniques" id="toc-advanced-search-techniques">Advanced Search Techniques</a></li>
  <li><a href="#regular-expressions-in-searching" id="toc-regular-expressions-in-searching">Regular Expressions in Searching</a></li>
  <li><a href="#using-lambda-functions-for-custom-searches" id="toc-using-lambda-functions-for-custom-searches">Using <code>lambda</code> functions for custom searches</a></li>
  <li><a href="#searching-with-multiple-criteria" id="toc-searching-with-multiple-criteria">Searching with multiple criteria</a></li>
  </ul></li>
  <li><a href="#modifying-the-parse-tree" id="toc-modifying-the-parse-tree">Modifying the Parse Tree</a>
  <ul>
  <li><a href="#adding-elements" id="toc-adding-elements">Adding elements</a></li>
  <li><a href="#replacing-elements" id="toc-replacing-elements">Replacing elements</a></li>
  <li><a href="#removing-elements" id="toc-removing-elements">Removing elements</a></li>
  <li><a href="#modifying-attributes" id="toc-modifying-attributes">Modifying attributes</a></li>
  <li><a href="#modifying-text-content" id="toc-modifying-text-content">Modifying text content</a></li>
  </ul></li>
  <li><a href="#outputting-data" id="toc-outputting-data">Outputting Data</a>
  <ul>
  <li><a href="#outputting-to-a-string" id="toc-outputting-to-a-string">Outputting to a String</a></li>
  <li><a href="#outputting-to-a-file" id="toc-outputting-to-a-file">Outputting to a File</a></li>
  <li><a href="#pretty-printing" id="toc-pretty-printing">Pretty Printing</a></li>
  <li><a href="#customizing-output" id="toc-customizing-output">Customizing Output</a></li>
  </ul></li>
  <li><a href="#handling-different-html-structures" id="toc-handling-different-html-structures">Handling Different HTML Structures</a>
  <ul>
  <li><a href="#dealing-with-malformed-html" id="toc-dealing-with-malformed-html">Dealing with Malformed HTML</a></li>
  <li><a href="#working-with-xml" id="toc-working-with-xml">Working with XML</a></li>
  <li><a href="#handling-encoding-issues" id="toc-handling-encoding-issues">Handling Encoding Issues</a></li>
  </ul></li>
  <li><a href="#advanced-techniques" id="toc-advanced-techniques">Advanced Techniques</a>
  <ul>
  <li><a href="#using-beautiful-soup-with-other-libraries" id="toc-using-beautiful-soup-with-other-libraries">Using Beautiful Soup with other libraries</a></li>
  <li><a href="#handling-large-files-efficiently" id="toc-handling-large-files-efficiently">Handling large files efficiently</a></li>
  <li><a href="#best-practices-for-error-handling" id="toc-best-practices-for-error-handling">Best practices for error handling</a></li>
  <li><a href="#performance-optimization" id="toc-performance-optimization">Performance optimization</a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix">Appendix</a>
  <ul>
  <li><a href="#list-of-all-methods" id="toc-list-of-all-methods">List of all methods</a></li>
  <li><a href="#common-errors-and-troubleshooting" id="toc-common-errors-and-troubleshooting">Common Errors and Troubleshooting</a></li>
  <li><a href="#further-reading-and-resources" id="toc-further-reading-and-resources">Further Reading and Resources</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-beautiful-soup">What is Beautiful Soup?</h3>
<p>Beautiful Soup is a Python library for parsing HTML and XML documents. It creates a parse tree from the document and provides methods to navigate and search through the parse tree. Essentially, it makes it easy to extract data from HTML and XML files, even if those files are poorly formatted or incomplete. Beautiful Soup automatically handles many of the quirks and inconsistencies found in real-world HTML, making it a robust and reliable tool for web scraping and data extraction. It sits on top of other Python parsers, such as lxml and html5lib, providing a consistent and user-friendly interface regardless of the underlying parser you choose.</p>
<h3 id="why-use-beautiful-soup">Why use Beautiful Soup?</h3>
<p>Beautiful Soup simplifies the process of extracting data from HTML and XML. Its clean and intuitive API allows developers to quickly and easily navigate and search through complex documents. Key benefits include:</p>
<ul>
<li><strong>Ease of Use:</strong> Beautiful Soup’s API is designed to be user-friendly, making it easier to learn and use than working directly with the underlying parser’s API.</li>
<li><strong>Robustness:</strong> It gracefully handles malformed HTML, a common issue with real-world web pages, preventing errors and ensuring reliable data extraction.</li>
<li><strong>Flexibility:</strong> It supports multiple parsers, allowing you to choose the one best suited to your needs and the complexity of the documents you’re processing.</li>
<li><strong>Extensive Documentation:</strong> Beautiful Soup has comprehensive and well-maintained documentation, making it easy to find solutions to common problems and learn advanced techniques.</li>
<li><strong>Active Community:</strong> A large and active community provides support, answers questions, and contributes to its ongoing development.</li>
</ul>
<h3 id="installation-and-setup">Installation and Setup</h3>
<p>Beautiful Soup is readily available through PyPI (Python Package Index). The easiest way to install it is using pip:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install beautifulsoup4</span></code></pre></div>
<p>This command will download and install Beautiful Soup, along with its dependencies. You may need administrator privileges (e.g., using <code>sudo</code> on Linux/macOS) depending on your system configuration. Once installed, you can import it into your Python scripts:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span></code></pre></div>
<h3 id="choosing-a-parser">Choosing a Parser</h3>
<p>Beautiful Soup doesn’t do the parsing itself; it relies on an underlying parser. When you create a BeautifulSoup object, you specify which parser to use. The most common options are:</p>
<ul>
<li><p><strong><code>html.parser</code>:</strong> A built-in parser that’s included with Python. It’s a good general-purpose choice and is usually sufficient for well-formed HTML. It’s slower than other options, but has the advantage of not requiring any external dependencies.</p></li>
<li><p><strong><code>lxml</code>:</strong> A very fast and powerful parser. It handles both HTML and XML well and is highly recommended for performance-critical applications. Requires installing <code>lxml</code> separately using <code>pip install lxml</code>.</p></li>
<li><p><strong><code>html5lib</code>:</strong> A forgiving parser that strives to parse even the most malformed HTML. It’s a good option when dealing with messy or invalid HTML, but it tends to be slower than <code>lxml</code>. Requires installing <code>html5lib</code> separately using <code>pip install html5lib</code>.</p></li>
</ul>
<p>To choose a parser, specify it as the second argument when creating a <code>BeautifulSoup</code> object. For example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using html.parser (default if no parser is specified)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html_doc, <span class="st">"html.parser"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Using lxml</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html_doc, <span class="st">"lxml"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Using html5lib</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html_doc, <span class="st">"html5lib"</span>)</span></code></pre></div>
<p>Replace <code>html_doc</code> with your HTML string or file. If you don’t specify a parser, Beautiful Soup defaults to <code>html.parser</code>. If you install <code>lxml</code> or <code>html5lib</code>, it’s generally recommended to use them for better performance or robustness, as appropriate for your data.</p>
<h2 id="navigating-the-parse-tree">Navigating the Parse Tree</h2>
<h3 id="understanding-the-dom">Understanding the DOM</h3>
<p>Beautiful Soup represents an HTML or XML document as a Document Object Model (DOM) tree. This tree is a hierarchical structure where each node represents an element, tag, or piece of text within the document. The root of the tree is the document itself, and branches extend down to represent nested elements. Understanding this tree structure is crucial for effectively navigating and extracting data using Beautiful Soup. Elements are organized in a parent-child relationship; a parent element contains its children (child elements, text nodes, etc.).</p>
<h3 id="finding-elements-by-tag-name">Finding Elements by Tag Name</h3>
<p>You can directly find elements based on their tag name using the <code>find()</code> and <code>find_all()</code> methods. <code>find()</code> returns the first matching tag, while <code>find_all()</code> returns a list of all matching tags.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;h1&gt;This is a heading&lt;/h1&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p&gt;This is a paragraph.&lt;/p&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p&gt;Another paragraph.&lt;/p&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the first paragraph tag</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>first_paragraph <span class="op">=</span> soup.find(<span class="st">'p'</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(first_paragraph)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all paragraph tags</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>all_paragraphs <span class="op">=</span> soup.find_all(<span class="st">'p'</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> all_paragraphs:</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(p.text)</span></code></pre></div>
<h3 id="finding-elements-by-attributes">Finding Elements by Attributes</h3>
<p>Elements often have attributes (e.g., <code>id</code>, <code>class</code>, <code>href</code>). You can search for elements based on their attribute values using the <code>find()</code> and <code>find_all()</code> methods with keyword arguments representing the attributes.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;a href="https://www.example.com"&gt;Example&lt;/a&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;a href="https://www.google.com" class="external"&gt;Google&lt;/a&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Find a link with href="https://www.example.com"</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>link <span class="op">=</span> soup.find(<span class="st">'a'</span>, href<span class="op">=</span><span class="st">"https://www.example.com"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(link)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Find all links with class="external"</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>external_links <span class="op">=</span> soup.find_all(<span class="st">'a'</span>, class_<span class="op">=</span><span class="st">"external"</span>) <span class="co"># Note: class is a keyword in Python, use class_</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> link <span class="kw">in</span> external_links:</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(link[<span class="st">'href'</span>])</span></code></pre></div>
<h3 id="css-selectors">CSS Selectors</h3>
<p>Beautiful Soup supports CSS selectors for more complex searches. This allows for powerful and concise element selection.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;div class="container"&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;p class="intro"&gt;Introduction&lt;/p&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;p&gt;Another paragraph&lt;/p&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/div&gt;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all paragraphs within a div with class="container"</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>paragraphs <span class="op">=</span> soup.select(<span class="st">'div.container p'</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> paragraphs:</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(p.text)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Find all elements with class intro</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>intro_elements <span class="op">=</span> soup.select(<span class="st">'.intro'</span>)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> element <span class="kw">in</span> intro_elements:</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(element.text)</span></code></pre></div>
<h3 id="navigating-with-.find-and-.find_all">Navigating with <code>.find()</code> and <code>.find_all()</code></h3>
<p>These methods, as demonstrated above, are fundamental to searching the tree. They can be used on any tag in the tree to search within its descendants.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Example using find() on a specific tag to search only its children</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>div <span class="op">=</span> soup.find(<span class="st">'div'</span>, class_<span class="op">=</span><span class="st">"container"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>intro_paragraph <span class="op">=</span> div.find(<span class="st">'p'</span>, class_<span class="op">=</span><span class="st">"intro"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(intro_paragraph)</span></code></pre></div>
<h3 id="navigating-with-.next_sibling-and-.previous_sibling">Navigating with <code>.next_sibling</code> and <code>.previous_sibling</code></h3>
<p>These attributes access the immediately following or preceding sibling element, respectively. Note that these only work for elements on the same level in the tree. Text nodes might be siblings as well.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> soup.find(<span class="st">'p'</span>, class_<span class="op">=</span><span class="st">"intro"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>next_sibling <span class="op">=</span> p1.next_sibling</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(next_sibling) <span class="co">#prints the next paragraph</span></span></code></pre></div>
<h3 id="navigating-with-.parent-.children-and-.descendants">Navigating with <code>.parent</code>, <code>.children</code>, and <code>.descendants</code></h3>
<ul>
<li><code>.parent</code>: Accesses the parent element of a tag.</li>
<li><code>.children</code>: Provides an iterator over all direct children of an element (including text nodes).</li>
<li><code>.descendants</code>: Provides an iterator over all descendants of an element (itself, its children, grandchildren, etc.).</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> soup.find(<span class="st">'p'</span>, class_<span class="op">=</span><span class="st">"intro"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>parent_div <span class="op">=</span> p.parent</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parent_div)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> child <span class="kw">in</span> parent_div.children:</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(child)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> descendant <span class="kw">in</span> parent_div.descendants:</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(descendant)</span></code></pre></div>
<h3 id="navigating-with-.find_next-and-.find_previous">Navigating with <code>.find_next()</code> and <code>.find_previous()</code></h3>
<p>These methods search for the next or previous tag in document order, regardless of their hierarchical relationship. They are useful for finding elements that are not necessarily direct children or siblings.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> soup.find(<span class="st">'p'</span>, class_<span class="op">=</span><span class="st">"intro"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>next_p <span class="op">=</span> p1.find_next(<span class="st">'p'</span>) <span class="co">#Finds the next paragraph tag</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(next_p)</span></code></pre></div>
<h3 id="navigating-with-.find_next_sibling-and-.find_previous_sibling">Navigating with <code>.find_next_sibling()</code> and <code>.find_previous_sibling()</code></h3>
<p>These methods are similar to <code>.next_sibling</code> and <code>.previous_sibling</code>, but allow searching for the next or previous sibling that matches a specific tag name or attributes.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> soup.find(<span class="st">'p'</span>, class_<span class="op">=</span><span class="st">"intro"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>next_p <span class="op">=</span> p1.find_next_sibling(<span class="st">'p'</span>) <span class="co">#Finds the next paragraph sibling</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(next_p)</span></code></pre></div>
<h2 id="searching-the-parse-tree">Searching the Parse Tree</h2>
<h3 id="advanced-search-techniques">Advanced Search Techniques</h3>
<p>Beyond basic tag name and attribute searches, Beautiful Soup offers powerful ways to refine your searches. Combining different search criteria and leveraging features like regular expressions and lambda functions allows for highly targeted data extraction.</p>
<h3 id="regular-expressions-in-searching">Regular Expressions in Searching</h3>
<p>Regular expressions provide a flexible way to match patterns within text. Beautiful Soup allows you to use regular expressions in your searches to find elements based on patterns in their text content or attribute values. The <code>re</code> module is used for this.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p&gt;Order number: 12345&lt;/p&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p&gt;Order number: 67890&lt;/p&gt;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p&gt;Invoice ID: ABC-123&lt;/p&gt;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all paragraphs containing an order number (using a regex)</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>order_numbers <span class="op">=</span> soup.find_all(<span class="st">'p'</span>, string<span class="op">=</span>re.<span class="bu">compile</span>(<span class="vs">r'Order number: \d+'</span>))</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> order_numbers:</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(p.text)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Find links containing specific pattern in href attribute</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>links <span class="op">=</span> soup.find_all(<span class="st">'a'</span>, href<span class="op">=</span>re.<span class="bu">compile</span>(<span class="vs">r'https?://www\.example\.com/.*'</span>)) <span class="co">#Example URL pattern</span></span></code></pre></div>
<h3 id="using-lambda-functions-for-custom-searches">Using <code>lambda</code> functions for custom searches</h3>
<p><code>lambda</code> functions allow you to define custom search criteria on the fly. This is particularly useful for complex logic that cannot be easily expressed using simple attribute checks or regular expressions.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p class="price"&gt;$10.99&lt;/p&gt;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p class="price"&gt;$25.50&lt;/p&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p class="other"&gt;Other text&lt;/p&gt;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all price elements where the price is greater than $15</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>expensive_items <span class="op">=</span> soup.find_all(<span class="st">'p'</span>, class_<span class="op">=</span><span class="st">'price'</span>, string<span class="op">=</span><span class="kw">lambda</span> text: <span class="bu">float</span>(text.strip().replace(<span class="st">'$'</span>, <span class="st">''</span>)) <span class="op">&gt;</span> <span class="dv">15</span>)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> expensive_items:</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(item.text)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<h3 id="searching-with-multiple-criteria">Searching with multiple criteria</h3>
<p>You can combine multiple criteria in your searches using keyword arguments within the <code>find()</code> and <code>find_all()</code> methods.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;div id="container1" class="main"&gt;Content 1&lt;/div&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;div id="container2" class="main"&gt;Content 2&lt;/div&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;div id="container3" class="secondary"&gt;Content 3&lt;/div&gt;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Find divs with class "main" and containing "Content 2"</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>divs <span class="op">=</span> soup.find_all(<span class="st">'div'</span>, class_<span class="op">=</span><span class="st">'main'</span>, string<span class="op">=</span><span class="st">'Content 2'</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divs)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Find divs with id starting with "container" and class "main"</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>divs <span class="op">=</span> soup.find_all(<span class="st">'div'</span>, <span class="bu">id</span><span class="op">=</span>re.<span class="bu">compile</span>(<span class="vs">r'^container\d+'</span>), class_<span class="op">=</span><span class="st">'main'</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divs)</span></code></pre></div>
<p>This demonstrates combining class checks with text content checks and regular expressions for id attributes, showing the flexibility of Beautiful Soup’s search capabilities. Remember that all conditions in the find_all() function must be met for an element to be selected.</p>
<h2 id="modifying-the-parse-tree">Modifying the Parse Tree</h2>
<p>Beautiful Soup allows you to modify the parsed HTML or XML document directly. This is useful for tasks like cleaning up messy HTML, transforming data, or generating new HTML content. However, remember that modifications made to the Beautiful Soup object do <em>not</em> change the original HTML source. If you need to preserve the original HTML, make a copy before modifying it.</p>
<h3 id="adding-elements">Adding elements</h3>
<p>You can add new tags and text to the parse tree using standard Python methods for creating and manipulating objects. The <code>new_tag()</code> method is useful for creating new tags.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup, Tag</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;p&gt;Existing text&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a new paragraph tag</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>new_p <span class="op">=</span> soup.new_tag(<span class="st">"p"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>new_p.string <span class="op">=</span> <span class="st">"This is new text."</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>soup.body.append(new_p)  <span class="co"># Append to the body tag</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Add a new heading before the paragraph</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>new_h1 <span class="op">=</span> soup.new_tag(<span class="st">"h1"</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>new_h1.string <span class="op">=</span> <span class="st">"This is a heading"</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>soup.body.insert(<span class="dv">0</span>, new_h1) <span class="co">#Insert at beginning of the body</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup)</span></code></pre></div>
<h3 id="replacing-elements">Replacing elements</h3>
<p>To replace an existing element with a new one, you can use Python’s standard replacement techniques such as direct assignment or the <code>.replace_with()</code> method.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;p&gt;Existing text&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the existing paragraph</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>new_p <span class="op">=</span> soup.new_tag(<span class="st">"p"</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>new_p.string <span class="op">=</span> <span class="st">"This is the replacement text."</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>old_p <span class="op">=</span> soup.find(<span class="st">'p'</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>old_p.replace_with(new_p)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup)</span></code></pre></div>
<h3 id="removing-elements">Removing elements</h3>
<p>Elements can be removed using the <code>.extract()</code> method or the <code>del</code> keyword (for deleting from a list of elements). <code>.extract()</code> removes the element from the tree but returns it, allowing you to reuse or further modify it.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;p&gt;Text 1&lt;/p&gt;&lt;p&gt;Text 2&lt;/p&gt;&lt;p&gt;Text 3&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the second paragraph</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>second_p <span class="op">=</span> soup.find_all(<span class="st">'p'</span>)[<span class="dv">1</span>]  <span class="co">#Find the second paragraph</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>second_p.extract()</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Remove all paragraphs using a list comprehension and del:</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>paragraphs <span class="op">=</span> soup.find_all(<span class="st">'p'</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> paragraphs:</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    p.decompose() <span class="co">#decompose removes the element completely.</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup)</span></code></pre></div>
<h3 id="modifying-attributes">Modifying attributes</h3>
<p>Attributes of an element can be modified by direct assignment.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;a href='old_link.html'&gt;Link&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>link <span class="op">=</span> soup.find(<span class="st">'a'</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>link[<span class="st">'href'</span>] <span class="op">=</span> <span class="st">'new_link.html'</span>  <span class="co"># Modify the 'href' attribute</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup)</span></code></pre></div>
<h3 id="modifying-text-content">Modifying text content</h3>
<p>The text content of an element can be modified by assigning a new string to its <code>.string</code> attribute.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;p&gt;Old text&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> soup.find(<span class="st">'p'</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>p.string <span class="op">=</span> <span class="st">"New text"</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup)</span></code></pre></div>
<p>Remember that these modifications alter the Beautiful Soup object’s representation of the HTML; they don’t directly change the underlying string or file. If you need to save the changes, you would need to write the modified <code>soup</code> object back to a file or string using <code>soup.prettify()</code> or <code>str(soup)</code>.</p>
<h2 id="outputting-data">Outputting Data</h2>
<p>After parsing and manipulating an HTML or XML document with Beautiful Soup, you’ll likely want to output the results. Beautiful Soup provides several ways to do this, allowing you to customize the output format and content.</p>
<h3 id="outputting-to-a-string">Outputting to a String</h3>
<p>The simplest way to obtain the modified or parsed HTML as a string is by directly converting the <code>BeautifulSoup</code> object to a string using <code>str()</code>. This produces a compact representation of the HTML.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;Paragraph&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>html_string <span class="op">=</span> <span class="bu">str</span>(soup)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(html_string)</span></code></pre></div>
<h3 id="outputting-to-a-file">Outputting to a File</h3>
<p>To save the parsed HTML or XML to a file, you can use Python’s built-in file I/O operations. Open a file in write mode (<code>'w'</code>) and write the <code>BeautifulSoup</code> object to it.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;Paragraph&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"output.html"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="bu">str</span>(soup))  <span class="co">#Writes compact HTML</span></span></code></pre></div>
<h3 id="pretty-printing">Pretty Printing</h3>
<p>For more readable output, especially when dealing with complex HTML structures, use the <code>.prettify()</code> method. This method formats the HTML with indentation and newlines, making it much easier to inspect visually.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;Paragraph&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>pretty_html <span class="op">=</span> soup.prettify()</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pretty_html)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"pretty_output.html"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    f.write(soup.prettify()) <span class="co">#Writes pretty printed HTML to file</span></span></code></pre></div>
<h3 id="customizing-output">Customizing Output</h3>
<p>For more advanced control over the output, you can traverse the parse tree and selectively extract and format specific elements. You might use string formatting, template engines, or other techniques to create custom output that meets your specific needs.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">"&lt;html&gt;&lt;body&gt;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;Paragraph with &lt;strong&gt;bold&lt;/strong&gt; text&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;"</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">"html.parser')</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="er">title = soup.h1.text</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>paragraph <span class="op">=</span> soup.p.text</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>custom_output <span class="op">=</span> <span class="ss">f"&lt;h1&gt;</span><span class="sc">{</span>title<span class="sc">}</span><span class="ss">&lt;/h1&gt;&lt;p&gt;</span><span class="sc">{</span>paragraph<span class="sc">}</span><span class="ss">&lt;/p&gt;"</span> <span class="co">#String formatting example</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(custom_output)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Example for more complex custom output using a loop</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>all_paragraphs <span class="op">=</span> soup.find_all(<span class="st">'p'</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>custom_output_2 <span class="op">=</span> <span class="st">"&lt;ul&gt;"</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> all_paragraphs:</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    custom_output_2 <span class="op">+=</span> <span class="ss">f"&lt;li&gt;</span><span class="sc">{</span>p<span class="sc">.</span>text<span class="sc">}</span><span class="ss">&lt;/li&gt;"</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>custom_output_2 <span class="op">+=</span> <span class="st">"&lt;/ul&gt;"</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(custom_output_2)</span></code></pre></div>
<p>This demonstrates generating custom HTML fragments by programmatically assembling strings based on your data extraction. This gives maximum flexibility for output control. Remember to handle potential errors like missing elements gracefully in production code.</p>
<h2 id="handling-different-html-structures">Handling Different HTML Structures</h2>
<p>Real-world HTML and XML documents often deviate from perfectly formed standards. Beautiful Soup provides mechanisms to handle these inconsistencies gracefully and efficiently.</p>
<h3 id="dealing-with-malformed-html">Dealing with Malformed HTML</h3>
<p>Many websites produce HTML that’s not perfectly valid according to the HTML specification. This malformed HTML can cause parsing errors with stricter parsers. Beautiful Soup’s flexibility shines here. The <code>html5lib</code> parser is particularly well-suited for handling malformed HTML, striving to create a parse tree even from significantly flawed input.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>malformed_html <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;h1&gt;My Title&lt;/h1&gt;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p&gt;Some text&lt;br&gt;another line&lt;/p&gt;</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;div&gt;</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;p&gt;Nested paragraph&lt;/p&gt;  &lt;!-- Missing closing tag --&gt;</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/div&gt;</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Using html5lib parser, which is more forgiving</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(malformed_html, <span class="st">'html5lib'</span>)  </span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Process the soup object as normal, even with the malformed input.</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>title <span class="op">=</span> soup.h1.text</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(title)</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>paragraphs <span class="op">=</span> soup.find_all(<span class="st">'p'</span>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> paragraphs:</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(p.text)</span></code></pre></div>
<p>Even with the missing closing tag for the <code>&lt;div&gt;</code>, <code>html5lib</code> creates a usable parse tree. However, note that the structure might differ from what you would expect with perfectly formed HTML.</p>
<h3 id="working-with-xml">Working with XML</h3>
<p>While primarily designed for HTML, Beautiful Soup can also parse XML documents. The process is largely the same, but it is generally recommended to use a parser like <code>lxml</code> which is optimized for XML processing for performance reasons.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>xml_data <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;bookstore&gt;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;book category="cooking"&gt;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;title lang="en"&gt;Everyday Italian&lt;/title&gt;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;author&gt;Giada De Laurentiis&lt;/author&gt;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;year&gt;2005&lt;/year&gt;</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;/book&gt;</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;book category="children"&gt;</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;title lang="en"&gt;Harry Potter&lt;/title&gt;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;author&gt;J K. Rowling&lt;/author&gt;</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;year&gt;2005&lt;/year&gt;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;/book&gt;</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/bookstore&gt;</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(xml_data, <span class="st">'xml'</span>) <span class="co">#Specify 'xml' parser</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>books <span class="op">=</span> soup.find_all(<span class="st">'book'</span>)</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> book <span class="kw">in</span> books:</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> book.title.text</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    author <span class="op">=</span> book.author.text</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Title: </span><span class="sc">{</span>title<span class="sc">}</span><span class="ss">, Author: </span><span class="sc">{</span>author<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>The key difference here is specifying the <code>"xml"</code> parser; otherwise, Beautiful Soup might incorrectly interpret the XML structure as HTML.</p>
<h3 id="handling-encoding-issues">Handling Encoding Issues</h3>
<p>Encoding issues can lead to errors when parsing HTML or XML files. Beautiful Soup itself doesn’t directly handle encoding; that’s the responsibility of the underlying parser and the way you open the file. If you encounter UnicodeDecodeErrors, ensure you specify the correct encoding when opening the file.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Correctly specifying encoding when reading from a file</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"my_file.html"</span>, <span class="st">"r"</span>, encoding<span class="op">=</span><span class="st">"utf-8"</span>) <span class="im">as</span> f: <span class="co">#Specify UTF-8 or another appropriate encoding</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    html <span class="op">=</span> f.read()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Process the soup object...</span></span></code></pre></div>
<p>If you’re unsure of the file’s encoding, you might need to use tools like <code>chardet</code> to detect it before parsing. Always check the file’s meta information or the server’s HTTP headers (if fetching from a website) to identify the appropriate encoding. Using an incorrect encoding will lead to garbled or missing characters in your parsed data.</p>
<h2 id="advanced-techniques">Advanced Techniques</h2>
<p>This section covers advanced usage scenarios and best practices for leveraging Beautiful Soup effectively in your projects.</p>
<h3 id="using-beautiful-soup-with-other-libraries">Using Beautiful Soup with other libraries</h3>
<p>Beautiful Soup excels as a core component in larger data processing pipelines. It often works seamlessly with other libraries:</p>
<ul>
<li><strong><code>requests</code>:</strong> For fetching HTML content from websites. <code>requests</code> handles HTTP requests, and Beautiful Soup parses the resulting HTML.</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://www.example.com"</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>response.raise_for_status() <span class="co"># Raise HTTPError for bad responses (4xx or 5xx)</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.content, <span class="st">'html.parser'</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Process the soup object...</span></span></code></pre></div>
<ul>
<li><p><strong><code>selenium</code>:</strong> For handling dynamic websites that rely on JavaScript. Selenium interacts with the browser, rendering the page, and then Beautiful Soup parses the rendered HTML.</p></li>
<li><p><strong><code>scrapy</code>:</strong> A powerful web scraping framework that integrates well with Beautiful Soup for parsing the extracted HTML content within its pipeline.</p></li>
<li><p><strong><code>pandas</code>:</strong> For data analysis and manipulation. Beautiful Soup extracts data from HTML, which can then be structured and analyzed using pandas DataFrames.</p></li>
</ul>
<h3 id="handling-large-files-efficiently">Handling large files efficiently</h3>
<p>Parsing extremely large HTML or XML files directly can consume significant memory. For such files, consider these strategies:</p>
<ul>
<li><p><strong>Incremental Parsing:</strong> Don’t load the entire file at once. Instead, process the file chunk by chunk, potentially using iterators and generators to process data in smaller, manageable parts. Beautiful Soup doesn’t directly support this; you’d need to manage the file reading and processing yourself.</p></li>
<li><p><strong>Specialized Libraries:</strong> For extremely large files or specific XML formats, explore libraries optimized for handling large datasets, which may provide more efficient parsing methods than Beautiful Soup alone.</p></li>
<li><p><strong>Data Sampling:</strong> If the goal is statistical analysis rather than a complete extraction, consider sampling parts of the large file to get a representative subset, making the processing significantly faster.</p></li>
</ul>
<h3 id="best-practices-for-error-handling">Best practices for error handling</h3>
<p>Robust applications anticipate and handle potential errors gracefully. Consider these strategies:</p>
<ul>
<li><p><strong><code>try...except</code> blocks:</strong> Wrap parsing and extraction operations in <code>try...except</code> blocks to catch exceptions such as <code>FileNotFoundError</code>, <code>HTTPError</code>, or <code>requests.exceptions.RequestException</code>.</p></li>
<li><p><strong>Input Validation:</strong> Check the validity and type of input data before processing it with Beautiful Soup.</p></li>
<li><p><strong>Graceful Degradation:</strong> Design your code to gracefully handle situations where elements are missing or data is malformed. Use conditional checks to prevent exceptions from crashing your application.</p></li>
<li><p><strong>Logging:</strong> Log errors and exceptions to a file for debugging and monitoring.</p></li>
</ul>
<h3 id="performance-optimization">Performance optimization</h3>
<p>For improved performance, consider these points:</p>
<ul>
<li><p><strong>Parser Selection:</strong> <code>lxml</code> generally provides faster parsing than <code>html.parser</code> or <code>html5lib</code>. Use <code>lxml</code> whenever possible, especially for performance-critical applications, after installing it (<code>pip install lxml</code>).</p></li>
<li><p><strong>Targeted Searches:</strong> Use precise CSS selectors or <code>find()</code>/<code>find_all()</code> with specific criteria to avoid unnecessary traversal of the entire parse tree.</p></li>
<li><p><strong>Avoid Unnecessary Operations:</strong> Don’t repeatedly access the same elements or perform redundant operations within loops. Cache data when possible.</p></li>
<li><p><strong>Profiling:</strong> Use profiling tools to identify performance bottlenecks in your code. This helps pinpoint areas that require optimization.</p></li>
</ul>
<p>Remember to balance performance optimizations with code readability and maintainability. Premature optimization can lead to overly complex and difficult-to-understand code. Focus on addressing performance bottlenecks after you’ve established a functional and well-structured application.</p>
<h2 id="appendix">Appendix</h2>
<p>This appendix provides supplementary information for developers working with Beautiful Soup.</p>
<h3 id="list-of-all-methods">List of all methods</h3>
<p>A comprehensive list of all Beautiful Soup methods and attributes is beyond the scope of this developer manual and is best found in the official Beautiful Soup documentation. The documentation provides detailed explanations of each method, including parameters and return values. Always refer to the official documentation for the most up-to-date and complete information. You can find it at <a href="https://beautiful-soup-4.readthedocs.io/en/latest/">https://beautiful-soup-4.readthedocs.io/en/latest/</a>. The documentation includes detailed API reference sections, covering all methods available for <code>BeautifulSoup</code> objects, <code>Tag</code> objects, <code>NavigableString</code> objects, and other related classes.</p>
<h3 id="common-errors-and-troubleshooting">Common Errors and Troubleshooting</h3>
<p>This section highlights common issues encountered when using Beautiful Soup and offers solutions.</p>
<ul>
<li><p><strong><code>UnicodeDecodeError</code>:</strong> This error typically arises from incorrect encoding handling. Ensure you specify the correct encoding (<code>utf-8</code>, <code>latin-1</code>, etc.) when opening files or making HTTP requests.</p></li>
<li><p><strong><code>AttributeError</code>:</strong> This error happens if you try to access an attribute or method that doesn’t exist on a particular tag or object. Double-check the HTML structure and the names of attributes/methods you are using. Use <code>print(element)</code> to inspect the tag before accessing its attributes to understand its structure.</p></li>
<li><p><strong>Parser Errors:</strong> Malformed HTML can lead to parsing errors. Try using the <code>html5lib</code> parser, which is more tolerant to errors, or use a different parser like <code>lxml</code>.</p></li>
<li><p><strong>Empty Results:</strong> If <code>find()</code> or <code>find_all()</code> return nothing, your search criteria might be incorrect. Check the HTML structure and refine your search using more precise selectors or attributes.</p></li>
<li><p><strong>Unexpected Results:</strong> Incorrect use of methods such as <code>.next_sibling</code>, <code>.previous_sibling</code>, <code>.find_next()</code>, <code>.find_previous()</code>, etc. can lead to unexpected results. Carefully review the documentation for these methods to ensure you are using them correctly.</p></li>
</ul>
<p>For more specific errors, providing the error message and relevant code snippet will greatly aid in troubleshooting. Consult the Beautiful Soup documentation and online resources (Stack Overflow, etc.) for additional assistance.</p>
<h3 id="further-reading-and-resources">Further Reading and Resources</h3>
<p>To expand your knowledge and skills in using Beautiful Soup, explore these resources:</p>
<ul>
<li><p><strong>Official Beautiful Soup Documentation:</strong> The primary source for information on Beautiful Soup’s features and API. It’s the most comprehensive and authoritative resource.</p></li>
<li><p><strong>Online Tutorials and Articles:</strong> Numerous websites and blogs offer tutorials and articles on Beautiful Soup. Searching for “Beautiful Soup tutorial” or “Beautiful Soup web scraping” will yield many helpful resources.</p></li>
<li><p><strong>Stack Overflow:</strong> A valuable platform for asking questions and finding solutions to common problems. Searching for relevant Beautiful Soup error messages or specific usage questions often leads to helpful answers and solutions.</p></li>
<li><p><strong>Web Scraping Books and Courses:</strong> Many books and online courses cover web scraping techniques, often incorporating Beautiful Soup as a core library. These can provide a broader understanding of web scraping practices beyond just the library’s use.</p></li>
</ul>
<p>By exploring these resources, you can enhance your expertise in using Beautiful Soup for various data extraction and manipulation tasks. Remember to always respect the <code>robots.txt</code> file and terms of service of websites when scraping data.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>