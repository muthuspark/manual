<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>datetime - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MXDPF6L5TL"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MXDPF6L5TL', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta property="og:title" content="datetime - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">datetime - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-the-datetime-module" id="toc-what-is-the-datetime-module">What is the datetime module?</a></li>
  <li><a href="#why-use-the-datetime-module" id="toc-why-use-the-datetime-module">Why use the datetime module?</a></li>
  <li><a href="#key-concepts-dates-times-timezones" id="toc-key-concepts-dates-times-timezones">Key Concepts: Dates, Times, Timezones</a></li>
  <li><a href="#setting-up-your-environment." id="toc-setting-up-your-environment.">Setting up your environment.</a></li>
  <li><a href="#working-with-dates" id="toc-working-with-dates">Working with Dates</a>
  <ul>
  <li><a href="#creating-date-objects" id="toc-creating-date-objects">Creating date objects</a></li>
  <li><a href="#date-attributes-year-month-day" id="toc-date-attributes-year-month-day">Date attributes (year, month, day)</a></li>
  <li><a href="#date-formatting-and-parsing-strftime-strptime" id="toc-date-formatting-and-parsing-strftime-strptime">Date Formatting and Parsing (strftime, strptime)</a></li>
  <li><a href="#comparing-and-manipulating-dates" id="toc-comparing-and-manipulating-dates">Comparing and manipulating dates</a></li>
  <li><a href="#calculating-date-differences" id="toc-calculating-date-differences">Calculating date differences</a></li>
  <li><a href="#handling-leap-years" id="toc-handling-leap-years">Handling leap years</a></li>
  </ul></li>
  <li><a href="#working-with-times" id="toc-working-with-times">Working with Times</a>
  <ul>
  <li><a href="#creating-time-objects" id="toc-creating-time-objects">Creating time objects</a></li>
  <li><a href="#time-attributes-hour-minute-second-microsecond" id="toc-time-attributes-hour-minute-second-microsecond">Time attributes (hour, minute, second, microsecond)</a></li>
  <li><a href="#time-formatting-and-parsing-strftime-strptime" id="toc-time-formatting-and-parsing-strftime-strptime">Time Formatting and Parsing (strftime, strptime)</a></li>
  <li><a href="#comparing-and-manipulating-times" id="toc-comparing-and-manipulating-times">Comparing and manipulating times</a></li>
  <li><a href="#calculating-time-differences" id="toc-calculating-time-differences">Calculating time differences</a></li>
  <li><a href="#timezones-basic-concepts" id="toc-timezones-basic-concepts">Timezones (basic concepts)</a></li>
  </ul></li>
  <li><a href="#working-with-datetime-objects" id="toc-working-with-datetime-objects">Working with Datetime Objects</a>
  <ul>
  <li><a href="#creating-datetime-objects" id="toc-creating-datetime-objects">Creating datetime objects</a></li>
  <li><a href="#combining-dates-and-times" id="toc-combining-dates-and-times">Combining dates and times</a></li>
  <li><a href="#datetime-attributes" id="toc-datetime-attributes">Datetime attributes</a></li>
  <li><a href="#datetime-formatting-and-parsing" id="toc-datetime-formatting-and-parsing">Datetime Formatting and Parsing</a></li>
  <li><a href="#comparing-and-manipulating-datetime-objects" id="toc-comparing-and-manipulating-datetime-objects">Comparing and manipulating datetime objects</a></li>
  <li><a href="#calculating-datetime-differences" id="toc-calculating-datetime-differences">Calculating datetime differences</a></li>
  <li><a href="#time-deltas" id="toc-time-deltas">Time deltas</a></li>
  </ul></li>
  <li><a href="#working-with-time-zones" id="toc-working-with-time-zones">Working with Time Zones</a>
  <ul>
  <li><a href="#introduction-to-time-zones" id="toc-introduction-to-time-zones">Introduction to time zones</a></li>
  <li><a href="#representing-time-zones-pytz" id="toc-representing-time-zones-pytz">Representing time zones (pytz)</a></li>
  <li><a href="#converting-between-time-zones" id="toc-converting-between-time-zones">Converting between time zones</a></li>
  <li><a href="#timezone-aware-and-naive-datetime-objects" id="toc-timezone-aware-and-naive-datetime-objects">Timezone aware and naive datetime objects</a></li>
  <li><a href="#common-timezone-issues-and-solutions" id="toc-common-timezone-issues-and-solutions">Common timezone issues and solutions</a></li>
  </ul></li>
  <li><a href="#advanced-techniques" id="toc-advanced-techniques">Advanced Techniques</a>
  <ul>
  <li><a href="#using-the-timedelta-object" id="toc-using-the-timedelta-object">Using the <code>timedelta</code> object</a></li>
  <li><a href="#working-with-timestamps" id="toc-working-with-timestamps">Working with timestamps</a></li>
  <li><a href="#formatting-and-parsing-with-custom-formats" id="toc-formatting-and-parsing-with-custom-formats">Formatting and parsing with custom formats</a></li>
  <li><a href="#locale-aware-formatting" id="toc-locale-aware-formatting">Locale-aware formatting</a></li>
  <li><a href="#working-with-different-calendar-systems" id="toc-working-with-different-calendar-systems">Working with different calendar systems</a></li>
  </ul></li>
  <li><a href="#best-practices-and-common-pitfalls" id="toc-best-practices-and-common-pitfalls">Best Practices and Common Pitfalls</a>
  <ul>
  <li><a href="#avoiding-timezone-related-errors" id="toc-avoiding-timezone-related-errors">Avoiding timezone related errors</a></li>
  <li><a href="#efficient-date-and-time-calculations" id="toc-efficient-date-and-time-calculations">Efficient date and time calculations</a></li>
  <li><a href="#choosing-appropriate-data-structures" id="toc-choosing-appropriate-data-structures">Choosing appropriate data structures</a></li>
  <li><a href="#debugging-common-datetime-issues" id="toc-debugging-common-datetime-issues">Debugging common datetime issues</a></li>
  </ul></li>
  <li><a href="#appendix-related-modules" id="toc-appendix-related-modules">Appendix: Related Modules</a>
  <ul>
  <li><a href="#calendar-module" id="toc-calendar-module">calendar module</a></li>
  <li><a href="#time-module" id="toc-time-module">time module</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-the-datetime-module">What is the datetime module?</h3>
<p>Python’s <code>datetime</code> module is a powerful and versatile built-in library providing classes for manipulating dates and times. It offers a range of functionalities for creating, comparing, modifying, and formatting date and time objects. This allows developers to handle various time-related tasks, from simple date arithmetic to complex calendar calculations and time zone conversions. The module’s core functionality revolves around the <code>date</code>, <code>time</code>, <code>datetime</code>, <code>timedelta</code>, and <code>tzinfo</code> classes, each designed to represent specific aspects of date and time information.</p>
<h3 id="why-use-the-datetime-module">Why use the datetime module?</h3>
<p>Using the <code>datetime</code> module offers several significant advantages:</p>
<ul>
<li><p><strong>Readability and Maintainability:</strong> It provides a structured and intuitive way to work with dates and times, making your code cleaner and easier to understand. This is particularly crucial when dealing with complex date and time logic.</p></li>
<li><p><strong>Accuracy and Reliability:</strong> The module handles many complexities of date and time calculations automatically (e.g., leap years, daylight saving time), minimizing errors that might occur with manual calculations.</p></li>
<li><p><strong>Portability:</strong> The <code>datetime</code> module is part of Python’s standard library, so you don’t need to install external dependencies; your code will work consistently across different platforms.</p></li>
<li><p><strong>Extensive Functionality:</strong> Beyond basic date and time manipulation, the module offers support for time zones, formatting options, and specialized functions for tasks such as calculating durations or parsing various date and time strings.</p></li>
</ul>
<h3 id="key-concepts-dates-times-timezones">Key Concepts: Dates, Times, Timezones</h3>
<ul>
<li><p><strong><code>date</code> objects:</strong> Represent a date (year, month, day), without time information.</p></li>
<li><p><strong><code>time</code> objects:</strong> Represent a time (hour, minute, second, microsecond), without date information.</p></li>
<li><p><strong><code>datetime</code> objects:</strong> Combine both date and time information into a single object.</p></li>
<li><p><strong><code>timedelta</code> objects:</strong> Represent durations, enabling calculations like adding or subtracting time from dates or times.</p></li>
<li><p><strong><code>tzinfo</code> objects:</strong> Provide timezone information, essential for handling dates and times across different time zones. Python’s <code>datetime</code> module doesn’t directly include all timezone data; you’ll typically need a third-party library like <code>pytz</code> for comprehensive timezone support.</p></li>
</ul>
<h3 id="setting-up-your-environment.">Setting up your environment.</h3>
<p>To use the <code>datetime</code> module, you don’t need any special setup. It’s included in Python’s standard library, meaning it’s readily available once you have Python installed. No additional packages or installations are required to start using the core functionalities of <code>datetime</code>. For advanced features like timezone handling, you may need to install a library such as <code>pytz</code> using pip: <code>pip install pytz</code>. Remember to consult the documentation for any third-party libraries you decide to integrate with <code>datetime</code>.</p>
<h2 id="working-with-dates">Working with Dates</h2>
<h3 id="creating-date-objects">Creating date objects</h3>
<p><code>date</code> objects are created using the <code>date()</code> constructor from the <code>datetime</code> module. The constructor accepts year, month, and day as arguments.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a date object for January 1st, 2024</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> date(<span class="dv">2024</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d)  <span class="co"># Output: 2024-01-01</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create today's date</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>today <span class="op">=</span> date.today()</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(today) <span class="co"># Output: (Today's date)</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Using the `fromisoformat()` method for parsing ISO formatted dates:</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>iso_date_string <span class="op">=</span> <span class="st">"2024-03-15"</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> date.fromisoformat(iso_date_string)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d2) <span class="co"># Output: 2024-03-15</span></span></code></pre></div>
<p>Invalid date components (e.g., February 30th) will raise a <code>ValueError</code>.</p>
<h3 id="date-attributes-year-month-day">Date attributes (year, month, day)</h3>
<p>Once a <code>date</code> object is created, you can access its components using attributes:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> date(<span class="dv">2024</span>, <span class="dv">5</span>, <span class="dv">10</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d.year)  <span class="co"># Output: 2024</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d.month) <span class="co"># Output: 5</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d.day)   <span class="co"># Output: 10</span></span></code></pre></div>
<h3 id="date-formatting-and-parsing-strftime-strptime">Date Formatting and Parsing (strftime, strptime)</h3>
<p>The <code>strftime()</code> method formats a <code>date</code> object into a string representation, while <code>strptime()</code> parses a string into a <code>date</code> object. <code>strftime()</code> uses format codes (e.g., <code>%Y</code> for year, <code>%m</code> for month, <code>%d</code> for day).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> date(<span class="dv">2024</span>, <span class="dv">12</span>, <span class="dv">25</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting a date</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>formatted_date <span class="op">=</span> d.strftime(<span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)  <span class="co"># Output: 2024-12-25</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formatted_date)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>formatted_date_2 <span class="op">=</span> d.strftime(<span class="st">"%B </span><span class="sc">%d</span><span class="st">, %Y"</span>) <span class="co"># Output: December 25, 2024</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formatted_date_2)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Parsing a date string</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>date_string <span class="op">=</span> <span class="st">"2023-10-26"</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>parsed_date <span class="op">=</span> date.strptime(date_string, <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parsed_date)  <span class="co"># Output: 2023-10-26</span></span></code></pre></div>
<p>Refer to the Python documentation for a complete list of <code>strftime()</code> format codes. Incorrect format codes in <code>strptime()</code> will lead to a <code>ValueError</code>.</p>
<h3 id="comparing-and-manipulating-dates">Comparing and manipulating dates</h3>
<p>Dates can be compared using standard comparison operators:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>d1 <span class="op">=</span> date(<span class="dv">2023</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> date(<span class="dv">2024</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1 <span class="op">&lt;</span> d2)  <span class="co"># Output: True</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1 <span class="op">==</span> d2) <span class="co"># Output: False</span></span></code></pre></div>
<p>There’s no direct way to <em>manipulate</em> a <code>date</code> object in-place. Instead, you create a <em>new</em> <code>date</code> object by adding or subtracting <code>timedelta</code> objects (explained in the next section).</p>
<h3 id="calculating-date-differences">Calculating date differences</h3>
<p><code>timedelta</code> objects represent time differences. Subtracting two <code>date</code> objects results in a <code>timedelta</code> representing the difference.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date, timedelta</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>d1 <span class="op">=</span> date(<span class="dv">2024</span>, <span class="dv">3</span>, <span class="dv">15</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> date(<span class="dv">2024</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>diff <span class="op">=</span> d2 <span class="op">-</span> d1</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(diff)  <span class="co"># Output: 21 days, 0:00:00</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(diff.days) <span class="co"># Output: 21</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Adding a timedelta to a date</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>future_date <span class="op">=</span> d1 <span class="op">+</span> timedelta(days<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(future_date) <span class="co"># Output: 2024-04-14</span></span></code></pre></div>
<h3 id="handling-leap-years">Handling leap years</h3>
<p>The <code>datetime</code> module automatically handles leap years correctly. You don’t need to write special code to account for them. The <code>date</code> class’s validation will prevent you from creating invalid dates, even in leap years.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This is valid because 2024 is a leap year</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> date(<span class="dv">2024</span>, <span class="dv">2</span>, <span class="dv">29</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d) <span class="co">#Output: 2024-02-29</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#This will raise a ValueError because 2023 is not a leap year</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#d = date(2023, 2, 29) </span></span></code></pre></div>
<h2 id="working-with-times">Working with Times</h2>
<h3 id="creating-time-objects">Creating time objects</h3>
<p><code>time</code> objects represent a time of day, independent of a specific date. They’re created using the <code>time()</code> constructor.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> time</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a time object representing 10:30:00 AM</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> time(<span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">0</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(t)  <span class="co"># Output: 10:30:00</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#With microseconds:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>t2 <span class="op">=</span> time(<span class="dv">14</span>, <span class="dv">45</span>, <span class="dv">30</span>, <span class="dv">123456</span>) <span class="co">#14:45:30.123456</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(t2)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Midnight</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>midnight <span class="op">=</span> time() <span class="co">#Defaults to 00:00:00</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(midnight) <span class="co"># Output: 00:00:00</span></span></code></pre></div>
<p>Arguments for <code>hour</code>, <code>minute</code>, and <code>second</code> must be within their valid ranges (0-23, 0-59, 0-59 respectively). Microseconds must be between 0 and 999999. Invalid values will raise a <code>ValueError</code>.</p>
<h3 id="time-attributes-hour-minute-second-microsecond">Time attributes (hour, minute, second, microsecond)</h3>
<p>Like <code>date</code> objects, you can access the components of a <code>time</code> object using attributes:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> time(<span class="dv">14</span>, <span class="dv">22</span>, <span class="dv">55</span>, <span class="dv">123000</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(t.hour)       <span class="co"># Output: 14</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(t.minute)     <span class="co"># Output: 22</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(t.second)     <span class="co"># Output: 55</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(t.microsecond) <span class="co"># Output: 123000</span></span></code></pre></div>
<h3 id="time-formatting-and-parsing-strftime-strptime">Time Formatting and Parsing (strftime, strptime)</h3>
<p>Similar to <code>date</code> objects, <code>strftime()</code> and <code>strptime()</code> are used for formatting and parsing <code>time</code> objects. However, you’ll use different format codes specific to time components (e.g., <code>%H</code> for hour (24-hour clock), <code>%M</code> for minute, <code>%S</code> for second, <code>%f</code> for microseconds).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> time</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> time(<span class="dv">15</span>, <span class="dv">45</span>, <span class="dv">30</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting a time</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>formatted_time <span class="op">=</span> t.strftime(<span class="st">"%H:%M:%S"</span>)  <span class="co"># Output: 15:45:30</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formatted_time)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>formatted_time_12 <span class="op">=</span> t.strftime(<span class="st">"%I:%M:%S %p"</span>) <span class="co">#Output: 03:45:30 PM (12-hour clock)</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formatted_time_12)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Parsing a time string</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>time_string <span class="op">=</span> <span class="st">"22:10:00"</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>parsed_time <span class="op">=</span> time.strptime(time_string, <span class="st">"%H:%M:%S"</span>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parsed_time) <span class="co">#Output: time.struct_time(...) (a named tuple)</span></span></code></pre></div>
<h3 id="comparing-and-manipulating-times">Comparing and manipulating times</h3>
<p><code>time</code> objects can be compared using comparison operators (e.g., <code>&lt;</code>, <code>&gt;</code>, <code>==</code>). However, there’s no direct way to “add” or “subtract” from a time object. You’d usually work with <code>datetime</code> objects for operations involving adding time durations.</p>
<h3 id="calculating-time-differences">Calculating time differences</h3>
<p>Similar to <code>date</code> objects, you cannot directly subtract <code>time</code> objects to get a <code>timedelta</code>. You’ll need to use <code>datetime</code> objects for time difference calculations because <code>timedelta</code> requires a date component for calculations involving dates and times.</p>
<h3 id="timezones-basic-concepts">Timezones (basic concepts)</h3>
<p>The standard <code>time</code> object doesn’t inherently handle time zones. A naive <code>time</code> object represents a time of day without timezone information. To work with time zones, you need to use the <code>datetime</code> class combined with a <code>tzinfo</code> object (often provided by a third-party library like <code>pytz</code>). This is crucial for accurate calculations and comparisons when dealing with times across different geographical locations. The <code>datetime</code> module itself doesn’t provide built-in timezone data. This aspect is covered more thoroughly in the section on <code>datetime</code> objects and timezones.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Illustrates the limitation of naive time objects:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>t1 <span class="op">=</span> time(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>) <span class="co">#10am in unspecified timezone</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>t2 <span class="op">=</span> time(<span class="dv">11</span>, <span class="dv">0</span>,<span class="dv">0</span>) <span class="co">#11am in unspecified timezone</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#The difference is only in terms of local time, lacks timezone awareness.</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(t2 <span class="op">&gt;</span> t1) <span class="co">#True, but this comparison doesn't consider timezones</span></span></code></pre></div>
<h2 id="working-with-datetime-objects">Working with Datetime Objects</h2>
<h3 id="creating-datetime-objects">Creating datetime objects</h3>
<p><code>datetime</code> objects combine both date and time information. They are created using the <code>datetime()</code> constructor.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a datetime object for a specific date and time</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">14</span>, <span class="dv">30</span>, <span class="dv">0</span>) <span class="co">#Year, month, day, hour, minute, second</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt)  <span class="co"># Output: 2024-03-10 14:30:00</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Using `now()` to get the current datetime</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>now <span class="op">=</span> datetime.now()</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(now) <span class="co">#Output: (Current datetime)</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Combine date and time objects (less efficient than using datetime directly):</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date, time</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> date(<span class="dv">2024</span>, <span class="dv">5</span>, <span class="dv">20</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> time(<span class="dv">16</span>, <span class="dv">30</span>, <span class="dv">0</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>dt_combined <span class="op">=</span> datetime.combine(d,t)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt_combined) <span class="co">#Output: 2024-05-20 16:30:00</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Using `fromisoformat()` for parsing ISO formatted datetime strings</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>iso_datetime_string <span class="op">=</span> <span class="st">"2024-06-12T18:45:00"</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>dt_from_iso <span class="op">=</span> datetime.fromisoformat(iso_datetime_string)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt_from_iso) <span class="co">#Output: 2024-06-12 18:45:00</span></span></code></pre></div>
<h3 id="combining-dates-and-times">Combining dates and times</h3>
<p>While you can create a <code>datetime</code> object from separate <code>date</code> and <code>time</code> objects using <code>datetime.combine()</code>, it’s generally more efficient and straightforward to create the <code>datetime</code> object directly with all components in the constructor.</p>
<h3 id="datetime-attributes">Datetime attributes</h3>
<p><code>datetime</code> objects have attributes to access their date and time components:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">30</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.year)      <span class="co"># Output: 2024</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.month)     <span class="co"># Output: 1</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.day)       <span class="co"># Output: 20</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.hour)      <span class="co"># Output: 10</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.minute)    <span class="co"># Output: 0</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.second)    <span class="co"># Output: 30</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.microsecond) <span class="co">#Output: 0</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.date())    <span class="co">#Output: 2024-01-20 (date object)</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.time())    <span class="co">#Output: 10:00:30 (time object)</span></span></code></pre></div>
<h3 id="datetime-formatting-and-parsing">Datetime Formatting and Parsing</h3>
<p><code>strftime()</code> and <code>strptime()</code> work similarly to <code>date</code> and <code>time</code> objects, combining format codes for both date and time components.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">10</span>, <span class="dv">26</span>, <span class="dv">18</span>, <span class="dv">50</span>, <span class="dv">0</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>formatted_datetime <span class="op">=</span> dt.strftime(<span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S"</span>)  <span class="co"># Output: 2024-10-26 18:50:00</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formatted_datetime)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>datetime_string <span class="op">=</span> <span class="st">"2023-11-15 09:30:15"</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>parsed_datetime <span class="op">=</span> datetime.strptime(datetime_string, <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S"</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parsed_datetime) <span class="co"># Output: 2023-11-15 09:30:15</span></span></code></pre></div>
<h3 id="comparing-and-manipulating-datetime-objects">Comparing and manipulating datetime objects</h3>
<p><code>datetime</code> objects can be compared using comparison operators. Arithmetic operations are performed using <code>timedelta</code> objects.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dt1 <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>dt2 <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt1 <span class="op">&lt;</span> dt2)  <span class="co"># Output: True</span></span></code></pre></div>
<h3 id="calculating-datetime-differences">Calculating datetime differences</h3>
<p>Subtracting two <code>datetime</code> objects yields a <code>timedelta</code> object.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, timedelta</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>dt1 <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>dt2 <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">2</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>diff <span class="op">=</span> dt2 <span class="op">-</span> dt1</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(diff)  <span class="co"># Output: 9 days, 5:00:00</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(diff.days) <span class="co">#Output: 9</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(diff.seconds) <span class="co">#Output: 18000 (5 hours in seconds)</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Adding a timedelta to a datetime</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>future_datetime <span class="op">=</span> dt1 <span class="op">+</span> timedelta(days<span class="op">=</span><span class="dv">7</span>, hours<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(future_datetime) <span class="co">#Output: 2024-02-08 13:00:00</span></span></code></pre></div>
<h3 id="time-deltas">Time deltas</h3>
<p><code>timedelta</code> objects represent differences between dates or times. They can be created by subtracting two <code>datetime</code> objects or by specifying days, seconds, microseconds, etc. They’re crucial for performing date and time arithmetic. See the examples in the previous section for <code>timedelta</code> usage.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> timedelta</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>td1 <span class="op">=</span> timedelta(days<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>td2 <span class="op">=</span> timedelta(seconds<span class="op">=</span><span class="dv">3600</span>) <span class="co">#1 hour</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>td3 <span class="op">=</span> td1 <span class="op">+</span> td2 <span class="co">#timedelta objects can be added</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(td3) <span class="co">#Output: 5 days, 1:00:00</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(td3.total_seconds()) <span class="co">#Output: 432000.0 (5 days + 1 hour in seconds)</span></span></code></pre></div>
<h2 id="working-with-time-zones">Working with Time Zones</h2>
<h3 id="introduction-to-time-zones">Introduction to time zones</h3>
<p>Time zones are geographical regions that observe a standard time. They’re crucial when working with dates and times because different time zones have different offsets from Coordinated Universal Time (UTC). Ignoring time zones can lead to significant errors in applications that handle data from multiple locations or across different time zones. Python’s standard <code>datetime</code> module provides basic support for time zones, but for comprehensive handling, you typically use a third-party library like <code>pytz</code>.</p>
<h3 id="representing-time-zones-pytz">Representing time zones (pytz)</h3>
<p>The <code>pytz</code> library provides a robust way to work with time zones. It offers access to a large database of time zone information, including historical data for daylight saving time (DST) transitions.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytz</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get a timezone object from pytz</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>eastern <span class="op">=</span> pytz.timezone(<span class="st">'US/Eastern'</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>pacific <span class="op">=</span> pytz.timezone(<span class="st">'US/Pacific'</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<h3 id="converting-between-time-zones">Converting between time zones</h3>
<p><code>pytz</code> allows you to convert between time zones using the <code>localize()</code> and <code>astimezone()</code> methods. <code>localize()</code> attaches timezone information to a naive datetime object, while <code>astimezone()</code> converts a timezone-aware datetime object to a different timezone.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytz</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>eastern <span class="op">=</span> pytz.timezone(<span class="st">'US/Eastern'</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>pacific <span class="op">=</span> pytz.timezone(<span class="st">'US/Pacific'</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a naive datetime object (no timezone information)</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>naive_dt <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Make it timezone-aware using localize()</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>eastern_dt <span class="op">=</span> eastern.localize(naive_dt)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(eastern_dt) <span class="co">#Output: 2024-03-10 10:00:00-05:00 (timezone info included)</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert to a different timezone</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>pacific_dt <span class="op">=</span> eastern_dt.astimezone(pacific)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pacific_dt)  <span class="co">#Output: 2024-03-10 07:00:00-08:00 (converted to Pacific time)</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Example demonstrating conversion with DST:</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>dt_summer <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">6</span>, <span class="dv">15</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>) <span class="co">#Daylight saving time in effect</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>eastern_dt_summer <span class="op">=</span> eastern.localize(dt_summer)</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>pacific_dt_summer <span class="op">=</span> eastern_dt_summer.astimezone(pacific)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(eastern_dt_summer)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pacific_dt_summer)</span></code></pre></div>
<h3 id="timezone-aware-and-naive-datetime-objects">Timezone aware and naive datetime objects</h3>
<ul>
<li><p><strong>Naive datetime objects:</strong> Don’t contain timezone information. They represent a time relative to a single, unspecified time zone. Avoid naive objects in production code when time zones are involved.</p></li>
<li><p><strong>Timezone-aware datetime objects:</strong> Include timezone information. They precisely represent a point in time relative to UTC, enabling correct conversions between time zones and handling DST transitions. Always prefer timezone-aware objects when working with time zones.</p></li>
</ul>
<h3 id="common-timezone-issues-and-solutions">Common timezone issues and solutions</h3>
<ul>
<li><p><strong>DST transitions:</strong> Handling DST transitions correctly is essential. <code>pytz</code> automatically accounts for these transitions when you convert between time zones.</p></li>
<li><p><strong>Mixing naive and aware objects:</strong> Avoid mixing naive and aware <code>datetime</code> objects in calculations. This can lead to incorrect results. Ensure all your <code>datetime</code> objects are timezone-aware if time zones are relevant.</p></li>
<li><p><strong>Ambiguous times:</strong> During the transition from DST to standard time (fall back), some times might appear twice. <code>pytz</code> handles this ambiguity, and in certain cases, you might need to explicitly indicate which instance of an ambiguous time you intend to use.</p></li>
<li><p><strong>Inconsistent timezone representations:</strong> Always use a standard format for representing timezones (e.g., IANA time zone names like ‘America/New_York’ with <code>pytz</code> rather than abbreviations like ‘EST’).</p></li>
</ul>
<h2 id="advanced-techniques">Advanced Techniques</h2>
<h3 id="using-the-timedelta-object">Using the <code>timedelta</code> object</h3>
<p>The <code>timedelta</code> object is fundamental for performing calculations involving durations. It allows you to represent differences between dates and times and to add or subtract time from <code>datetime</code> and <code>date</code> objects. Key functionalities include:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> timedelta, datetime</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create timedelta objects</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>td1 <span class="op">=</span> timedelta(days<span class="op">=</span><span class="dv">10</span>, hours<span class="op">=</span><span class="dv">5</span>, minutes<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>td2 <span class="op">=</span> timedelta(seconds<span class="op">=</span><span class="dv">3600</span>) <span class="co"># 1 hour</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Arithmetic operations</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>td3 <span class="op">=</span> td1 <span class="op">+</span> td2</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>td4 <span class="op">=</span> td1 <span class="op">-</span> td2</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(td3) <span class="co">#Output: 10 days, 6:30:00</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(td4) <span class="co">#Output: 10 days, 4:30:00</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing components</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(td1.days)      <span class="co"># Output: 10</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(td1.seconds)   <span class="co"># Output: 19800 (5 hours 30 minutes in seconds)</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(td1.total_seconds()) <span class="co"># Output: 898800.0 (total seconds)</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Using timedeltas with datetime objects</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>now <span class="op">=</span> datetime.now()</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>future <span class="op">=</span> now <span class="op">+</span> timedelta(weeks<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>past <span class="op">=</span> now <span class="op">-</span> timedelta(hours<span class="op">=</span><span class="dv">6</span>)</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(future)</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(past)</span></code></pre></div>
<h3 id="working-with-timestamps">Working with timestamps</h3>
<p>Timestamps represent the number of seconds since the epoch (January 1, 1970, 00:00:00 UTC). You can convert between <code>datetime</code> objects and timestamps using <code>datetime.timestamp()</code> and <code>datetime.fromtimestamp()</code>. Remember that <code>timestamp()</code> returns seconds <em>since the epoch in UTC</em>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, timezone</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the current timestamp</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>now <span class="op">=</span> datetime.now(timezone.utc) <span class="co">#important to specify timezone for accuracy</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>timestamp <span class="op">=</span> now.timestamp()</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(timestamp)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert a timestamp back to a datetime object</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>dt_from_timestamp <span class="op">=</span> datetime.fromtimestamp(timestamp, tz<span class="op">=</span>timezone.utc)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt_from_timestamp)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Example converting a timestamp from a different timezone</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytz</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>pacific <span class="op">=</span> pytz.timezone(<span class="st">'US/Pacific'</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>pacific_dt <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">14</span>, <span class="dv">0</span>, <span class="dv">0</span>, tzinfo<span class="op">=</span>pacific)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>pacific_timestamp <span class="op">=</span> pacific_dt.timestamp()</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pacific_timestamp) <span class="co">#Note: this will be relative to UTC</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>utc_dt_from_pacific <span class="op">=</span> datetime.fromtimestamp(pacific_timestamp, tz<span class="op">=</span>timezone.utc)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(utc_dt_from_pacific)</span></code></pre></div>
<h3 id="formatting-and-parsing-with-custom-formats">Formatting and parsing with custom formats</h3>
<p>Beyond the standard format codes, you can create custom format strings for <code>strftime()</code> and <code>strptime()</code> to handle more complex date and time representations.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">11</span>, <span class="dv">22</span>, <span class="dv">15</span>, <span class="dv">35</span>, <span class="dv">45</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>custom_format <span class="op">=</span> <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">T%H:%M:%S"</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>formatted_dt <span class="op">=</span> dt.strftime(custom_format) <span class="co">#Output: 2024-11-22T15:35:45</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formatted_dt)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>parsed_dt <span class="op">=</span> datetime.strptime(formatted_dt, custom_format)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(parsed_dt) <span class="co">#Output: 2024-11-22 15:35:45</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Another custom format</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>custom_format_2 <span class="op">=</span> <span class="st">"%A, %B </span><span class="sc">%d</span><span class="st">, %Y at %I:%M %p"</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>formatted_dt_2 <span class="op">=</span> dt.strftime(custom_format_2) <span class="co">#Output: Friday, November 22, 2024 at 03:35 PM</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formatted_dt_2)</span></code></pre></div>
<h3 id="locale-aware-formatting">Locale-aware formatting</h3>
<p>For localized date and time formatting, you can use the <code>locale</code> module to set the appropriate locale and then use <code>strftime()</code> (although this might not be entirely robust across all systems and locales). For more reliable internationalization, consider dedicated libraries for i18n/l10n.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> locale</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the locale (example: US English)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>locale.setlocale(locale.LC_ALL, <span class="st">'en_US.UTF-8'</span>) <span class="co">#Requires appropriate locale to be installed on the system</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">12</span>, <span class="dv">25</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>localized_date <span class="op">=</span> dt.strftime(<span class="st">"</span><span class="sc">%x</span><span class="st">"</span>) <span class="co"># Locale-specific date format</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(localized_date) <span class="co"># Output: might vary based on your system's locale settings</span></span></code></pre></div>
<h3 id="working-with-different-calendar-systems">Working with different calendar systems</h3>
<p>Python’s standard <code>datetime</code> module primarily works with the Gregorian calendar. For other calendar systems (e.g., Julian), you’ll likely need to use third-party libraries or implement custom logic for conversions. The <code>calendar</code> module provides some basic calendar-related functionality, but it does not handle other calendar systems directly.</p>
<h2 id="best-practices-and-common-pitfalls">Best Practices and Common Pitfalls</h2>
<h3 id="avoiding-timezone-related-errors">Avoiding timezone related errors</h3>
<ul>
<li><p><strong>Always use timezone-aware datetime objects:</strong> Avoid naive <code>datetime</code> objects whenever possible, especially in applications dealing with multiple time zones. Use <code>pytz</code> or a similar library to handle time zones correctly.</p></li>
<li><p><strong>Be consistent:</strong> Ensure that all your date and time data uses the same timezone representation. Avoid mixing naive and timezone-aware objects in calculations.</p></li>
<li><p><strong>Handle DST transitions carefully:</strong> Be aware of daylight saving time transitions and how they affect calculations. Libraries like <code>pytz</code> automatically handle these transitions, but you should understand their implications.</p></li>
<li><p><strong>Explicitly specify timezones:</strong> When creating <code>datetime</code> objects, always explicitly set the timezone using the appropriate timezone object (e.g., <code>pytz.timezone('America/New_York')</code>). Avoid relying on implicit system timezones.</p></li>
<li><p><strong>Validate input:</strong> Validate all date and time inputs to ensure they’re valid and correctly formatted before using them in calculations.</p></li>
<li><p><strong>Unit test timezone handling:</strong> Thoroughly unit test all parts of your code that handle time zones to ensure they work correctly across different time zones and DST transitions.</p></li>
</ul>
<h3 id="efficient-date-and-time-calculations">Efficient date and time calculations</h3>
<ul>
<li><p><strong>Use <code>timedelta</code> objects:</strong> For date and time arithmetic, use <code>timedelta</code> objects instead of manually calculating differences or adding durations.</p></li>
<li><p><strong>Avoid unnecessary conversions:</strong> Minimize conversions between different date and time representations (e.g., timestamps, strings, <code>datetime</code> objects) as these can be computationally expensive.</p></li>
<li><p><strong>Pre-compute values:</strong> If you need to perform the same date or time calculation repeatedly, pre-compute the result to avoid redundant calculations.</p></li>
<li><p><strong>Use optimized libraries:</strong> For complex date and time calculations, consider using optimized libraries designed for such tasks.</p></li>
</ul>
<h3 id="choosing-appropriate-data-structures">Choosing appropriate data structures</h3>
<ul>
<li><p><strong><code>datetime</code> objects:</strong> Suitable for representing specific points in time with date and time information.</p></li>
<li><p><strong><code>date</code> objects:</strong> Use when only the date (year, month, day) is relevant.</p></li>
<li><p><strong><code>time</code> objects:</strong> Use when only the time of day is relevant.</p></li>
<li><p><strong><code>timedelta</code> objects:</strong> Use for representing durations.</p></li>
<li><p><strong>Timestamps:</strong> Useful for efficient storage and comparison, especially in databases. However, be mindful of timezone considerations when using timestamps.</p></li>
<li><p><strong>Strings:</strong> Use for human-readable representation and data exchange. However, avoid using strings for calculations.</p></li>
</ul>
<h3 id="debugging-common-datetime-issues">Debugging common datetime issues</h3>
<ul>
<li><p><strong>Check for naive datetime objects:</strong> Ensure all your <code>datetime</code> objects are timezone-aware when time zones are involved.</p></li>
<li><p><strong>Examine timezone settings:</strong> Verify that your timezone settings are correct and consistent throughout your code.</p></li>
<li><p><strong>Use logging:</strong> Log date and time values at various points in your code to track their values and identify inconsistencies.</p></li>
<li><p><strong>Print or inspect values:</strong> Print or inspect the values of date and time variables to ensure they are what you expect.</p></li>
<li><p><strong>Use a debugger:</strong> Utilize a debugger to step through your code and examine the state of variables during execution.</p></li>
<li><p><strong>Consult the documentation:</strong> The official Python documentation for <code>datetime</code> and any third-party libraries you’re using provides detailed explanations and examples.</p></li>
<li><p><strong>Test with boundary conditions:</strong> Test your code with edge cases such as leap years, DST transitions, and other boundary conditions to find potential issues.</p></li>
<li><p><strong>Validate your results:</strong> Compare your results against known correct values to ensure accuracy.</p></li>
</ul>
<h2 id="appendix-related-modules">Appendix: Related Modules</h2>
<h3 id="calendar-module">calendar module</h3>
<p>The <code>calendar</code> module provides functions for working with calendars. It’s less focused on individual date and time manipulation and more on calendar-related operations like generating calendars, determining weekdays, and checking for leap years. It does not handle time zones.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> calendar</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a calendar for a given month and year</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>cal <span class="op">=</span> calendar.monthcalendar(<span class="dv">2024</span>, <span class="dv">3</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cal) <span class="co"># Output: A list of lists, each representing a week in the month</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Check if a year is a leap year</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>is_leap <span class="op">=</span> calendar.isleap(<span class="dv">2024</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(is_leap) <span class="co"># Output: True</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the weekday of a date</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>weekday <span class="op">=</span> calendar.weekday(<span class="dv">2024</span>, <span class="dv">4</span>, <span class="dv">15</span>) <span class="co">#Monday = 0, Sunday = 6</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(weekday) <span class="co"># Output: 0</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Text based calendar</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(calendar.calendar(<span class="dv">2024</span>)) <span class="co">#Prints a text based calendar for the entire year 2024</span></span></code></pre></div>
<h3 id="time-module">time module</h3>
<p>The <code>time</code> module provides lower-level time-related functions, often dealing with timestamps and time-related system calls. While it offers less structure than the <code>datetime</code> module, it’s useful for specific tasks like measuring elapsed time, pausing execution, and interacting with time-related system functions. It lacks the sophisticated date and time object handling of <code>datetime</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the current timestamp (seconds since the epoch)</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>timestamp <span class="op">=</span> time.time()</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(timestamp)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Pause execution for a specified number of seconds</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>time.sleep(<span class="dv">2</span>)  <span class="co"># Pause for 2 seconds</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the local time as a struct_time object</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>local_time <span class="op">=</span> time.localtime()</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(local_time) <span class="co"># Output: A named tuple representing the local time</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Format time</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>formatted_time <span class="op">=</span> time.strftime(<span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S"</span>, local_time)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formatted_time) <span class="co"># Output: Current time formatted as a string</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert from struct_time to seconds since epoch</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>seconds <span class="op">=</span> time.mktime(local_time)</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seconds)</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="co">#Get CPU time</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>cpu_time <span class="op">=</span> time.process_time()</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cpu_time)</span></code></pre></div>
<p>The <code>time</code> module is often used in performance measurements or situations where low-level interaction with the system clock is needed. For most date and time manipulation tasks, the <code>datetime</code> module is generally preferred for its higher-level abstractions and more user-friendly interface.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>