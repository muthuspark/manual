{"title":"FileSaver.js - Documentation","markdown":{"yaml":{"title":"FileSaver.js - Documentation","categories":["JavaScript Libraries and Functions"]},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n### What is FileSaver.js?\n\nFileSaver.js is a JavaScript library that allows you to save files on the client-side, directly from the user's web browser.  It provides a simple and consistent API for saving files of various types, bypassing the browser's often inconsistent and limited native file download mechanisms. This means you can programmatically trigger a file download without relying on `<a>` tags or form submissions.\n\n\n### Why use FileSaver.js?\n\n* **Cross-browser consistency:** FileSaver.js provides a unified API across different browsers, abstracting away the variations in how they handle file downloads.  This simplifies your code and ensures consistent behavior across various platforms.\n\n* **Programmatic control:**  You have complete control over the file download process, including the filename, file content, and MIME type. This is particularly useful for dynamically generated files or complex data processing workflows.\n\n* **Enhanced user experience:**  FileSaver.js enables a smoother and more intuitive file download experience for users. It avoids the limitations and quirks often associated with older, less reliable methods.\n\n* **Ease of use:** The API is straightforward and easy to integrate into your existing JavaScript projects.\n\n\n### Browser Compatibility\n\nFileSaver.js supports a wide range of modern browsers, including:\n\n* Chrome\n* Firefox\n* Safari\n* Edge\n* Opera\n\nFor older browsers that lack the necessary features, FileSaver.js gracefully degrades, often using a fallback mechanism to provide the functionality. Check the official repository for the most up-to-date compatibility information.  It's generally compatible with any browser that supports Blob objects.\n\n\n### Installation\n\nFileSaver.js can be easily installed using various methods:\n\n* **npm:**  If you're using npm (Node Package Manager), you can install it via the command line:\n\n  ```bash\n  npm install file-saver\n  ```\n\n  Then, import it into your JavaScript file:\n\n  ```javascript\n  import { saveAs } from 'file-saver';\n  ```\n\n* **CDN:** You can include FileSaver.js directly from a CDN, such as jsDelivr:\n\n  ```html\n  <script src=\"https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js\"></script>\n  ```\n\n  This will make the `saveAs` function globally available.\n\n* **Direct Download:** Download the library from the official GitHub repository and include it in your project using a `<script>` tag.  Remember to reference the correct file path.\n\n\n## Basic Usage\n\n### Saving a simple text file\n\nThe simplest way to use FileSaver.js is to save a plain text file.  This example saves a text string as a `.txt` file:\n\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst textToSave = 'Hello, FileSaver.js!';\nconst blob = new Blob([textToSave], { type: 'text/plain;charset=utf-8' });\nsaveAs(blob, 'my-file.txt');\n```\n\nThis code first creates a `Blob` object from the text string, specifying the MIME type as `text/plain`.  Then, it uses the `saveAs` function to initiate the download, providing the `Blob` and the desired filename.\n\n\n### Saving a Blob object\n\nFileSaver.js primarily works with `Blob` objects.  A `Blob` represents a file-like object in the browser. You can create a `Blob` from various data sources, including strings, arrays, and array buffers.  This example demonstrates saving a Blob created from an array of strings:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst data = [\n  'Line 1',\n  'Line 2',\n  'Line 3'\n];\nconst blob = new Blob(data, { type: 'text/plain;charset=utf-8' });\nsaveAs(blob, 'my-data.txt');\n```\n\nRemember to specify the appropriate MIME type based on the content of your Blob.\n\n\n### Specifying the filename\n\nThe second argument to the `saveAs` function determines the filename.  You can use any valid filename, including extensions:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst blob = new Blob(['This is my file content.'], { type: 'text/plain;charset=utf-8' });\nsaveAs(blob, 'my-document.txt'); //Saves as my-document.txt\n```\n\nThe filename should include the desired extension to indicate the file type to the user's operating system.\n\n\n### Setting file type and extensions\n\nThe file type is crucial and is set using the `type` property within the `Blob` constructor.  This determines how the browser handles the downloaded file (e.g., which application opens it).  The filename extension should generally correspond to the MIME type.\n\n```javascript\nimport { saveAs } from 'file-saver';\n\n//Save a CSV file\nconst csvData = 'Name,Age,City\\nJohn,30,New York\\nJane,25,London';\nconst blob = new Blob([csvData], { type: 'text/csv;charset=utf-8' });\nsaveAs(blob, 'my-data.csv');\n\n\n// Save a JSON file\nconst jsonData = JSON.stringify({ name: 'John Doe', age: 30 });\nconst jsonBlob = new Blob([jsonData], { type: 'application/json;charset=utf-8' });\nsaveAs(jsonBlob, 'data.json');\n```\n\nIncorrect MIME types can lead to the file not opening correctly or being handled unexpectedly by the browser.  Make sure to use the correct MIME type for the data you're saving.\n\n\n## Advanced Usage\n\n### Saving data URLs\n\nYou can save files from data URLs using FileSaver.js.  First, you need to convert the data URL into a `Blob`:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nfunction dataURLtoBlob(dataurl) {\n  let arr = dataurl.split(','),\n      mime = arr[0].match(/:(.*?);/)[1],\n      bstr = atob(arr[1]),\n      n = bstr.length,\n      u8arr = new Uint8Array(n);\n\n  while(n--){\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new Blob([u8arr], {type:mime});\n}\n\n\nconst dataUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==';\nconst blob = dataURLtoBlob(dataUrl);\nsaveAs(blob, 'image-from-dataurl.png');\n```\n\nThis example defines a helper function `dataURLtoBlob` to perform the conversion before passing the resulting `Blob` to `saveAs`.\n\n\n### Saving from a canvas element\n\nTo save the contents of a canvas element, you first need to get the image data as a data URL using `canvas.toDataURL()`, and then use the `dataURLtoBlob` function from the previous example:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\n// Assuming you have a canvas element with id 'myCanvas'\nconst canvas = document.getElementById('myCanvas');\nconst dataUrl = canvas.toDataURL();\nconst blob = dataURLtoBlob(dataUrl);\nsaveAs(blob, 'my-canvas.png');\n```\n\nRemember to replace `'myCanvas'` with the actual ID of your canvas element.\n\n\n### Handling user prompts and errors\n\nWhile FileSaver.js generally handles the download process smoothly, you might want to handle potential issues.  Although errors are rare, you can wrap the `saveAs` call in a `try...catch` block:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\ntry {\n  const blob = new Blob(['My file content'], {type: 'text/plain'});\n  saveAs(blob, 'my-file.txt');\n} catch (error) {\n  console.error('Error saving file:', error);\n  // Add user-friendly error handling here, e.g., display an alert message.\n}\n```\n\nThis improves robustness by providing a mechanism for handling unexpected problems.\n\n\n### Customizing the save dialog\n\nFileSaver.js doesn't directly provide options to extensively customize the browser's save dialog. The dialog's appearance and behavior are primarily controlled by the browser itself.  However, ensuring correct MIME types and filenames gives the user the best chance of a smooth experience.\n\n\n### Working with different file types (e.g., images, PDFs)\n\nFileSaver.js works seamlessly with various file types.  The key is to use the appropriate MIME type when creating the `Blob`:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\n// PDF\nconst pdfBlob = new Blob([pdfDocumentData], {type: 'application/pdf'});  //Replace pdfDocumentData with your PDF data\nsaveAs(pdfBlob, 'my-document.pdf');\n\n// Image (assuming you have image data as a Uint8Array)\nconst imageBlob = new Blob([imageData], {type: 'image/jpeg'});\nsaveAs(imageBlob, 'my-image.jpg');\n```\n\nRemember that the `pdfDocumentData` and `imageData` placeholders must be replaced with your actual data.\n\n\n### Asynchronous operations\n\nThe `saveAs` function is asynchronous. While it doesn't use Promises directly, the download process happens in the background.  This means your code will continue executing after calling `saveAs` without waiting for the download to complete.  This behavior is usually desirable; however, if you need to know when the download finishes, consider using events provided by the browser (which are outside the scope of FileSaver.js itself).  For example, you could check the download progress via browser dev tools' network tab.\n\n\n## API Reference\n\n### `saveAs()` method parameters and return values\n\nThe core function of FileSaver.js is `saveAs()`. It takes two parameters:\n\n```javascript\nsaveAs(blob, filename, [options]); \n```\n\n* **`blob`**: A `Blob` object representing the file data to be saved. This is a *required* parameter.\n* **`filename`**: A string specifying the desired filename for the downloaded file. This includes the file extension (e.g., \"my-file.txt\"). This is a *required* parameter.\n* **`options`**: (Optional) An object containing additional options.  Currently, FileSaver.js does not directly support options via this parameter, though future versions might.\n\n\nThe `saveAs()` function itself doesn't return any value. The download process happens asynchronously in the background.\n\n\n### Detailed explanation of each parameter\n\n* **`blob` (Required):**  This parameter is a `Blob` object.  A Blob is a file-like object representing raw data.  You create a `Blob` using the `Blob` constructor, providing an array of data (e.g., strings, ArrayBuffers, etc.) and an optional `type` property to specify the MIME type.  The `type` property is crucial for correctly identifying the file type and enabling the browser to handle the download appropriately.  Examples of valid MIME types include: `text/plain`, `text/csv`, `application/json`, `image/png`, `image/jpeg`, `application/pdf`.\n\n* **`filename` (Required):** This parameter is a string that determines the name of the downloaded file.  It's a user-friendly name and should typically include the appropriate file extension (e.g., `.txt`, `.csv`, `.pdf`, `.jpg`).  The browser will use this filename to present the file download to the user.\n\n* **`options` (Optional):**  Currently, the `options` parameter is not actively used by FileSaver.js.  However, it's included in the function signature for potential future extensions and to maintain consistency with other file handling APIs.\n\n\n### Error handling and exceptions\n\nFileSaver.js generally handles the file saving process robustly. However, errors can occur due to issues like browser limitations or incorrect usage.  While FileSaver.js doesn't throw specific exceptions itself, problems might manifest as the file download failing to initiate or the save dialog not appearing.  Therefore, good practice involves wrapping the `saveAs` call in a `try...catch` block to handle potential errors:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\ntry {\n  const blob = new Blob(['My file content'], {type: 'text/plain'});\n  saveAs(blob, 'my-file.txt');\n} catch (error) {\n  console.error('An error occurred while saving the file:', error);\n  // Add user-friendly error handling here (e.g., display an alert to the user).\n}\n```\n\nThis approach allows for better error management and provides a way to gracefully handle situations where the file saving operation fails.  Note that the `error` object might not always contain detailed information about the failure, especially in older browser versions.  In such cases, error handling should primarily focus on preventing the application from crashing and providing feedback to the user.\n\n\n## Examples\n\n### Saving text files\n\nThis example demonstrates saving a simple text file:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst text = \"This is the content of my text file.\";\nconst blob = new Blob([text], { type: 'text/plain;charset=utf-8' });\nsaveAs(blob, 'my-text-file.txt');\n```\n\n\n### Saving image files\n\nTo save an image file, you'll typically start with image data (e.g., from a canvas element or a data URL).  This example assumes you have image data as a Uint8Array:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\n//  Replace 'imageData' with your actual image data (Uint8Array)\nconst imageData = new Uint8Array([/* ... your image data ... */]); \nconst blob = new Blob([imageData], { type: 'image/jpeg' });\nsaveAs(blob, 'my-image.jpg');\n```\n\n\n### Saving CSV files\n\nThis example saves a CSV file with comma-separated values:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst csvData = \"Name,Age,City\\nJohn Doe,30,New York\\nJane Doe,25,London\";\nconst blob = new Blob([csvData], { type: 'text/csv;charset=utf-8' });\nsaveAs(blob, 'my-data.csv');\n```\n\n\n### Saving JSON files\n\nSaving JSON data involves creating a Blob from a JSON string:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst jsonData = JSON.stringify({ name: \"John Doe\", age: 30, city: \"New York\" });\nconst blob = new Blob([jsonData], { type: 'application/json;charset=utf-8' });\nsaveAs(blob, 'my-data.json');\n```\n\n\n### Complex example: combining multiple data sources\n\nThis example demonstrates combining data from different sources into a single downloadable file (a zip archive in this case).  Note that this requires a library to create the zip archive; this is just illustrative and you would need to include a suitable library like JSZip.\n\n```javascript\nimport { saveAs } from 'file-saver';\nimport JSZip from 'jszip'; // You'll need to install jszip: npm install jszip\n\nasync function saveCombinedData() {\n  const zip = new JSZip();\n\n  // Add text file\n  zip.file(\"data.txt\", \"This is some text data.\");\n\n  // Add JSON data\n  zip.file(\"data.json\", JSON.stringify({ a: 1, b: 2 }));\n\n  // Assuming you have image data as a Uint8Array\n  const imageData = new Uint8Array([/* ... your image data ... */]);\n  zip.file(\"image.jpg\", imageData, {binary:true});\n\n\n  const content = await zip.generateAsync({ type: \"blob\" });\n  saveAs(content, \"combined_data.zip\");\n}\n\nsaveCombinedData();\n```\n\nThis advanced example shows how FileSaver.js integrates with other libraries to handle more complex file types and data combinations. Remember to replace placeholder data with your actual data and install the necessary libraries.\n\n\n## Troubleshooting\n\n### Common errors and solutions\n\n* **\"TypeError: Failed to execute 'saveAs' on 'FileWriter': parameter 1 is not of type 'Blob'.\"**  This error indicates that you're not passing a `Blob` object as the first argument to `saveAs()`. Double-check that you've correctly created a `Blob` using the `Blob` constructor and that the variable you're passing is indeed a `Blob` instance.\n\n* **File doesn't download or opens incorrectly:** This is often due to an incorrect MIME type specified in the `Blob` constructor. Ensure you use a MIME type that accurately represents the file's content (e.g., `text/plain`, `application/json`, `image/png`, `application/pdf`).  Inconsistencies between the file extension in the filename and the MIME type can also cause this issue.\n\n* **Browser doesn't support FileSaver.js:** While FileSaver.js has wide browser compatibility, extremely old or unsupported browsers might lack the necessary features. Test on your target browsers and consider providing graceful fallback mechanisms if necessary.  FileSaver.js typically degrades gracefully for unsupported features.\n\n* **Security restrictions:**  In some cases, security policies in your browser or server might prevent file downloads.  Check your browser's security settings and ensure that the web server isn't imposing restrictions.\n\n\n### Debugging tips\n\n* **Check the browser's console:**  Open your browser's developer console (usually by pressing F12) to look for JavaScript errors or warnings.  These can often pinpoint the source of problems with FileSaver.js.\n\n* **Inspect the `Blob` object:** Use your browser's developer tools to inspect the `Blob` object you're passing to `saveAs()`. Verify that it contains the expected data and that its `type` property is correctly set.\n\n* **Simplify the code:** If you're dealing with a complex scenario, try simplifying your code to isolate the problem. Create a minimal example that demonstrates the issue to help pinpoint the cause.\n\n* **Test in different browsers:**  Test your code in multiple browsers (Chrome, Firefox, Edge, Safari) to see if the problem is browser-specific. This can help identify compatibility issues.\n\n\n### Browser-specific issues\n\nAlthough FileSaver.js aims for cross-browser compatibility, minor inconsistencies might exist.  Here are some potential browser-specific considerations:\n\n* **Older browsers:**  Older browsers might have limitations in how they handle `Blob` objects or the file download process. FileSaver.js includes fallback mechanisms but may not fully support all features on older browsers.\n\n* **Security contexts:**  The browser's security context (e.g., whether the script is running in a secure HTTPS context) can influence the success of the file download.  Ensure your website is served via HTTPS if you're encountering download issues.\n\n* **Extensions and add-ons:** Browser extensions or add-ons can sometimes interfere with file downloads. Try disabling extensions to see if they are causing conflicts.\n\n\nIf you encounter persistent issues that don't align with the common errors listed above, please provide detailed information about your setup, code snippet, browser, and observed behavior to facilitate more effective troubleshooting.  Consulting the FileSaver.js GitHub repository's issues section might also reveal solutions to previously encountered problems.\n\n\n## Contributing\n\n### Reporting bugs\n\nIf you discover a bug in FileSaver.js, please report it on the project's GitHub issue tracker.  When reporting a bug, please provide the following information:\n\n* **FileSaver.js version:** Specify the version of FileSaver.js you're using.\n* **Browser and version:** Indicate the browser (Chrome, Firefox, Safari, Edge, etc.) and its version number.\n* **Operating system:** State the operating system (Windows, macOS, Linux, etc.) you're using.\n* **Steps to reproduce:** Clearly describe the steps needed to reproduce the bug.  Provide a minimal, reproducible example if possible.\n* **Expected behavior:** Explain what you expected to happen.\n* **Actual behavior:** Describe what actually happened.\n* **Error messages (if any):** Include any error messages you encountered.\n* **Code snippet:** Provide the relevant code snippet showing how you're using FileSaver.js.\n\nClear and concise bug reports greatly assist in identifying and resolving issues efficiently.\n\n\n### Suggesting features\n\nIf you have an idea for a new feature or improvement to FileSaver.js, please suggest it on the GitHub issue tracker.  When suggesting a feature, explain:\n\n* **The problem:** Describe the problem the feature aims to solve.\n* **Proposed solution:** Detail your proposed solution and how it would address the problem.\n* **Benefits:** Highlight the benefits of implementing the feature.\n* **Potential drawbacks:** Discuss any potential drawbacks or challenges in implementing the feature.\n\nWell-reasoned feature suggestions increase the likelihood of your proposal being considered and potentially included in future releases.\n\n\n### Coding style guide\n\nFileSaver.js follows a consistent coding style.  If you contribute code, please adhere to the following guidelines:\n\n* **Indentation:** Use 2 spaces for indentation.\n* **Line length:** Keep lines under 80 characters.\n* **Naming conventions:** Use descriptive names for variables and functions.  Follow camelCase for variable and function names.\n* **Comments:** Add clear and concise comments to explain complex logic.\n* **Test coverage:** Ensure that any new code is thoroughly tested.\n\n\nConsistency in coding style improves code readability and maintainability.\n\n\n### Testing procedures\n\nFileSaver.js uses a testing framework (likely Jest or similar).  If you're contributing code, you're expected to write unit tests to ensure the functionality and correctness of your changes.  The project's `README` or `CONTRIBUTING` file usually contains detailed instructions on how to set up the development environment and run the tests.  Before submitting a pull request, thoroughly test your code to verify that it works correctly and doesn't introduce regressions.  Testing is essential for maintaining the quality and stability of FileSaver.js.  Adhering to existing testing practices will help integrate your changes seamlessly.\n\n","srcMarkdownNoYaml":"\n## Introduction\n\n### What is FileSaver.js?\n\nFileSaver.js is a JavaScript library that allows you to save files on the client-side, directly from the user's web browser.  It provides a simple and consistent API for saving files of various types, bypassing the browser's often inconsistent and limited native file download mechanisms. This means you can programmatically trigger a file download without relying on `<a>` tags or form submissions.\n\n\n### Why use FileSaver.js?\n\n* **Cross-browser consistency:** FileSaver.js provides a unified API across different browsers, abstracting away the variations in how they handle file downloads.  This simplifies your code and ensures consistent behavior across various platforms.\n\n* **Programmatic control:**  You have complete control over the file download process, including the filename, file content, and MIME type. This is particularly useful for dynamically generated files or complex data processing workflows.\n\n* **Enhanced user experience:**  FileSaver.js enables a smoother and more intuitive file download experience for users. It avoids the limitations and quirks often associated with older, less reliable methods.\n\n* **Ease of use:** The API is straightforward and easy to integrate into your existing JavaScript projects.\n\n\n### Browser Compatibility\n\nFileSaver.js supports a wide range of modern browsers, including:\n\n* Chrome\n* Firefox\n* Safari\n* Edge\n* Opera\n\nFor older browsers that lack the necessary features, FileSaver.js gracefully degrades, often using a fallback mechanism to provide the functionality. Check the official repository for the most up-to-date compatibility information.  It's generally compatible with any browser that supports Blob objects.\n\n\n### Installation\n\nFileSaver.js can be easily installed using various methods:\n\n* **npm:**  If you're using npm (Node Package Manager), you can install it via the command line:\n\n  ```bash\n  npm install file-saver\n  ```\n\n  Then, import it into your JavaScript file:\n\n  ```javascript\n  import { saveAs } from 'file-saver';\n  ```\n\n* **CDN:** You can include FileSaver.js directly from a CDN, such as jsDelivr:\n\n  ```html\n  <script src=\"https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js\"></script>\n  ```\n\n  This will make the `saveAs` function globally available.\n\n* **Direct Download:** Download the library from the official GitHub repository and include it in your project using a `<script>` tag.  Remember to reference the correct file path.\n\n\n## Basic Usage\n\n### Saving a simple text file\n\nThe simplest way to use FileSaver.js is to save a plain text file.  This example saves a text string as a `.txt` file:\n\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst textToSave = 'Hello, FileSaver.js!';\nconst blob = new Blob([textToSave], { type: 'text/plain;charset=utf-8' });\nsaveAs(blob, 'my-file.txt');\n```\n\nThis code first creates a `Blob` object from the text string, specifying the MIME type as `text/plain`.  Then, it uses the `saveAs` function to initiate the download, providing the `Blob` and the desired filename.\n\n\n### Saving a Blob object\n\nFileSaver.js primarily works with `Blob` objects.  A `Blob` represents a file-like object in the browser. You can create a `Blob` from various data sources, including strings, arrays, and array buffers.  This example demonstrates saving a Blob created from an array of strings:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst data = [\n  'Line 1',\n  'Line 2',\n  'Line 3'\n];\nconst blob = new Blob(data, { type: 'text/plain;charset=utf-8' });\nsaveAs(blob, 'my-data.txt');\n```\n\nRemember to specify the appropriate MIME type based on the content of your Blob.\n\n\n### Specifying the filename\n\nThe second argument to the `saveAs` function determines the filename.  You can use any valid filename, including extensions:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst blob = new Blob(['This is my file content.'], { type: 'text/plain;charset=utf-8' });\nsaveAs(blob, 'my-document.txt'); //Saves as my-document.txt\n```\n\nThe filename should include the desired extension to indicate the file type to the user's operating system.\n\n\n### Setting file type and extensions\n\nThe file type is crucial and is set using the `type` property within the `Blob` constructor.  This determines how the browser handles the downloaded file (e.g., which application opens it).  The filename extension should generally correspond to the MIME type.\n\n```javascript\nimport { saveAs } from 'file-saver';\n\n//Save a CSV file\nconst csvData = 'Name,Age,City\\nJohn,30,New York\\nJane,25,London';\nconst blob = new Blob([csvData], { type: 'text/csv;charset=utf-8' });\nsaveAs(blob, 'my-data.csv');\n\n\n// Save a JSON file\nconst jsonData = JSON.stringify({ name: 'John Doe', age: 30 });\nconst jsonBlob = new Blob([jsonData], { type: 'application/json;charset=utf-8' });\nsaveAs(jsonBlob, 'data.json');\n```\n\nIncorrect MIME types can lead to the file not opening correctly or being handled unexpectedly by the browser.  Make sure to use the correct MIME type for the data you're saving.\n\n\n## Advanced Usage\n\n### Saving data URLs\n\nYou can save files from data URLs using FileSaver.js.  First, you need to convert the data URL into a `Blob`:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nfunction dataURLtoBlob(dataurl) {\n  let arr = dataurl.split(','),\n      mime = arr[0].match(/:(.*?);/)[1],\n      bstr = atob(arr[1]),\n      n = bstr.length,\n      u8arr = new Uint8Array(n);\n\n  while(n--){\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new Blob([u8arr], {type:mime});\n}\n\n\nconst dataUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==';\nconst blob = dataURLtoBlob(dataUrl);\nsaveAs(blob, 'image-from-dataurl.png');\n```\n\nThis example defines a helper function `dataURLtoBlob` to perform the conversion before passing the resulting `Blob` to `saveAs`.\n\n\n### Saving from a canvas element\n\nTo save the contents of a canvas element, you first need to get the image data as a data URL using `canvas.toDataURL()`, and then use the `dataURLtoBlob` function from the previous example:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\n// Assuming you have a canvas element with id 'myCanvas'\nconst canvas = document.getElementById('myCanvas');\nconst dataUrl = canvas.toDataURL();\nconst blob = dataURLtoBlob(dataUrl);\nsaveAs(blob, 'my-canvas.png');\n```\n\nRemember to replace `'myCanvas'` with the actual ID of your canvas element.\n\n\n### Handling user prompts and errors\n\nWhile FileSaver.js generally handles the download process smoothly, you might want to handle potential issues.  Although errors are rare, you can wrap the `saveAs` call in a `try...catch` block:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\ntry {\n  const blob = new Blob(['My file content'], {type: 'text/plain'});\n  saveAs(blob, 'my-file.txt');\n} catch (error) {\n  console.error('Error saving file:', error);\n  // Add user-friendly error handling here, e.g., display an alert message.\n}\n```\n\nThis improves robustness by providing a mechanism for handling unexpected problems.\n\n\n### Customizing the save dialog\n\nFileSaver.js doesn't directly provide options to extensively customize the browser's save dialog. The dialog's appearance and behavior are primarily controlled by the browser itself.  However, ensuring correct MIME types and filenames gives the user the best chance of a smooth experience.\n\n\n### Working with different file types (e.g., images, PDFs)\n\nFileSaver.js works seamlessly with various file types.  The key is to use the appropriate MIME type when creating the `Blob`:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\n// PDF\nconst pdfBlob = new Blob([pdfDocumentData], {type: 'application/pdf'});  //Replace pdfDocumentData with your PDF data\nsaveAs(pdfBlob, 'my-document.pdf');\n\n// Image (assuming you have image data as a Uint8Array)\nconst imageBlob = new Blob([imageData], {type: 'image/jpeg'});\nsaveAs(imageBlob, 'my-image.jpg');\n```\n\nRemember that the `pdfDocumentData` and `imageData` placeholders must be replaced with your actual data.\n\n\n### Asynchronous operations\n\nThe `saveAs` function is asynchronous. While it doesn't use Promises directly, the download process happens in the background.  This means your code will continue executing after calling `saveAs` without waiting for the download to complete.  This behavior is usually desirable; however, if you need to know when the download finishes, consider using events provided by the browser (which are outside the scope of FileSaver.js itself).  For example, you could check the download progress via browser dev tools' network tab.\n\n\n## API Reference\n\n### `saveAs()` method parameters and return values\n\nThe core function of FileSaver.js is `saveAs()`. It takes two parameters:\n\n```javascript\nsaveAs(blob, filename, [options]); \n```\n\n* **`blob`**: A `Blob` object representing the file data to be saved. This is a *required* parameter.\n* **`filename`**: A string specifying the desired filename for the downloaded file. This includes the file extension (e.g., \"my-file.txt\"). This is a *required* parameter.\n* **`options`**: (Optional) An object containing additional options.  Currently, FileSaver.js does not directly support options via this parameter, though future versions might.\n\n\nThe `saveAs()` function itself doesn't return any value. The download process happens asynchronously in the background.\n\n\n### Detailed explanation of each parameter\n\n* **`blob` (Required):**  This parameter is a `Blob` object.  A Blob is a file-like object representing raw data.  You create a `Blob` using the `Blob` constructor, providing an array of data (e.g., strings, ArrayBuffers, etc.) and an optional `type` property to specify the MIME type.  The `type` property is crucial for correctly identifying the file type and enabling the browser to handle the download appropriately.  Examples of valid MIME types include: `text/plain`, `text/csv`, `application/json`, `image/png`, `image/jpeg`, `application/pdf`.\n\n* **`filename` (Required):** This parameter is a string that determines the name of the downloaded file.  It's a user-friendly name and should typically include the appropriate file extension (e.g., `.txt`, `.csv`, `.pdf`, `.jpg`).  The browser will use this filename to present the file download to the user.\n\n* **`options` (Optional):**  Currently, the `options` parameter is not actively used by FileSaver.js.  However, it's included in the function signature for potential future extensions and to maintain consistency with other file handling APIs.\n\n\n### Error handling and exceptions\n\nFileSaver.js generally handles the file saving process robustly. However, errors can occur due to issues like browser limitations or incorrect usage.  While FileSaver.js doesn't throw specific exceptions itself, problems might manifest as the file download failing to initiate or the save dialog not appearing.  Therefore, good practice involves wrapping the `saveAs` call in a `try...catch` block to handle potential errors:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\ntry {\n  const blob = new Blob(['My file content'], {type: 'text/plain'});\n  saveAs(blob, 'my-file.txt');\n} catch (error) {\n  console.error('An error occurred while saving the file:', error);\n  // Add user-friendly error handling here (e.g., display an alert to the user).\n}\n```\n\nThis approach allows for better error management and provides a way to gracefully handle situations where the file saving operation fails.  Note that the `error` object might not always contain detailed information about the failure, especially in older browser versions.  In such cases, error handling should primarily focus on preventing the application from crashing and providing feedback to the user.\n\n\n## Examples\n\n### Saving text files\n\nThis example demonstrates saving a simple text file:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst text = \"This is the content of my text file.\";\nconst blob = new Blob([text], { type: 'text/plain;charset=utf-8' });\nsaveAs(blob, 'my-text-file.txt');\n```\n\n\n### Saving image files\n\nTo save an image file, you'll typically start with image data (e.g., from a canvas element or a data URL).  This example assumes you have image data as a Uint8Array:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\n//  Replace 'imageData' with your actual image data (Uint8Array)\nconst imageData = new Uint8Array([/* ... your image data ... */]); \nconst blob = new Blob([imageData], { type: 'image/jpeg' });\nsaveAs(blob, 'my-image.jpg');\n```\n\n\n### Saving CSV files\n\nThis example saves a CSV file with comma-separated values:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst csvData = \"Name,Age,City\\nJohn Doe,30,New York\\nJane Doe,25,London\";\nconst blob = new Blob([csvData], { type: 'text/csv;charset=utf-8' });\nsaveAs(blob, 'my-data.csv');\n```\n\n\n### Saving JSON files\n\nSaving JSON data involves creating a Blob from a JSON string:\n\n```javascript\nimport { saveAs } from 'file-saver';\n\nconst jsonData = JSON.stringify({ name: \"John Doe\", age: 30, city: \"New York\" });\nconst blob = new Blob([jsonData], { type: 'application/json;charset=utf-8' });\nsaveAs(blob, 'my-data.json');\n```\n\n\n### Complex example: combining multiple data sources\n\nThis example demonstrates combining data from different sources into a single downloadable file (a zip archive in this case).  Note that this requires a library to create the zip archive; this is just illustrative and you would need to include a suitable library like JSZip.\n\n```javascript\nimport { saveAs } from 'file-saver';\nimport JSZip from 'jszip'; // You'll need to install jszip: npm install jszip\n\nasync function saveCombinedData() {\n  const zip = new JSZip();\n\n  // Add text file\n  zip.file(\"data.txt\", \"This is some text data.\");\n\n  // Add JSON data\n  zip.file(\"data.json\", JSON.stringify({ a: 1, b: 2 }));\n\n  // Assuming you have image data as a Uint8Array\n  const imageData = new Uint8Array([/* ... your image data ... */]);\n  zip.file(\"image.jpg\", imageData, {binary:true});\n\n\n  const content = await zip.generateAsync({ type: \"blob\" });\n  saveAs(content, \"combined_data.zip\");\n}\n\nsaveCombinedData();\n```\n\nThis advanced example shows how FileSaver.js integrates with other libraries to handle more complex file types and data combinations. Remember to replace placeholder data with your actual data and install the necessary libraries.\n\n\n## Troubleshooting\n\n### Common errors and solutions\n\n* **\"TypeError: Failed to execute 'saveAs' on 'FileWriter': parameter 1 is not of type 'Blob'.\"**  This error indicates that you're not passing a `Blob` object as the first argument to `saveAs()`. Double-check that you've correctly created a `Blob` using the `Blob` constructor and that the variable you're passing is indeed a `Blob` instance.\n\n* **File doesn't download or opens incorrectly:** This is often due to an incorrect MIME type specified in the `Blob` constructor. Ensure you use a MIME type that accurately represents the file's content (e.g., `text/plain`, `application/json`, `image/png`, `application/pdf`).  Inconsistencies between the file extension in the filename and the MIME type can also cause this issue.\n\n* **Browser doesn't support FileSaver.js:** While FileSaver.js has wide browser compatibility, extremely old or unsupported browsers might lack the necessary features. Test on your target browsers and consider providing graceful fallback mechanisms if necessary.  FileSaver.js typically degrades gracefully for unsupported features.\n\n* **Security restrictions:**  In some cases, security policies in your browser or server might prevent file downloads.  Check your browser's security settings and ensure that the web server isn't imposing restrictions.\n\n\n### Debugging tips\n\n* **Check the browser's console:**  Open your browser's developer console (usually by pressing F12) to look for JavaScript errors or warnings.  These can often pinpoint the source of problems with FileSaver.js.\n\n* **Inspect the `Blob` object:** Use your browser's developer tools to inspect the `Blob` object you're passing to `saveAs()`. Verify that it contains the expected data and that its `type` property is correctly set.\n\n* **Simplify the code:** If you're dealing with a complex scenario, try simplifying your code to isolate the problem. Create a minimal example that demonstrates the issue to help pinpoint the cause.\n\n* **Test in different browsers:**  Test your code in multiple browsers (Chrome, Firefox, Edge, Safari) to see if the problem is browser-specific. This can help identify compatibility issues.\n\n\n### Browser-specific issues\n\nAlthough FileSaver.js aims for cross-browser compatibility, minor inconsistencies might exist.  Here are some potential browser-specific considerations:\n\n* **Older browsers:**  Older browsers might have limitations in how they handle `Blob` objects or the file download process. FileSaver.js includes fallback mechanisms but may not fully support all features on older browsers.\n\n* **Security contexts:**  The browser's security context (e.g., whether the script is running in a secure HTTPS context) can influence the success of the file download.  Ensure your website is served via HTTPS if you're encountering download issues.\n\n* **Extensions and add-ons:** Browser extensions or add-ons can sometimes interfere with file downloads. Try disabling extensions to see if they are causing conflicts.\n\n\nIf you encounter persistent issues that don't align with the common errors listed above, please provide detailed information about your setup, code snippet, browser, and observed behavior to facilitate more effective troubleshooting.  Consulting the FileSaver.js GitHub repository's issues section might also reveal solutions to previously encountered problems.\n\n\n## Contributing\n\n### Reporting bugs\n\nIf you discover a bug in FileSaver.js, please report it on the project's GitHub issue tracker.  When reporting a bug, please provide the following information:\n\n* **FileSaver.js version:** Specify the version of FileSaver.js you're using.\n* **Browser and version:** Indicate the browser (Chrome, Firefox, Safari, Edge, etc.) and its version number.\n* **Operating system:** State the operating system (Windows, macOS, Linux, etc.) you're using.\n* **Steps to reproduce:** Clearly describe the steps needed to reproduce the bug.  Provide a minimal, reproducible example if possible.\n* **Expected behavior:** Explain what you expected to happen.\n* **Actual behavior:** Describe what actually happened.\n* **Error messages (if any):** Include any error messages you encountered.\n* **Code snippet:** Provide the relevant code snippet showing how you're using FileSaver.js.\n\nClear and concise bug reports greatly assist in identifying and resolving issues efficiently.\n\n\n### Suggesting features\n\nIf you have an idea for a new feature or improvement to FileSaver.js, please suggest it on the GitHub issue tracker.  When suggesting a feature, explain:\n\n* **The problem:** Describe the problem the feature aims to solve.\n* **Proposed solution:** Detail your proposed solution and how it would address the problem.\n* **Benefits:** Highlight the benefits of implementing the feature.\n* **Potential drawbacks:** Discuss any potential drawbacks or challenges in implementing the feature.\n\nWell-reasoned feature suggestions increase the likelihood of your proposal being considered and potentially included in future releases.\n\n\n### Coding style guide\n\nFileSaver.js follows a consistent coding style.  If you contribute code, please adhere to the following guidelines:\n\n* **Indentation:** Use 2 spaces for indentation.\n* **Line length:** Keep lines under 80 characters.\n* **Naming conventions:** Use descriptive names for variables and functions.  Follow camelCase for variable and function names.\n* **Comments:** Add clear and concise comments to explain complex logic.\n* **Test coverage:** Ensure that any new code is thoroughly tested.\n\n\nConsistency in coding style improves code readability and maintainability.\n\n\n### Testing procedures\n\nFileSaver.js uses a testing framework (likely Jest or similar).  If you're contributing code, you're expected to write unit tests to ensure the functionality and correctness of your changes.  The project's `README` or `CONTRIBUTING` file usually contains detailed instructions on how to set up the development environment and run the tests.  Before submitting a pull request, thoroughly test your code to verify that it works correctly and doesn't introduce regressions.  Testing is essential for maintaining the quality and stability of FileSaver.js.  Adhering to existing testing practices will help integrate your changes seamlessly.\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"css":["../../styles.css"],"html-math-method":{"method":"mathjax","url":"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"},"include-in-header":["../../favicon.html","../../header.html"],"include-after-body":[{"text":"<script async src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561\" crossorigin=\"anonymous\"></script>\n"},"../../footer.html"],"output-file":"filesaverjs.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.6.39","theme":"pandoc","mermaid":{"theme":"neutral"},"minimal":true,"title-block-banner":true,"page-navigation":true,"license":"MIT","author-meta":"Muthukrishnan","title":"FileSaver.js - Documentation","categories":["JavaScript Libraries and Functions"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}