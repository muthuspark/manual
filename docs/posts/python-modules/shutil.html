<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>shutil - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MXDPF6L5TL"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MXDPF6L5TL', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta property="og:title" content="shutil - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">shutil - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-shutil" id="toc-what-is-shutil">What is shutil?</a></li>
  <li><a href="#why-use-shutil" id="toc-why-use-shutil">Why use shutil?</a></li>
  <li><a href="#shutil-vs.-other-modules-os-pathlib" id="toc-shutil-vs.-other-modules-os-pathlib">shutil vs.&nbsp;other modules (os, pathlib)</a></li>
  <li><a href="#setting-up-your-environment" id="toc-setting-up-your-environment">Setting up your environment</a></li>
  <li><a href="#high-level-operations" id="toc-high-level-operations">High-level Operations</a>
  <ul>
  <li><a href="#copyfile" id="toc-copyfile">copyfile()</a></li>
  <li><a href="#copy" id="toc-copy">copy()</a></li>
  <li><a href="#copy2" id="toc-copy2">copy2()</a></li>
  <li><a href="#copytree" id="toc-copytree">copytree()</a></li>
  <li><a href="#move" id="toc-move">move()</a></li>
  <li><a href="#rmtree" id="toc-rmtree">rmtree()</a></li>
  </ul></li>
  <li><a href="#file-and-directory-management" id="toc-file-and-directory-management">File and Directory Management</a>
  <ul>
  <li><a href="#rmtree-deleting-directories-recursively" id="toc-rmtree-deleting-directories-recursively">rmtree(): Deleting directories recursively</a></li>
  <li><a href="#copytree-copying-directory-trees" id="toc-copytree-copying-directory-trees">copytree(): Copying directory trees</a></li>
  <li><a href="#ignore_patterns-in-copytree" id="toc-ignore_patterns-in-copytree">ignore_patterns() in copytree()</a></li>
  <li><a href="#make_archive-creating-archive-files" id="toc-make_archive-creating-archive-files">make_archive(): Creating archive files</a></li>
  <li><a href="#get_archive_formats-listing-supported-archive-formats" id="toc-get_archive_formats-listing-supported-archive-formats">get_archive_formats(): Listing supported archive formats</a></li>
  <li><a href="#unpack_archive-unpacking-archive-files" id="toc-unpack_archive-unpacking-archive-files">unpack_archive(): Unpacking archive files</a></li>
  <li><a href="#register_archive_format-registering-custom-archive-formats" id="toc-register_archive_format-registering-custom-archive-formats">register_archive_format(): Registering custom archive formats</a></li>
  <li><a href="#disk_usage-checking-disk-usage" id="toc-disk_usage-checking-disk-usage">disk_usage(): Checking disk usage</a></li>
  <li><a href="#chown-changing-file-ownership-unix-like-systems" id="toc-chown-changing-file-ownership-unix-like-systems">chown(): Changing file ownership (Unix-like systems)</a></li>
  <li><a href="#which-finding-executable-files" id="toc-which-finding-executable-files">which(): Finding executable files</a></li>
  </ul></li>
  <li><a href="#advanced-usage-and-best-practices" id="toc-advanced-usage-and-best-practices">Advanced Usage and Best Practices</a>
  <ul>
  <li><a href="#error-handling-and-exception-management" id="toc-error-handling-and-exception-management">Error Handling and Exception Management</a></li>
  <li><a href="#handling-permissions-and-access-control" id="toc-handling-permissions-and-access-control">Handling Permissions and Access Control</a></li>
  <li><a href="#optimizing-shutil-for-large-files-and-directories" id="toc-optimizing-shutil-for-large-files-and-directories">Optimizing shutil for large files and directories</a></li>
  <li><a href="#working-with-symbolic-links" id="toc-working-with-symbolic-links">Working with symbolic links</a></li>
  <li><a href="#using-shutil-with-different-file-systems" id="toc-using-shutil-with-different-file-systems">Using shutil with different file systems</a></li>
  <li><a href="#security-considerations" id="toc-security-considerations">Security Considerations</a></li>
  <li><a href="#common-pitfalls-and-troubleshooting" id="toc-common-pitfalls-and-troubleshooting">Common Pitfalls and Troubleshooting</a></li>
  </ul></li>
  <li><a href="#examples-and-use-cases" id="toc-examples-and-use-cases">Examples and Use Cases</a>
  <ul>
  <li><a href="#basic-file-copying" id="toc-basic-file-copying">Basic file copying</a></li>
  <li><a href="#copying-with-metadata-preservation" id="toc-copying-with-metadata-preservation">Copying with metadata preservation</a></li>
  <li><a href="#creating-and-extracting-zip-archives" id="toc-creating-and-extracting-zip-archives">Creating and extracting zip archives</a></li>
  <li><a href="#moving-files-and-directories" id="toc-moving-files-and-directories">Moving files and directories</a></li>
  <li><a href="#deleting-directories-and-their-contents" id="toc-deleting-directories-and-their-contents">Deleting directories and their contents</a></li>
  <li><a href="#real-world-application-examples" id="toc-real-world-application-examples">Real-world application examples</a></li>
  </ul></li>
  <li><a href="#reference" id="toc-reference">Reference</a>
  <ul>
  <li><a href="#module-functions-alphabetical-listing-with-detailed-explanations-and-examples-for-each-function." id="toc-module-functions-alphabetical-listing-with-detailed-explanations-and-examples-for-each-function.">Module functions: Alphabetical Listing with detailed explanations and examples for each function.</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-shutil">What is shutil?</h3>
<p>The <code>shutil</code> module in Python provides a set of high-level file operations. Unlike lower-level modules like <code>os</code>, which offer granular control over individual file system interactions, <code>shutil</code> offers convenience functions for common tasks such as copying files and directories, archiving, deleting, and manipulating file permissions. These functions abstract away many of the platform-specific details, making your code more portable and easier to read.</p>
<h3 id="why-use-shutil">Why use shutil?</h3>
<p>Using <code>shutil</code> offers several advantages:</p>
<ul>
<li><strong>Readability:</strong> <code>shutil</code> functions have clear, descriptive names making code easier to understand and maintain. Operations like copying directories recursively are handled with a single function call, rather than needing to write custom recursive logic with <code>os</code> functions.</li>
<li><strong>Portability:</strong> <code>shutil</code> handles platform-specific differences (e.g., how file paths are represented on Windows vs.&nbsp;Unix-like systems). This allows you to write code that works consistently across different operating systems without needing conditional logic for each platform.</li>
<li><strong>Efficiency:</strong> While it builds upon lower-level modules, <code>shutil</code> often optimizes common tasks, potentially leading to improved performance compared to manually implementing equivalent functionality.</li>
<li><strong>Error Handling:</strong> <code>shutil</code> functions typically include built-in error handling, making your code more robust. For example, they might handle permission errors or situations where files already exist.</li>
</ul>
<h3 id="shutil-vs.-other-modules-os-pathlib">shutil vs.&nbsp;other modules (os, pathlib)</h3>
<p>While <code>os</code> and <code>pathlib</code> provide fundamental file system operations, <code>shutil</code> builds upon them to offer higher-level functionality.</p>
<ul>
<li><strong><code>os</code>:</strong> Provides low-level, granular control over the file system. It’s more powerful but requires more code to accomplish common tasks. <code>shutil</code> often uses <code>os</code> internally.</li>
<li><strong><code>pathlib</code>:</strong> Offers an object-oriented approach to file system manipulation, improving code readability. <code>shutil</code> doesn’t directly interact with <code>pathlib</code> objects but works well alongside it; you can easily convert <code>pathlib.Path</code> objects to strings for use with <code>shutil</code> functions.</li>
</ul>
<p><code>shutil</code> is ideal for everyday file operations. For highly specialized or low-level tasks, <code>os</code> might be necessary. <code>pathlib</code> improves the structure and readability of file path manipulation but does not directly replace <code>shutil</code>’s higher-level functions.</p>
<h3 id="setting-up-your-environment">Setting up your environment</h3>
<p><code>shutil</code> is a standard Python library, meaning it’s included by default in all Python installations. There’s no additional setup required to use it. To begin using <code>shutil</code>, simply import it into your Python script:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span></code></pre></div>
<p>You can then start using the functions provided by the <code>shutil</code> module. No specific environment variables or external packages need to be configured.</p>
<h2 id="high-level-operations">High-level Operations</h2>
<h3 id="copyfile">copyfile()</h3>
<p>Copies the contents of the source file to the destination file. It will overwrite the destination if it already exists. It does <em>not</em> preserve metadata (timestamps, permissions, etc.).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>shutil.copyfile(src, dst) </span></code></pre></div>
<ul>
<li><code>src</code>: Path to the source file.</li>
<li><code>dst</code>: Path to the destination file.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>shutil.copyfile(<span class="st">"my_document.txt"</span>, <span class="st">"my_document_copy.txt"</span>)</span></code></pre></div>
<h3 id="copy">copy()</h3>
<p>Copies the source file to the destination. It handles both files and symbolic links. If the destination is a directory, it copies the file into that directory. It does <em>not</em> preserve metadata.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>shutil.copy(src, dst)</span></code></pre></div>
<ul>
<li><code>src</code>: Path to the source file.</li>
<li><code>dst</code>: Path to the destination file or directory.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>shutil.copy(<span class="st">"my_image.jpg"</span>, <span class="st">"backup_folder/"</span>)  <span class="co">#Copies to backup_folder/my_image.jpg</span></span></code></pre></div>
<h3 id="copy2">copy2()</h3>
<p>Similar to <code>copy()</code>, but also preserves metadata (timestamps, permissions). This is generally preferred over <code>copy()</code> unless metadata preservation isn’t necessary.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>shutil.copy2(src, dst)</span></code></pre></div>
<ul>
<li><code>src</code>: Path to the source file.</li>
<li><code>dst</code>: Path to the destination file or directory.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>shutil.copy2(<span class="st">"important_file.cfg"</span>, <span class="st">"/tmp/"</span>)</span></code></pre></div>
<h3 id="copytree">copytree()</h3>
<p>Recursively copies an entire directory tree and its contents to a destination. It creates the destination directory if it doesn’t exist. Preserves metadata (using <code>copy2</code> behavior).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>shutil.copytree(src, dst, symlinks<span class="op">=</span><span class="va">False</span>, ignore<span class="op">=</span><span class="va">None</span>, copy_function<span class="op">=&lt;</span>function copy2<span class="op">&gt;</span>, ignore_dangling_symlinks<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<ul>
<li><code>src</code>: Path to the source directory.</li>
<li><code>dst</code>: Path to the destination directory.</li>
<li><code>symlinks</code>: If <code>True</code>, symbolic links are copied as symbolic links (default is <code>False</code>, where they are copied as files).</li>
<li><code>ignore</code>: A function that takes a directory path and returns a list of files/subdirectories to ignore. This is useful for excluding unwanted files from the copy.</li>
<li><code>copy_function</code>: The function used to copy individual files (defaults to <code>copy2</code>).</li>
<li><code>ignore_dangling_symlinks</code>: If <code>True</code>, ignores dangling symbolic links (links pointing to non-existent files/directories).</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>shutil.copytree(<span class="st">"my_project"</span>, <span class="st">"my_project_backup"</span>)</span></code></pre></div>
<h3 id="move">move()</h3>
<p>Moves a file or directory from the source to the destination. If the destination exists and is a file, it will be overwritten. If the destination is a directory, the source will be moved into that directory. Handles cross-device moves.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>shutil.move(src, dst)</span></code></pre></div>
<ul>
<li><code>src</code>: Path to the source file or directory.</li>
<li><code>dst</code>: Path to the destination file or directory.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>shutil.move(<span class="st">"temp_file.dat"</span>, <span class="st">"/data/archive/"</span>)</span></code></pre></div>
<h3 id="rmtree">rmtree()</h3>
<p>Deletes an entire directory tree recursively. Use with caution, as this operation is irreversible.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(path, ignore_errors<span class="op">=</span><span class="va">False</span>, onerror<span class="op">=</span><span class="va">None</span>)</span></code></pre></div>
<ul>
<li><code>path</code>: Path to the directory to be deleted.</li>
<li><code>ignore_errors</code>: If <code>True</code>, errors during deletion are ignored (default is <code>False</code>).</li>
<li><code>onerror</code>: A function that is called when an error occurs during deletion.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(<span class="st">"temp_directory"</span>)  <span class="co">#Deletes temp_directory and all its contents.</span></span></code></pre></div>
<p><strong>Caution:</strong> Always double-check the path before using <code>rmtree()</code> to avoid accidental data loss.</p>
<h2 id="file-and-directory-management">File and Directory Management</h2>
<h3 id="rmtree-deleting-directories-recursively">rmtree(): Deleting directories recursively</h3>
<p>The <code>rmtree()</code> function recursively deletes a directory and all its contents. This is a powerful but potentially dangerous function, so exercise caution. It handles errors differently depending on the <code>ignore_errors</code> and <code>onerror</code> parameters. If <code>ignore_errors</code> is <code>True</code>, errors during deletion are simply ignored (e.g., permission errors). The <code>onerror</code> parameter allows you to specify a custom error handling function.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(path, ignore_errors<span class="op">=</span><span class="va">False</span>, onerror<span class="op">=</span><span class="va">None</span>)</span></code></pre></div>
<ul>
<li><code>path</code>: Path to the directory to remove.</li>
<li><code>ignore_errors</code>: Boolean; if <code>True</code>, ignores errors.</li>
<li><code>onerror</code>: A callable taking (func, path, exc_info) arguments.</li>
</ul>
<h3 id="copytree-copying-directory-trees">copytree(): Copying directory trees</h3>
<p><code>copytree()</code> recursively copies a directory and all its contents to a new location. It preserves metadata (timestamps, permissions) by default, using the <code>copy2()</code> function for individual file copies. It offers options to control how symbolic links are handled and to specify files or directories to ignore.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>shutil.copytree(src, dst, symlinks<span class="op">=</span><span class="va">False</span>, ignore<span class="op">=</span><span class="va">None</span>, copy_function<span class="op">=&lt;</span>function copy2<span class="op">&gt;</span>, ignore_dangling_symlinks<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<ul>
<li><code>src</code>: Source directory path.</li>
<li><code>dst</code>: Destination directory path.</li>
<li><code>symlinks</code>: If <code>True</code>, copies symbolic links as links; otherwise, copies their contents.</li>
<li><code>ignore</code>: A callable that takes a path and returns a list of items to ignore.</li>
<li><code>copy_function</code>: Function used to copy files (defaults to <code>copy2</code>).</li>
<li><code>ignore_dangling_symlinks</code>: If <code>True</code>, ignores broken symlinks.</li>
</ul>
<h3 id="ignore_patterns-in-copytree">ignore_patterns() in copytree()</h3>
<p>The <code>ignore</code> parameter in <code>copytree()</code> can be a callable that takes a directory path and returns a list of patterns to ignore within that directory. For convenience, <code>shutil.ignore_patterns()</code> creates such a callable, allowing you to specify patterns using glob-style matching:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>shutil.copytree(<span class="st">"source_dir"</span>, <span class="st">"dest_dir"</span>, ignore<span class="op">=</span>shutil.ignore_patterns(<span class="st">"*.tmp"</span>, <span class="st">"Thumbs.db"</span>))</span></code></pre></div>
<p>This would ignore all files ending in <code>.tmp</code> and any file named <code>Thumbs.db</code> during the copy.</p>
<h3 id="make_archive-creating-archive-files">make_archive(): Creating archive files</h3>
<p>Creates an archive file (e.g., zip, tar, tar.gz) from a directory. It supports various archive formats.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>shutil.make_archive(base_name, <span class="bu">format</span>, root_dir<span class="op">=</span><span class="va">None</span>, base_dir<span class="op">=</span><span class="va">None</span>, verbose<span class="op">=</span><span class="dv">0</span>, dry_run<span class="op">=</span><span class="dv">0</span>, owner<span class="op">=</span><span class="va">None</span>, group<span class="op">=</span><span class="va">None</span>)</span></code></pre></div>
<ul>
<li><code>base_name</code>: Base name of the archive file (without extension).</li>
<li><code>format</code>: Archive format (‘zip’, ‘tar’, ‘gztar’, ‘bztar’, ‘xztar’).</li>
<li><code>root_dir</code>: Root directory from which relative paths are calculated.</li>
<li><code>base_dir</code>: Directory within <code>root_dir</code> to archive.</li>
<li><code>verbose</code>: Verbosity level.</li>
<li><code>dry_run</code>: If <code>True</code>, simulates the archiving process without actually creating files.</li>
<li><code>owner</code>, <code>group</code>: User and group ownership (Unix-like systems).</li>
</ul>
<h3 id="get_archive_formats-listing-supported-archive-formats">get_archive_formats(): Listing supported archive formats</h3>
<p>Returns a list of archive formats supported by <code>make_archive()</code> and <code>unpack_archive()</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>supported_formats <span class="op">=</span> shutil.get_archive_formats()</span></code></pre></div>
<h3 id="unpack_archive-unpacking-archive-files">unpack_archive(): Unpacking archive files</h3>
<p>Extracts the contents of an archive file. Supports various archive formats. Handles errors gracefully.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>shutil.unpack_archive(filename, extract_dir<span class="op">=</span><span class="va">None</span>, <span class="bu">format</span><span class="op">=</span><span class="va">None</span>)</span></code></pre></div>
<ul>
<li><code>filename</code>: Path to the archive file.</li>
<li><code>extract_dir</code>: Directory to extract files into (defaults to current directory).</li>
<li><code>format</code>: Archive format (auto-detected if not specified).</li>
</ul>
<h3 id="register_archive_format-registering-custom-archive-formats">register_archive_format(): Registering custom archive formats</h3>
<p>Allows you to add support for custom archive formats to <code>make_archive()</code> and <code>unpack_archive()</code>. You provide functions to create and extract archives for your custom format.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>shutil.register_archive_format(<span class="bu">format</span>, function, description)</span></code></pre></div>
<h3 id="disk_usage-checking-disk-usage">disk_usage(): Checking disk usage</h3>
<p>Returns disk usage statistics for a given path. Provides total, used, and free space.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>total, used, free <span class="op">=</span> shutil.disk_usage(path)</span></code></pre></div>
<ul>
<li><code>path</code>: Path to the directory to check.</li>
</ul>
<h3 id="chown-changing-file-ownership-unix-like-systems">chown(): Changing file ownership (Unix-like systems)</h3>
<p>Changes the owner and/or group of a file or directory. Only works on Unix-like systems.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>shutil.chown(path, user<span class="op">=</span><span class="va">None</span>, group<span class="op">=</span><span class="va">None</span>)</span></code></pre></div>
<ul>
<li><code>path</code>: Path to the file or directory.</li>
<li><code>user</code>: New owner (user ID or name).</li>
<li><code>group</code>: New group (group ID or name).</li>
</ul>
<h3 id="which-finding-executable-files">which(): Finding executable files</h3>
<p>Locates an executable file in the system’s PATH environment variable.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>executable_path <span class="op">=</span> shutil.which(<span class="st">"my_program"</span>)</span></code></pre></div>
<ul>
<li>Returns the full path to the executable if found, otherwise <code>None</code>.</li>
</ul>
<h2 id="advanced-usage-and-best-practices">Advanced Usage and Best Practices</h2>
<h3 id="error-handling-and-exception-management">Error Handling and Exception Management</h3>
<p><code>shutil</code> functions can raise exceptions (like <code>shutil.Error</code>, <code>IOError</code>, <code>OSError</code>, etc.) if operations fail (e.g., insufficient permissions, file not found). Always wrap <code>shutil</code> calls in <code>try...except</code> blocks to handle potential errors gracefully:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    shutil.copytree(<span class="st">"source"</span>, <span class="st">"destination"</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> shutil.Error <span class="im">as</span> e:</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Error copying directory: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">OSError</span> <span class="im">as</span> e:</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Operating system error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e: <span class="co"># Catch other unexpected errors</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"An unexpected error occurred: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>Be specific in your <code>except</code> blocks to catch the relevant exceptions and handle them appropriately. Logging errors is crucial for debugging.</p>
<h3 id="handling-permissions-and-access-control">Handling Permissions and Access Control</h3>
<p>Ensure your script has the necessary permissions to perform operations on files and directories. Problems often arise from insufficient read, write, or execute permissions. You might need to use <code>os.chmod()</code> before using <code>shutil</code> to adjust permissions. If errors occur due to permissions, handle them using error handling (as shown in the previous section) and inform the user accordingly.</p>
<h3 id="optimizing-shutil-for-large-files-and-directories">Optimizing shutil for large files and directories</h3>
<p>For extremely large files or directories, the default <code>shutil</code> operations might be slow. Consider these optimizations:</p>
<ul>
<li><strong>Chunking:</strong> For copying large files, use a buffer to copy data in chunks instead of all at once. This reduces memory usage and might increase performance, especially over network file systems.</li>
<li><strong>Parallelism:</strong> For copying multiple files or directories, explore using multiprocessing or threading to perform operations concurrently, potentially reducing overall processing time. Libraries such as <code>multiprocessing</code> can be combined with <code>shutil</code>.</li>
<li><strong>Specialized Libraries:</strong> For very large-scale operations or specific requirements (e.g., highly efficient file transfers over networks), consider specialized libraries such as <code>rsync</code> (often wrapped in a Python library).</li>
</ul>
<h3 id="working-with-symbolic-links">Working with symbolic links</h3>
<p><code>shutil</code> handles symbolic links differently depending on the function. <code>copytree()</code> has the <code>symlinks</code> parameter to control whether links are copied as links or as the target files. Other functions might follow system defaults or raise errors depending on the link’s status. Always check how a specific function interacts with symbolic links in its documentation. Ensure that your handling of symbolic links is robust and that it addresses potential security vulnerabilities (see Security Considerations).</p>
<h3 id="using-shutil-with-different-file-systems">Using shutil with different file systems</h3>
<p><code>shutil</code> generally strives for cross-platform compatibility but might behave differently depending on the underlying file system (e.g., NTFS, ext4, network shares). Be aware that certain operations (like setting extended attributes or specific permissions) might not be portable across all file systems. Thorough testing on your target systems is essential.</p>
<h3 id="security-considerations">Security Considerations</h3>
<ul>
<li><strong>Input Validation:</strong> Carefully validate all file paths passed to <code>shutil</code> functions to prevent directory traversal attacks. Never directly use user-supplied input without proper sanitization.</li>
<li><strong>Permission Checks:</strong> Verify that your script has the necessary permissions before performing operations. Avoid accidentally giving unintended access to sensitive files.</li>
<li><strong><code>rmtree()</code> Caution:</strong> Use <code>rmtree()</code> extremely carefully. Always double-check the target path and consider adding safeguards (like confirmations or logging) to prevent accidental deletion of critical directories.</li>
<li><strong>Symbolic Links:</strong> Be mindful of symbolic links. Malicious symbolic links might lead to unintended file access or modification. Implement thorough checks and validation to mitigate these risks.</li>
</ul>
<h3 id="common-pitfalls-and-troubleshooting">Common Pitfalls and Troubleshooting</h3>
<ul>
<li><strong>Incorrect Paths:</strong> The most frequent problem is using incorrect file paths. Double-check paths for typos, absolute vs.&nbsp;relative paths, and proper separators (<code>/</code> or <code>\</code> depending on the system).</li>
<li><strong>Permissions Errors:</strong> Insufficient permissions frequently lead to errors. Ensure your script has the necessary read and write access to all involved files and directories.</li>
<li><strong>Overwriting Files:</strong> Many <code>shutil</code> functions overwrite existing files without warning. Implement checks or use alternative approaches if overwriting needs to be avoided.</li>
<li><strong>Unexpected Exceptions:</strong> Handle exceptions gracefully. Use <code>try...except</code> blocks and log errors for debugging. Pay close attention to the error messages for clues.</li>
<li><strong>Large Files/Directories:</strong> For very large files or directories, consider optimizations as described earlier to improve performance and resource utilization.</li>
</ul>
<h2 id="examples-and-use-cases">Examples and Use Cases</h2>
<h3 id="basic-file-copying">Basic file copying</h3>
<p>This example demonstrates basic file copying using <code>shutil.copyfile()</code>. Note that metadata (like timestamps) is <em>not</em> preserved.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dummy file</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"source_file.txt"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"This is some text."</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>shutil.copyfile(<span class="st">"source_file.txt"</span>, <span class="st">"destination_file.txt"</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"File 'source_file.txt' copied to 'destination_file.txt'"</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>os.remove(<span class="st">"source_file.txt"</span>) <span class="co">#Clean up</span></span></code></pre></div>
<h3 id="copying-with-metadata-preservation">Copying with metadata preservation</h3>
<p>This example uses <code>shutil.copy2()</code> to copy a file while preserving metadata.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dummy file</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"source_file.txt"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"This is some text."</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Get the creation time for demonstration</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>creation_time <span class="op">=</span> os.path.getctime(<span class="st">"source_file.txt"</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>shutil.copy2(<span class="st">"source_file.txt"</span>, <span class="st">"destination_file2.txt"</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"File 'source_file.txt' copied to 'destination_file2.txt' with metadata."</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Original creation time: </span><span class="sc">{</span>time<span class="sc">.</span>ctime(creation_time)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Copied file creation time: </span><span class="sc">{</span>time<span class="sc">.</span>ctime(os.path.getctime(<span class="st">'destination_file2.txt'</span>))<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>os.remove(<span class="st">"source_file.txt"</span>) <span class="co">#Clean up</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>os.remove(<span class="st">"destination_file2.txt"</span>) <span class="co">#Clean up</span></span></code></pre></div>
<h3 id="creating-and-extracting-zip-archives">Creating and extracting zip archives</h3>
<p>This example demonstrates creating and extracting zip archives.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> zipfile</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a directory and a file for demonstration</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>os.makedirs(<span class="st">"my_directory"</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"my_directory/my_file.txt"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"Hello, world!"</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>shutil.make_archive(<span class="st">"my_archive"</span>, <span class="st">'zip'</span>, <span class="st">"my_directory"</span>)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Zip archive created: my_archive.zip"</span>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>shutil.unpack_archive(<span class="st">"my_archive.zip"</span>, <span class="st">"extracted_directory"</span>)</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Zip archive extracted to extracted_directory"</span>)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(<span class="st">"my_directory"</span>)</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>os.remove(<span class="st">"my_archive.zip"</span>)</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(<span class="st">"extracted_directory"</span>)</span></code></pre></div>
<h3 id="moving-files-and-directories">Moving files and directories</h3>
<p>This example shows moving a file and a directory.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy file and directory</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>os.makedirs(<span class="st">"my_dir"</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"my_file.txt"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"Some content."</span>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>shutil.move(<span class="st">"my_file.txt"</span>, <span class="st">"my_dir/"</span>)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"'my_file.txt' moved to 'my_dir'"</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>shutil.move(<span class="st">"my_dir"</span>, <span class="st">"moved_dir"</span>) <span class="co"># Move the whole directory</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"'my_dir' moved to 'moved_dir'"</span>)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(<span class="st">"moved_dir"</span>) <span class="co">#Clean up</span></span></code></pre></div>
<h3 id="deleting-directories-and-their-contents">Deleting directories and their contents</h3>
<p>This example deletes a directory and its contents recursively using <code>shutil.rmtree()</code>. <strong>Use with extreme caution!</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dummy directory and file</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>os.makedirs(<span class="st">"dir_to_delete/subdir"</span>, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"dir_to_delete/file1.txt"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"Some text"</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(<span class="st">"dir_to_delete"</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"'dir_to_delete' and its contents deleted."</span>)</span></code></pre></div>
<h3 id="real-world-application-examples">Real-world application examples</h3>
<ul>
<li><strong>Backup scripts:</strong> Use <code>shutil.copytree()</code> or <code>shutil.make_archive()</code> to create backups of directories or files. Implement proper error handling and logging.</li>
<li><strong>Deployment tools:</strong> Use <code>shutil.copytree()</code> and <code>shutil.move()</code> to deploy files and directories to different locations.</li>
<li><strong>File management utilities:</strong> Create command-line tools that use <code>shutil</code> for file copying, moving, and deletion.</li>
<li><strong>Data processing pipelines:</strong> Use <code>shutil</code> functions to manage temporary files and directories within data processing workflows. Ensure that temporary files are cleaned up correctly.</li>
<li><strong>Software installers:</strong> <code>shutil</code> can be used within installers to copy files and create directories during the installation process. Error handling is critical in this context.</li>
</ul>
<p>Remember that robust error handling and input validation are crucial for all real-world applications. Always handle potential exceptions and avoid security vulnerabilities.</p>
<h2 id="reference">Reference</h2>
<h3 id="module-functions-alphabetical-listing-with-detailed-explanations-and-examples-for-each-function.">Module functions: Alphabetical Listing with detailed explanations and examples for each function.</h3>
<p>This section provides an alphabetical listing of the functions in the <code>shutil</code> module, along with detailed explanations and examples. Note that the full functionality and nuances of each function may require consulting the official Python documentation for the most up-to-date and complete information.</p>
<p><strong>1. <code>copyfile(src, dst[, *, follow_symlinks=True])</code></strong></p>
<p>Copies the contents of the source file (<code>src</code>) to the destination file (<code>dst</code>). Overwrites <code>dst</code> if it exists. Does <em>not</em> preserve metadata (timestamps, permissions). <code>follow_symlinks</code> controls whether symbolic links are followed (default is <code>True</code>).</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>shutil.copyfile(<span class="st">"my_file.txt"</span>, <span class="st">"my_copy.txt"</span>)</span></code></pre></div>
<p><strong>2. <code>copyfileobj(fsrc, fdst[, length=16384])</code></strong></p>
<p>Copies data from file-like object <code>fsrc</code> to file-like object <code>fdst</code>, in chunks of size <code>length</code> (default 16KB). Useful for efficient copying of large files.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"source.txt"</span>, <span class="st">"rb"</span>) <span class="im">as</span> fsrc, <span class="bu">open</span>(<span class="st">"destination.txt"</span>, <span class="st">"wb"</span>) <span class="im">as</span> fdst:</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    shutil.copyfileobj(fsrc, fdst)</span></code></pre></div>
<p><strong>3. <code>copymode(src, dst)</code></strong></p>
<p>Copies the file mode (permissions) from <code>src</code> to <code>dst</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>shutil.copymode(<span class="st">"source.txt"</span>, <span class="st">"destination.txt"</span>)</span></code></pre></div>
<p><strong>4. <code>copystat(src, dst)</code></strong></p>
<p>Copies all file metadata (mode, access/modification times) from <code>src</code> to <code>dst</code>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>shutil.copystat(<span class="st">"source.txt"</span>, <span class="st">"destination.txt"</span>)</span></code></pre></div>
<p><strong>5. <code>copytree(src, dst[, symlinks=False, ignore=None, copy_function=&lt;function copy2&gt;, ignore_dangling_symlinks=False])</code></strong></p>
<p>Recursively copies a directory tree from <code>src</code> to <code>dst</code>. Preserves metadata. <code>symlinks</code> controls symbolic link handling. <code>ignore</code> is a callable that filters files/directories. <code>copy_function</code> specifies the function used to copy individual files (default: <code>copy2</code>). <code>ignore_dangling_symlinks</code> controls handling of broken symlinks.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>shutil.copytree(<span class="st">"my_directory"</span>, <span class="st">"my_backup"</span>)</span></code></pre></div>
<p><strong>6. <code>copy(src, dst)</code></strong></p>
<p>Copies <code>src</code> to <code>dst</code>. Handles files and symbolic links. If <code>dst</code> is a directory, the file is copied into that directory. Does not preserve metadata.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>shutil.copy(<span class="st">"myfile.txt"</span>, <span class="st">"backup_dir/"</span>)</span></code></pre></div>
<p><strong>7. <code>copy2(src, dst)</code></strong></p>
<p>Similar to <code>copy()</code>, but preserves metadata (timestamps, permissions).</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>shutil.copy2(<span class="st">"important_file.txt"</span>, <span class="st">"backup_dir/"</span>)</span></code></pre></div>
<p><strong>8. <code>disk_usage(path)</code></strong></p>
<p>Returns disk usage statistics (total, used, free) for the given path.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>total, used, free <span class="op">=</span> shutil.disk_usage(<span class="st">"."</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Disk usage: Total=</span><span class="sc">{</span>total<span class="sc">}</span><span class="ss">, Used=</span><span class="sc">{</span>used<span class="sc">}</span><span class="ss">, Free=</span><span class="sc">{</span>free<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p><strong>9. <code>get_archive_formats()</code></strong></p>
<p>Returns a list of supported archive formats.</p>
<p><strong>10. <code>make_archive(base_name, format[, root_dir=None, base_dir=None, verbose=0, dry_run=0, owner=None, group=None])</code></strong></p>
<p>Creates an archive file (zip, tar, etc.) from the given directory. Requires a specified <code>format</code> (e.g., ‘zip’, ‘tar’, ‘gztar’).</p>
<p><strong>11. <code>move(src, dst)</code></strong></p>
<p>Moves a file or directory from <code>src</code> to <code>dst</code>. Handles cross-device moves.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>shutil.move(<span class="st">"my_file.txt"</span>, <span class="st">"/tmp/my_file.txt"</span>)</span></code></pre></div>
<p><strong>12. <code>register_archive_format(format, function, description)</code></strong></p>
<p>Registers a custom archive format handler.</p>
<p><strong>13. <code>rmtree(path[, ignore_errors=False, onerror=None])</code></strong></p>
<p>Recursively deletes a directory tree. Use with extreme caution! <code>ignore_errors</code> controls error handling. <code>onerror</code> allows specification of a custom error handler.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(<span class="st">"temp_dir"</span>) <span class="co"># Be VERY careful using this!</span></span></code></pre></div>
<p><strong>14. <code>unpack_archive(filename[, extract_dir=None, format=None])</code></strong></p>
<p>Extracts an archive file to the specified directory. <code>format</code> can be specified or auto-detected.</p>
<p><strong>15. <code>chown(path, user=None, group=None)</code></strong></p>
<p>Changes ownership (user/group) of a file or directory. Only available on Unix-like systems.</p>
<p><strong>16. <code>which(cmd[, mode=os.F_OK | os.X_OK])</code></strong></p>
<p>Locates an executable file in the system’s PATH.</p>
<p><strong>17. <code>ignore_patterns(*patterns)</code></strong></p>
<p>Creates an ignore function for use with <code>copytree()</code> to exclude files matching specified patterns.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>shutil.copytree(<span class="st">"source"</span>, <span class="st">"dest"</span>, ignore<span class="op">=</span>shutil.ignore_patterns(<span class="st">"*.tmp"</span>, <span class="st">"Thumbs.db"</span>))</span></code></pre></div>
<p>This reference provides a concise overview. Always refer to the official Python documentation for the most complete and up-to-date information, including detailed explanations of parameters, return values, and potential exceptions for each function.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>