<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>sqlite3 - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id="></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="../../favicon.ico">
<meta property="og:title" content="sqlite3 - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">sqlite3 - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-sqlite3" id="toc-what-is-sqlite3">What is SQLite3?</a></li>
  <li><a href="#why-use-sqlite3-with-python" id="toc-why-use-sqlite3-with-python">Why use SQLite3 with Python?</a></li>
  <li><a href="#setting-up-your-environment" id="toc-setting-up-your-environment">Setting up your environment</a></li>
  <li><a href="#installing-the-sqlite3-module" id="toc-installing-the-sqlite3-module">Installing the sqlite3 module</a></li>
  <li><a href="#connecting-to-a-sqlite3-database" id="toc-connecting-to-a-sqlite3-database">Connecting to a SQLite3 Database</a>
  <ul>
  <li><a href="#establishing-a-connection" id="toc-establishing-a-connection">Establishing a connection</a></li>
  <li><a href="#specifying-database-location" id="toc-specifying-database-location">Specifying database location</a></li>
  <li><a href="#error-handling-during-connection" id="toc-error-handling-during-connection">Error handling during connection</a></li>
  <li><a href="#connection-objects-and-methods" id="toc-connection-objects-and-methods">Connection objects and methods</a></li>
  </ul></li>
  <li><a href="#creating-and-managing-tables" id="toc-creating-and-managing-tables">Creating and Managing Tables</a>
  <ul>
  <li><a href="#creating-tables-with-create-table" id="toc-creating-tables-with-create-table">Creating tables with <code>CREATE TABLE</code></a></li>
  <li><a href="#data-types-in-sqlite3" id="toc-data-types-in-sqlite3">Data types in SQLite3</a></li>
  <li><a href="#adding-constraints-primary-keys-foreign-keys-etc." id="toc-adding-constraints-primary-keys-foreign-keys-etc.">Adding constraints (primary keys, foreign keys, etc.)</a></li>
  <li><a href="#altering-tables-with-alter-table" id="toc-altering-tables-with-alter-table">Altering tables with <code>ALTER TABLE</code></a></li>
  <li><a href="#deleting-tables-with-drop-table" id="toc-deleting-tables-with-drop-table">Deleting tables with <code>DROP TABLE</code></a></li>
  </ul></li>
  <li><a href="#inserting-data-into-tables" id="toc-inserting-data-into-tables">Inserting Data into Tables</a>
  <ul>
  <li><a href="#using-insert-into-statements" id="toc-using-insert-into-statements">Using <code>INSERT INTO</code> statements</a></li>
  <li><a href="#inserting-multiple-rows" id="toc-inserting-multiple-rows">Inserting multiple rows</a></li>
  <li><a href="#handling-data-types-during-insertion" id="toc-handling-data-types-during-insertion">Handling data types during insertion</a></li>
  <li><a href="#using-parameterized-queries-to-prevent-sql-injection" id="toc-using-parameterized-queries-to-prevent-sql-injection">Using parameterized queries to prevent SQL injection</a></li>
  </ul></li>
  <li><a href="#retrieving-data-from-tables" id="toc-retrieving-data-from-tables">Retrieving Data from Tables</a>
  <ul>
  <li><a href="#using-select-statements" id="toc-using-select-statements">Using <code>SELECT</code> statements</a></li>
  <li><a href="#filtering-data-with-where-clauses" id="toc-filtering-data-with-where-clauses">Filtering data with <code>WHERE</code> clauses</a></li>
  <li><a href="#sorting-data-with-order-by" id="toc-sorting-data-with-order-by">Sorting data with <code>ORDER BY</code></a></li>
  <li><a href="#limiting-results-with-limit" id="toc-limiting-results-with-limit">Limiting results with <code>LIMIT</code></a></li>
  <li><a href="#working-with-joins" id="toc-working-with-joins">Working with joins</a></li>
  <li><a href="#using-aggregate-functions-count-sum-avg-etc." id="toc-using-aggregate-functions-count-sum-avg-etc.">Using aggregate functions (COUNT, SUM, AVG, etc.)</a></li>
  </ul></li>
  <li><a href="#updating-and-deleting-data" id="toc-updating-and-deleting-data">Updating and Deleting Data</a>
  <ul>
  <li><a href="#updating-data-with-update-statements" id="toc-updating-data-with-update-statements">Updating data with <code>UPDATE</code> statements</a></li>
  <li><a href="#deleting-data-with-delete-statements" id="toc-deleting-data-with-delete-statements">Deleting data with <code>DELETE</code> statements</a></li>
  <li><a href="#using-where-clauses-for-selective-updates-and-deletes" id="toc-using-where-clauses-for-selective-updates-and-deletes">Using <code>WHERE</code> clauses for selective updates and deletes</a></li>
  </ul></li>
  <li><a href="#transactions-and-concurrency" id="toc-transactions-and-concurrency">Transactions and Concurrency</a>
  <ul>
  <li><a href="#managing-transactions-with-begin-commit-and-rollback" id="toc-managing-transactions-with-begin-commit-and-rollback">Managing transactions with <code>BEGIN</code>, <code>COMMIT</code>, and <code>ROLLBACK</code></a></li>
  <li><a href="#understanding-transaction-isolation-levels" id="toc-understanding-transaction-isolation-levels">Understanding transaction isolation levels</a></li>
  <li><a href="#concurrency-control-in-sqlite3" id="toc-concurrency-control-in-sqlite3">Concurrency control in SQLite3</a></li>
  </ul></li>
  <li><a href="#advanced-techniques" id="toc-advanced-techniques">Advanced Techniques</a>
  <ul>
  <li><a href="#using-views" id="toc-using-views">Using views</a></li>
  <li><a href="#working-with-indexes" id="toc-working-with-indexes">Working with indexes</a></li>
  <li><a href="#triggers-and-stored-procedures" id="toc-triggers-and-stored-procedures">Triggers and stored procedures</a></li>
  <li><a href="#using-sqlite3-with-other-python-libraries-e.g.-pandas" id="toc-using-sqlite3-with-other-python-libraries-e.g.-pandas">Using SQLite3 with other Python libraries (e.g., Pandas)</a></li>
  </ul></li>
  <li><a href="#error-handling-and-debugging" id="toc-error-handling-and-debugging">Error Handling and Debugging</a>
  <ul>
  <li><a href="#common-sqlite3-errors" id="toc-common-sqlite3-errors">Common SQLite3 errors</a></li>
  <li><a href="#using-exception-handling" id="toc-using-exception-handling">Using exception handling</a></li>
  <li><a href="#debugging-sqlite3-applications" id="toc-debugging-sqlite3-applications">Debugging SQLite3 applications</a></li>
  </ul></li>
  <li><a href="#security-considerations" id="toc-security-considerations">Security Considerations</a>
  <ul>
  <li><a href="#preventing-sql-injection" id="toc-preventing-sql-injection">Preventing SQL injection</a></li>
  <li><a href="#data-sanitization" id="toc-data-sanitization">Data sanitization</a></li>
  <li><a href="#secure-database-configurations" id="toc-secure-database-configurations">Secure database configurations</a></li>
  </ul></li>
  <li><a href="#appendix-sqlite3-command-line-interface" id="toc-appendix-sqlite3-command-line-interface">Appendix: SQLite3 Command-Line Interface</a>
  <ul>
  <li><a href="#accessing-the-command-line-shell" id="toc-accessing-the-command-line-shell">Accessing the command-line shell</a></li>
  <li><a href="#common-commands" id="toc-common-commands">Common commands</a></li>
  <li><a href="#useful-tips-and-tricks" id="toc-useful-tips-and-tricks">Useful tips and tricks</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-sqlite3">What is SQLite3?</h3>
<p>SQLite is a C-language library that provides a lightweight, self-contained, serverless, zero-configuration SQL database engine. It’s embedded directly into your application, meaning no separate database server process needs to be running. SQLite3 is the Python interface to this library. Data is stored in a single file on the disk, simplifying deployment and management compared to client-server database systems like MySQL or PostgreSQL. Despite its simplicity, it supports most standard SQL commands and is surprisingly powerful for many applications.</p>
<h3 id="why-use-sqlite3-with-python">Why use SQLite3 with Python?</h3>
<p>SQLite3 offers several compelling advantages when used with Python:</p>
<ul>
<li><strong>Ease of Use:</strong> The Python <code>sqlite3</code> module provides a straightforward and intuitive API for interacting with SQLite databases. It’s relatively easy to learn, even for developers with limited database experience.</li>
<li><strong>Simplicity and Portability:</strong> SQLite’s self-contained nature makes it exceptionally portable. You can easily distribute your application without worrying about setting up and configuring a separate database server. The database file is just another file included with your application.</li>
<li><strong>Speed and Efficiency:</strong> For many applications, especially those with smaller datasets, SQLite’s speed is more than adequate. Its file-based architecture can often lead to faster read/write operations compared to network-based database systems.</li>
<li><strong>Suitable for Desktop Applications and Prototyping:</strong> SQLite3 is an ideal choice for desktop applications, prototyping, and smaller projects where a full-blown database server is overkill.</li>
<li><strong>Transactions and ACID Properties:</strong> It fully supports transactions ensuring data integrity (ACID properties: Atomicity, Consistency, Isolation, Durability).</li>
</ul>
<h3 id="setting-up-your-environment">Setting up your environment</h3>
<p>Before you can start using SQLite3 with Python, ensure you have a suitable Python environment set up. This typically involves:</p>
<ol type="1">
<li><p><strong>Python Installation:</strong> Make sure you have Python installed on your system. You can download the latest version from <a href="https://www.python.org/">https://www.python.org/</a>.</p></li>
<li><p><strong>Suitable IDE or Text Editor:</strong> Choose a suitable Integrated Development Environment (IDE) like PyCharm, VS Code, or a simple text editor like Sublime Text or Atom. These provide features like code highlighting, debugging, and intelligent code completion which significantly improve the development experience.</p></li>
</ol>
<h3 id="installing-the-sqlite3-module">Installing the sqlite3 module</h3>
<p>The <code>sqlite3</code> module is usually included with standard Python distributions. Therefore, you generally don’t need to install it separately. However, if for some reason it’s missing, you can try reinstalling Python or using your system’s package manager (e.g., <code>apt-get install python3-sqlite</code> on Debian/Ubuntu, <code>yum install python3-sqlite</code> on CentOS/RHEL). In most cases, simply importing it in your Python code will confirm whether it’s available:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If no error occurs, sqlite3 is installed and ready to use.</span></span></code></pre></div>
<p>If an <code>ImportError</code> occurs, you will need to install the sqlite3 module using your system’s package manager or reinstall Python.</p>
<h2 id="connecting-to-a-sqlite3-database">Connecting to a SQLite3 Database</h2>
<h3 id="establishing-a-connection">Establishing a connection</h3>
<p>The first step in using SQLite3 with Python is establishing a connection to the database. This is done using the <code>connect()</code> function from the <code>sqlite3</code> module. If the database file doesn’t exist, SQLite will create it automatically.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    connection <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>)  <span class="co"># Creates or connects to mydatabase.db</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Connection successful!"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> sqlite3.Error <span class="im">as</span> e:</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"An error occurred: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>This code attempts to connect to a database file named <code>mydatabase.db</code> in the same directory as your Python script. The <code>try...except</code> block handles potential errors during the connection process.</p>
<h3 id="specifying-database-location">Specifying database location</h3>
<p>You can specify the full path to the database file if it’s not located in the same directory as your script. For instance, to connect to a database file in a different folder:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>db_path <span class="op">=</span> os.path.join(os.path.expanduser(<span class="st">"~"</span>), <span class="st">"Documents"</span>, <span class="st">"mydatabase.db"</span>) <span class="co">#Example for a path in the user's documents</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    connection <span class="op">=</span> sqlite3.<span class="ex">connect</span>(db_path)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Connection successful!"</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> sqlite3.Error <span class="im">as</span> e:</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"An error occurred: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>This example uses <code>os.path.join</code> to construct a platform-independent path and <code>os.path.expanduser("~")</code> to get the user’s home directory, ensuring the code works across different operating systems. Remember to replace <code>"Documents"</code> and <code>"mydatabase.db"</code> with your desired location and filename. Always use absolute paths or paths relative to your script location for robust code.</p>
<h3 id="error-handling-during-connection">Error handling during connection</h3>
<p>Error handling is crucial when connecting to a database. Various issues can prevent a successful connection, including:</p>
<ul>
<li><strong>File not found:</strong> The database file doesn’t exist at the specified location.</li>
<li><strong>Permission errors:</strong> Your application lacks the necessary permissions to read or write to the file.</li>
<li><strong>Database corruption:</strong> The database file might be corrupted or damaged.</li>
</ul>
<p>The <code>try...except</code> block shown in the previous examples is the standard way to handle these errors. The <code>sqlite3.Error</code> exception catches a broad range of database-related errors. More specific exception types are available if you need to handle different error scenarios individually. For example, checking for <code>sqlite3.OperationalError</code> can pinpoint connection issues more accurately.</p>
<h3 id="connection-objects-and-methods">Connection objects and methods</h3>
<p>The <code>sqlite3.connect()</code> function returns a <code>Connection</code> object. This object represents your active connection to the database and provides methods for interacting with it. Important methods include:</p>
<ul>
<li><strong><code>cursor()</code>:</strong> Creates a <code>Cursor</code> object, which is used to execute SQL queries.</li>
<li><strong><code>commit()</code>:</strong> Saves changes made during a transaction to the database.</li>
<li><strong><code>rollback()</code>:</strong> Undoes changes made during a transaction if an error occurs.</li>
<li><strong><code>close()</code>:</strong> Closes the connection to the database. It’s crucial to close the connection when finished to release resources.</li>
</ul>
<p>It is considered best practice to utilize a <code>with</code> statement to ensure the database connection is closed automatically even if errors occur:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>db_path <span class="op">=</span> <span class="st">'mydatabase.db'</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(db_path) <span class="im">as</span> connection:</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform database operations here using the cursor</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"SELECT SQLITE_VERSION()"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> cursor.fetchone()</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"SQLite version: </span><span class="sc">{</span>data[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Connection is automatically closed when exiting the 'with' block</span></span></code></pre></div>
<p>This ensures the connection is properly closed, preventing resource leaks and potential data corruption. Remember to replace <code>'mydatabase.db'</code> with your actual database path.</p>
<h2 id="creating-and-managing-tables">Creating and Managing Tables</h2>
<h3 id="creating-tables-with-create-table">Creating tables with <code>CREATE TABLE</code></h3>
<p>Tables are created using the <code>CREATE TABLE</code> SQL statement. This statement defines the table’s name, columns, and their data types. Here’s a basic example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">'''</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">        CREATE TABLE IF NOT EXISTS users (</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">            id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">            username TEXT UNIQUE NOT NULL,</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="st">            email TEXT</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="st">        )</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="st">    '''</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    connection.commit()  <span class="co"># Important: Commit changes to save the table</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Table 'users' created successfully (or already exists)."</span>)</span></code></pre></div>
<p>This code creates a table named <code>users</code> with three columns: <code>id</code> (an integer primary key that auto-increments), <code>username</code> (a unique, non-null text field), and <code>email</code> (a text field that can be NULL). The <code>IF NOT EXISTS</code> clause prevents an error if the table already exists. Always commit changes after executing DDL (Data Definition Language) statements like <code>CREATE TABLE</code>.</p>
<h3 id="data-types-in-sqlite3">Data types in SQLite3</h3>
<p>SQLite has a relatively flexible type system. While it nominally supports several data types, it generally stores everything as a text, integer, real, blob, or NULL value internally. The declared types mostly serve as hints and constraints rather than strictly enforced types. Commonly used data types include:</p>
<ul>
<li><strong>INTEGER:</strong> For integer values.</li>
<li><strong>REAL:</strong> For floating-point numbers.</li>
<li><strong>TEXT:</strong> For strings.</li>
<li><strong>BLOB:</strong> For binary data.</li>
<li><strong>NUMERIC:</strong> Similar to REAL, often used for improved precision.</li>
<li><strong>BOOLEAN:</strong> Although not a direct type, integers 0 (false) and 1 (true) are commonly used to represent boolean values.</li>
</ul>
<h3 id="adding-constraints-primary-keys-foreign-keys-etc.">Adding constraints (primary keys, foreign keys, etc.)</h3>
<p>Constraints ensure data integrity. Common constraints include:</p>
<ul>
<li><strong>PRIMARY KEY:</strong> Uniquely identifies each row in the table. Often auto-incrementing (<code>AUTOINCREMENT</code>) for convenience.</li>
<li><strong>UNIQUE:</strong> Ensures that all values in a column are unique.</li>
<li><strong>NOT NULL:</strong> Prevents null values in a column.</li>
<li><strong>FOREIGN KEY:</strong> Creates a link between tables, enforcing referential integrity. This requires defining a foreign key column that references the primary key of another table.</li>
<li><strong>CHECK:</strong> Allows specifying a condition that must be met for each row.</li>
<li><strong>DEFAULT:</strong> Specifies a default value for a column if no value is provided during insertion.</li>
</ul>
<p>Example with Foreign Key:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">'''</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="st">        CREATE TABLE IF NOT EXISTS orders (</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="st">            id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="st">            user_id INTEGER NOT NULL,</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="st">            order_date TEXT,</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="st">            FOREIGN KEY (user_id) REFERENCES users(id)</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="st">        )</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="st">    '''</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Table 'orders' created successfully (or already exists)."</span>)</span></code></pre></div>
<p>Here, <code>user_id</code> in the <code>orders</code> table is a foreign key referencing the <code>id</code> column in the <code>users</code> table.</p>
<h3 id="altering-tables-with-alter-table">Altering tables with <code>ALTER TABLE</code></h3>
<p>The <code>ALTER TABLE</code> statement modifies existing tables. SQLite supports adding new columns using <code>ALTER TABLE ... ADD COLUMN</code>, but it has limitations compared to other database systems. It does <em>not</em> directly support altering column data types or removing columns without recreating the table.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"ALTER TABLE users ADD COLUMN last_login TEXT"</span>) <span class="co">#Adding a new column</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Added 'last_login' column to 'users' table."</span>)</span></code></pre></div>
<p>To modify other aspects (like data type changes or removing columns), you typically need to create a new table with the desired structure, copy the data, and then drop the old table.</p>
<h3 id="deleting-tables-with-drop-table">Deleting tables with <code>DROP TABLE</code></h3>
<p>The <code>DROP TABLE</code> statement removes a table and all its data. Use with caution!</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"DROP TABLE IF EXISTS users"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Table 'users' dropped successfully (if it existed)."</span>)</span></code></pre></div>
<p>The <code>IF EXISTS</code> clause prevents an error if the table doesn’t exist. Remember that dropping a table is a destructive operation; the data will be permanently lost.</p>
<h2 id="inserting-data-into-tables">Inserting Data into Tables</h2>
<h3 id="using-insert-into-statements">Using <code>INSERT INTO</code> statements</h3>
<p>The <code>INSERT INTO</code> statement adds new rows to a table. The basic syntax is:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> table_name (column1, column2, <span class="op">..</span>.)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">VALUES</span> (value1, value2, <span class="op">..</span>.);</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"INSERT INTO users (username, email) VALUES ('john.doe', 'john.doe@example.com')"</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Row inserted successfully."</span>)</span></code></pre></div>
<p>This inserts a new row into the <code>users</code> table with the specified username and email. If a column is omitted from the column list, you must provide a value for every column, unless it has a default value defined. If you omit the column list entirely, values must be supplied in the same order as the columns are defined in the table.</p>
<h3 id="inserting-multiple-rows">Inserting multiple rows</h3>
<p>You can insert multiple rows using a single <code>INSERT INTO</code> statement by providing multiple <code>VALUES</code> clauses:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    cursor.executemany(<span class="st">"INSERT INTO users (username, email) VALUES (?, ?)"</span>, [</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        (<span class="st">'jane.doe'</span>, <span class="st">'jane.doe@example.com'</span>),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        (<span class="st">'peter.pan'</span>, <span class="st">'peter.pan@example.com'</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Multiple rows inserted successfully."</span>)</span></code></pre></div>
<p>The <code>executemany()</code> method is used here, which is more efficient than executing multiple individual <code>execute()</code> calls. Note the use of placeholders (<code>?</code>), explained further in the section on parameterized queries.</p>
<h3 id="handling-data-types-during-insertion">Handling data types during insertion</h3>
<p>Ensure that the data types of the values you insert match the data types of the corresponding columns in your table. SQLite’s type system is flexible, but mismatched types can lead to unexpected behavior or errors (e.g., attempting to insert text into an integer column). Explicit type conversion might be needed in some cases. For example, if you have a column defined as <code>INTEGER</code> and want to insert a number stored as a string, ensure to convert the string to an integer before insertion:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>user_id_str <span class="op">=</span> <span class="st">"123"</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>user_id_int <span class="op">=</span> <span class="bu">int</span>(user_id_str)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"INSERT INTO users (id, username) VALUES (?, ?)"</span>, (user_id_int, <span class="st">'user123'</span>)) <span class="co">#Note use of integer here</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span></code></pre></div>
<p>Always validate and sanitize data before inserting it into your database.</p>
<h3 id="using-parameterized-queries-to-prevent-sql-injection">Using parameterized queries to prevent SQL injection</h3>
<p>Parameterized queries are crucial for preventing SQL injection vulnerabilities. Instead of directly embedding user-supplied data into SQL strings, you use placeholders (typically <code>?</code> in Python’s <code>sqlite3</code> module). The database driver then safely substitutes the values, preventing malicious code from being executed.</p>
<p><strong>Insecure (vulnerable to SQL injection):</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>username <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Enter username: "</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>cursor.execute(<span class="ss">f"INSERT INTO users (username) VALUES ('</span><span class="sc">{</span>username<span class="sc">}</span><span class="ss">')"</span>) <span class="co">#Highly vulnerable</span></span></code></pre></div>
<p><strong>Secure (using parameterized queries):</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>username <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Enter username: "</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>cursor.execute(<span class="st">"INSERT INTO users (username) VALUES (?)"</span>, (username,))  <span class="co">#Secure</span></span></code></pre></div>
<p>The parameterized version uses a placeholder (<code>?</code>) and passes the <code>username</code> as a separate parameter. This prevents any user-supplied input from being interpreted as SQL code. Always use parameterized queries to protect your database against SQL injection attacks. The trailing comma in <code>(username,)</code> is important; it creates a tuple, which is the required argument type for <code>execute()</code>.</p>
<h2 id="retrieving-data-from-tables">Retrieving Data from Tables</h2>
<h3 id="using-select-statements">Using <code>SELECT</code> statements</h3>
<p>The <code>SELECT</code> statement retrieves data from one or more tables. The basic syntax is:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column1, column2, <span class="op">..</span>.</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name;</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"SELECT username, email FROM users"</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> cursor.fetchall()</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> rows:</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Username: </span><span class="sc">{</span>row[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">, Email: </span><span class="sc">{</span>row[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>This retrieves the <code>username</code> and <code>email</code> columns from the <code>users</code> table and prints each row. <code>fetchall()</code> retrieves all matching rows; <code>fetchone()</code> retrieves a single row, and <code>fetchmany(size)</code> retrieves a specified number of rows.</p>
<h3 id="filtering-data-with-where-clauses">Filtering data with <code>WHERE</code> clauses</h3>
<p>The <code>WHERE</code> clause filters the results based on a specified condition:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column1, column2, <span class="op">..</span>.</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> condition;</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"SELECT * FROM users WHERE username = 'john.doe'"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    row <span class="op">=</span> cursor.fetchone()</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> row:</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Found user: </span><span class="sc">{</span>row<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"User not found."</span>)</span></code></pre></div>
<p>This retrieves only the row where the <code>username</code> is ‘john.doe’. You can use various comparison operators (<code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>), logical operators (<code>AND</code>, <code>OR</code>, <code>NOT</code>), and wildcard characters (<code>%</code> for any sequence of characters, <code>_</code> for a single character) in the <code>WHERE</code> clause.</p>
<h3 id="sorting-data-with-order-by">Sorting data with <code>ORDER BY</code></h3>
<p>The <code>ORDER BY</code> clause sorts the results:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column1, column2, <span class="op">..</span>.</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> column1 <span class="kw">ASC</span>|<span class="kw">DESC</span>;</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"SELECT username FROM users ORDER BY username DESC"</span>)  <span class="co">#Descending order</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> cursor.fetchall()</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> rows:</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(row[<span class="dv">0</span>])</span></code></pre></div>
<p>This sorts the usernames in descending alphabetical order. <code>ASC</code> (ascending) is the default; <code>DESC</code> specifies descending order. You can specify multiple columns to sort by.</p>
<h3 id="limiting-results-with-limit">Limiting results with <code>LIMIT</code></h3>
<p>The <code>LIMIT</code> clause restricts the number of rows returned:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column1, column2, <span class="op">..</span>.</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dt">number</span>;</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"SELECT username FROM users LIMIT 2"</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> cursor.fetchall()</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> rows:</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(row[<span class="dv">0</span>])</span></code></pre></div>
<p>This retrieves only the first two usernames. You can also use <code>LIMIT offset, number</code> to skip a certain number of rows before starting the retrieval.</p>
<h3 id="working-with-joins">Working with joins</h3>
<p>Joins combine data from multiple tables based on a related column. Different join types exist (INNER, LEFT, RIGHT, FULL OUTER), but SQLite only directly supports INNER JOINs. Other join types need to be emulated using subqueries or UNION ALL.</p>
<p>Example of an INNER JOIN:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">'''</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="st">        SELECT users.username, orders.order_date</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="st">        FROM users</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="st">        INNER JOIN orders ON users.id = orders.user_id</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="st">    '''</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> cursor.fetchall()</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> rows:</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Username: </span><span class="sc">{</span>row[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">, Order Date: </span><span class="sc">{</span>row[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>This retrieves the username and order date for all users who have placed orders.</p>
<h3 id="using-aggregate-functions-count-sum-avg-etc.">Using aggregate functions (COUNT, SUM, AVG, etc.)</h3>
<p>Aggregate functions perform calculations on a set of values. Common aggregate functions include:</p>
<ul>
<li><code>COUNT(*)</code>: Counts the number of rows.</li>
<li><code>SUM(column)</code>: Sums the values in a column.</li>
<li><code>AVG(column)</code>: Calculates the average of the values in a column.</li>
<li><code>MAX(column)</code>: Finds the maximum value in a column.</li>
<li><code>MIN(column)</code>: Finds the minimum value in a column.</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"SELECT COUNT(*) FROM users"</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> cursor.fetchone()[<span class="dv">0</span>]</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Number of users: </span><span class="sc">{</span>count<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>This counts the number of rows in the <code>users</code> table. Aggregate functions are often used with <code>GROUP BY</code> to perform calculations on groups of rows.</p>
<h2 id="updating-and-deleting-data">Updating and Deleting Data</h2>
<h3 id="updating-data-with-update-statements">Updating data with <code>UPDATE</code> statements</h3>
<p>The <code>UPDATE</code> statement modifies existing rows in a table. The basic syntax is:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">UPDATE</span> table_name</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SET</span> column1 <span class="op">=</span> value1, column2 <span class="op">=</span> value2, <span class="op">..</span>.</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> condition;</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"UPDATE users SET email = 'updated@example.com' WHERE username = 'john.doe'"</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Row updated successfully."</span>)</span></code></pre></div>
<p>This updates the email address of the user with username ‘john.doe’. If the <code>WHERE</code> clause is omitted, <em>all</em> rows in the table will be updated—use extreme caution when omitting the <code>WHERE</code> clause!</p>
<h3 id="deleting-data-with-delete-statements">Deleting data with <code>DELETE</code> statements</h3>
<p>The <code>DELETE</code> statement removes rows from a table. The basic syntax is:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> table_name</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> condition;</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"DELETE FROM users WHERE username = 'jane.doe'"</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Row deleted successfully."</span>)</span></code></pre></div>
<p>This deletes the row where the username is ‘jane.doe’. If the <code>WHERE</code> clause is omitted, <em>all</em> rows in the table will be deleted—use extreme caution when omitting the <code>WHERE</code> clause! This is a destructive operation; the deleted data cannot be recovered unless you have a backup.</p>
<h3 id="using-where-clauses-for-selective-updates-and-deletes">Using <code>WHERE</code> clauses for selective updates and deletes</h3>
<p>The <code>WHERE</code> clause is essential for performing selective updates and deletes. Without a <code>WHERE</code> clause, the <code>UPDATE</code> and <code>DELETE</code> statements affect all rows in the table, which can lead to unintended data loss.</p>
<p>Examples demonstrating the importance of WHERE clauses:</p>
<p><strong>Safe Update:</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"UPDATE users SET email = 'new_email@example.com' WHERE id = 1"</span>) <span class="co">#Only updates row with id 1</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span></code></pre></div>
<p><strong>Unsafe Update (Avoid!):</strong></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"UPDATE users SET email = 'new_email@example.com'"</span>) <span class="co">#Updates ALL rows!</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span></code></pre></div>
<p>The same principle applies to <code>DELETE</code> statements. Always use a <code>WHERE</code> clause to specify which rows to update or delete unless you intend to modify or remove all rows in the table. Consider using transactions (explained in the next section) for complex updates or deletes to ensure atomicity and recoverability in case of errors.</p>
<h2 id="transactions-and-concurrency">Transactions and Concurrency</h2>
<h3 id="managing-transactions-with-begin-commit-and-rollback">Managing transactions with <code>BEGIN</code>, <code>COMMIT</code>, and <code>ROLLBACK</code></h3>
<p>Transactions are sequences of database operations treated as a single unit of work. They ensure data consistency and integrity. SQLite supports transactions using the <code>BEGIN TRANSACTION</code>, <code>COMMIT</code>, and <code>ROLLBACK</code> commands.</p>
<ul>
<li><p><strong><code>BEGIN TRANSACTION</code>:</strong> Starts a transaction. All subsequent SQL statements are part of the transaction until it’s committed or rolled back. You can also use <code>BEGIN IMMEDIATE</code> for immediate transactions (no other connections can access the database until the transaction is finished), or <code>BEGIN EXCLUSIVE</code> to acquire an exclusive lock on the database.</p></li>
<li><p><strong><code>COMMIT</code>:</strong> Saves all changes made within the transaction to the database. The transaction is completed successfully.</p></li>
<li><p><strong><code>ROLLBACK</code>:</strong> Undoes all changes made within the transaction. The database is reverted to its state before the transaction began.</p></li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>        connection.execute(<span class="st">"BEGIN TRANSACTION"</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>        cursor.execute(<span class="st">"UPDATE users SET email = 'new_email@example.com' WHERE id = 1"</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>        cursor.execute(<span class="st">"INSERT INTO orders (user_id, order_date) VALUES (1, '2024-03-08')"</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>        connection.commit()</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Transaction committed successfully."</span>)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> sqlite3.Error <span class="im">as</span> e:</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>        connection.rollback()</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Transaction rolled back due to error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>This code updates a user’s email and adds an order within a transaction. If any error occurs during the transaction, the <code>except</code> block rolls back the changes, preventing a partially completed transaction. The <code>with</code> statement ensures the connection is closed properly, even if errors occur. Always use transactions for operations involving multiple database changes to maintain data integrity.</p>
<h3 id="understanding-transaction-isolation-levels">Understanding transaction isolation levels</h3>
<p>SQLite uses a read-uncommitted isolation level by default. This means that uncommitted changes made by other transactions might be visible to your current transaction. While this can provide better concurrency (reduced blocking), it can also lead to dirty reads (reading uncommitted data). There’s no mechanism to explicitly change the isolation level in SQLite like in some other database systems.</p>
<h3 id="concurrency-control-in-sqlite3">Concurrency control in SQLite3</h3>
<p>SQLite’s concurrency control relies on file-system locking. When multiple processes or threads access the same database file concurrently, SQLite uses various locking mechanisms (shared locks, exclusive locks, etc.) to manage concurrent access. The default locking strategy usually provides sufficient concurrency for many applications. However, for heavily concurrent applications, careful consideration is needed to handle potential locking conflicts.</p>
<ul>
<li><p><strong>Shared locks:</strong> Allow multiple readers to access the database simultaneously.</p></li>
<li><p><strong>Exclusive locks:</strong> Prevent concurrent access; only one writer can access the database at a time.</p></li>
</ul>
<p>Strategies for handling concurrency:</p>
<ul>
<li><p><strong>Transactions:</strong> Using transactions is the primary way to manage concurrency and ensure data integrity, ensuring that all changes made within a transaction are atomic (either all succeed, or all fail).</p></li>
<li><p><strong>Careful Database Design:</strong> A well-designed database schema can reduce the likelihood of conflicts by minimizing the need for concurrent access to the same data.</p></li>
<li><p><strong>Connection Pooling:</strong> In high-concurrency scenarios, using connection pooling (reusing existing connections instead of repeatedly creating and closing new ones) can improve performance and reduce the risk of resource exhaustion.</p></li>
<li><p><strong>Application-Level Locking:</strong> For complex concurrency control situations, you might need to implement application-level locking mechanisms to coordinate access to specific parts of your database. This requires careful design and understanding of your application’s concurrency model. This is generally more complex and should be considered as a last resort.</p></li>
</ul>
<h2 id="advanced-techniques">Advanced Techniques</h2>
<h3 id="using-views">Using views</h3>
<p>A view is a virtual table based on the result-set of an SQL statement. It doesn’t store data itself; instead, it provides a customized way to access existing data. Views can simplify queries, provide data security by restricting access to specific columns or rows, and improve data organization.</p>
<p>Creating a view:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">'''</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="st">        CREATE VIEW active_users AS</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="st">        SELECT id, username, email</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="st">        FROM users</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="st">        WHERE last_login &gt; date('now', '-30 days');</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="st">    '''</span>)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"View 'active_users' created successfully."</span>)</span></code></pre></div>
<p>This creates a view named <code>active_users</code> that shows users who have logged in within the last 30 days. You can then query the view like a regular table:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>cursor.execute(<span class="st">"SELECT * FROM active_users"</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>rows <span class="op">=</span> cursor.fetchall()</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ... process the rows ...</span></span></code></pre></div>
<h3 id="working-with-indexes">Working with indexes</h3>
<p>Indexes speed up data retrieval by creating a separate data structure that stores a subset of columns and their associated row pointers. Indexes are particularly useful for frequently queried columns or columns used in <code>WHERE</code> clauses.</p>
<p>Creating an index:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"CREATE INDEX idx_username ON users (username)"</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Index 'idx_username' created successfully."</span>)</span></code></pre></div>
<p>This creates an index named <code>idx_username</code> on the <code>username</code> column of the <code>users</code> table. SQLite automatically chooses appropriate index types (B-tree). Indexes improve performance for <code>SELECT</code> queries that filter on the indexed column but can slow down <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operations since the index needs updating as well. Over-indexing can also hurt performance; carefully choose which columns to index based on query patterns.</p>
<h3 id="triggers-and-stored-procedures">Triggers and stored procedures</h3>
<p>SQLite supports triggers (code that automatically executes in response to certain events on a table—<code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>) and user-defined functions (UDFs), but it does <em>not</em> have true stored procedures in the same way as some other database systems.</p>
<p>Creating a trigger (example of an <code>AFTER INSERT</code> trigger):</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">'''</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="st">        CREATE TRIGGER new_user_log</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="st">        AFTER INSERT ON users</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="st">        BEGIN</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="st">            INSERT INTO user_logs (user_id, action, timestamp) VALUES (NEW.id, 'User Created', datetime('now'));</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="st">        END;</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="st">    '''</span>)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Trigger 'new_user_log' created successfully."</span>)</span></code></pre></div>
<p>This trigger inserts a log entry into a <code>user_logs</code> table whenever a new user is added to the <code>users</code> table. Note that the syntax for triggers and UDFs is SQL, not Python.</p>
<h3 id="using-sqlite3-with-other-python-libraries-e.g.-pandas">Using SQLite3 with other Python libraries (e.g., Pandas)</h3>
<p>SQLite3 integrates well with other Python libraries. Pandas, a powerful data manipulation library, provides convenient methods for reading data from and writing data to SQLite databases:</p>
<p>Reading data into a Pandas DataFrame:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_sql_query(<span class="st">"SELECT * FROM users"</span>, connection)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(df)</span></code></pre></div>
<p>Writing a Pandas DataFrame to a SQLite table:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'username'</span>: [<span class="st">'alice'</span>, <span class="st">'bob'</span>], <span class="st">'email'</span>: [<span class="st">'alice@example.com'</span>, <span class="st">'bob@example.com'</span>]}</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>) <span class="im">as</span> connection:</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    df.to_sql(<span class="st">'users'</span>, connection, if_exists<span class="op">=</span><span class="st">'append'</span>, index<span class="op">=</span><span class="va">False</span>)  <span class="co"># if_exists='replace' to overwrite the table</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"DataFrame written to SQLite successfully."</span>)</span></code></pre></div>
<p>This demonstrates the seamless integration between SQLite3 and Pandas, allowing efficient data import and export. Remember to set <code>index=False</code> in <code>to_sql</code> to avoid writing the DataFrame’s index as a column in the SQLite table. <code>if_exists='append'</code> adds rows, while <code>if_exists='replace'</code> overwrites the table. Choose the option best suited to your needs.</p>
<h2 id="error-handling-and-debugging">Error Handling and Debugging</h2>
<h3 id="common-sqlite3-errors">Common SQLite3 errors</h3>
<p>Several errors can occur when working with SQLite3 in Python. Understanding common error types is crucial for effective debugging. Some frequent errors include:</p>
<ul>
<li><p><strong><code>sqlite3.OperationalError</code>:</strong> This is a general error indicating a problem during database operations. It can stem from various issues, such as incorrect SQL syntax, database file not found, permission problems, or table constraints being violated (e.g., trying to insert a duplicate value into a UNIQUE column). The error message usually provides details about the specific problem.</p></li>
<li><p><strong><code>sqlite3.IntegrityError</code>:</strong> This error occurs when a database constraint is violated. For example, attempting to insert a row that violates a <code>UNIQUE</code> constraint, <code>FOREIGN KEY</code> constraint, <code>CHECK</code> constraint, or <code>NOT NULL</code> constraint will result in this error.</p></li>
<li><p><strong><code>sqlite3.ProgrammingError</code>:</strong> This indicates an error in the way the <code>sqlite3</code> module is being used—for instance, attempting to execute an operation on a closed connection or a wrongly formatted SQL query.</p></li>
<li><p><strong><code>sqlite3.InterfaceError</code>:</strong> Usually a lower-level error related to how the Python interface to the SQLite library is functioning. This is less common but can indicate a problem within the Python-SQLite3 interaction itself.</p></li>
<li><p><strong><code>sqlite3.DatabaseError</code>:</strong> This is a generic base class for SQLite database errors.</p></li>
</ul>
<h3 id="using-exception-handling">Using exception handling</h3>
<p>Effective error handling is essential for robust SQLite3 applications. Python’s <code>try...except</code> blocks are used to gracefully handle potential errors:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    connection <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">'mydatabase.db'</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    cursor <span class="op">=</span> connection.cursor()</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    cursor.execute(<span class="st">"SELECT * FROM non_existent_table"</span>) <span class="co">#Example of a potential error</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> cursor.fetchall()</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... process rows ...</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    connection.commit()</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> sqlite3.OperationalError <span class="im">as</span> e:</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Database operation failed: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> sqlite3.IntegrityError <span class="im">as</span> e:</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Database constraint violated: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> sqlite3.ProgrammingError <span class="im">as</span> e:</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Programming error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e: <span class="co">#Catch other unexpected errors</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"An unexpected error occurred: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>:</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> connection:</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>        connection.close() <span class="co">#Always close the connection</span></span></code></pre></div>
<p>This example demonstrates handling specific SQLite3 error types. The <code>finally</code> block ensures the database connection is closed even if errors occur. Handling specific exception types allows for targeted error responses, making your application more robust and user-friendly. Logging errors to a file is also a good practice for tracking and diagnosing issues in production environments.</p>
<h3 id="debugging-sqlite3-applications">Debugging SQLite3 applications</h3>
<p>Debugging SQLite3 applications involves standard Python debugging techniques, but also understanding SQLite-specific aspects:</p>
<ul>
<li><p><strong>Print Statements:</strong> Strategic <code>print()</code> statements can help trace the flow of your code and examine variables’ values at different points.</p></li>
<li><p><strong>Python Debuggers:</strong> Use Python debuggers (like pdb) to step through your code line by line, inspect variables, set breakpoints, and trace the execution flow.</p></li>
<li><p><strong>SQL Query Validation:</strong> Ensure your SQL queries are correct by testing them directly in a SQLite client (like the sqlite3 command-line tool) before integrating them into your Python code. This isolates potential problems in your SQL from problems in your Python code.</p></li>
<li><p><strong>Examine the Database:</strong> If errors persist, use a SQLite database browser or the command-line tool to directly inspect the database tables’ contents, schemas, indexes, and triggers. This can help pinpoint inconsistencies or unexpected data.</p></li>
<li><p><strong>Logging:</strong> Implement logging to record database operations, queries executed, and any errors encountered. This creates a detailed history for post-mortem analysis. Especially crucial in production environments where direct debugging is not always possible.</p></li>
</ul>
<p>By combining these techniques, you can effectively debug your SQLite3 applications and ensure their stability and reliability. Remember to handle exceptions gracefully to prevent application crashes and provide informative error messages to users.</p>
<h2 id="security-considerations">Security Considerations</h2>
<h3 id="preventing-sql-injection">Preventing SQL injection</h3>
<p>SQL injection is a serious security vulnerability where malicious users can inject arbitrary SQL code into your database queries, potentially allowing them to read, modify, or delete data. The primary defense against SQL injection is to <em>always</em> use parameterized queries (also known as prepared statements). Parameterized queries separate data from SQL code, preventing user input from being interpreted as executable SQL.</p>
<p><strong>Vulnerable Code (SQL Injection):</strong></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>user_input <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Enter username: "</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>query <span class="op">=</span> <span class="ss">f"SELECT * FROM users WHERE username = '</span><span class="sc">{</span>user_input<span class="sc">}</span><span class="ss">'"</span>  <span class="co"># Dangerous!</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>cursor.execute(query)</span></code></pre></div>
<p><strong>Secure Code (Parameterized Query):</strong></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>user_input <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Enter username: "</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>cursor.execute(<span class="st">"SELECT * FROM users WHERE username = ?"</span>, (user_input,)) <span class="co">#Safe</span></span></code></pre></div>
<p>In the secure example, the <code>?</code> is a placeholder. The <code>sqlite3</code> module safely substitutes the <code>user_input</code> value, preventing any SQL injection attempts. Always use this approach, even for simple queries.</p>
<h3 id="data-sanitization">Data sanitization</h3>
<p>Even with parameterized queries, data sanitization is a crucial security practice. Before inserting data into your database, sanitize it to remove or neutralize potentially harmful characters or patterns. This helps prevent unexpected behavior and potential attacks. While parameterized queries handle most SQL injection vulnerabilities, sanitization helps protect against other types of attacks or data corruption:</p>
<ul>
<li><p><strong>Input Validation:</strong> Check user input to ensure it conforms to expected formats and data types. Reject or correct invalid input. For example, if expecting an integer, reject non-numeric inputs.</p></li>
<li><p><strong>Output Encoding:</strong> When displaying data retrieved from the database, encode it appropriately to prevent cross-site scripting (XSS) attacks. Use appropriate escaping methods based on the context (e.g., HTML encoding for web applications).</p></li>
</ul>
<h3 id="secure-database-configurations">Secure database configurations</h3>
<p>While SQLite is file-based and doesn’t have the same extensive configuration options as client-server databases, some security considerations still apply:</p>
<ul>
<li><p><strong>File Permissions:</strong> Restrict access to the SQLite database file using operating system file permissions. Only authorized users or processes should have read or write access to the database file.</p></li>
<li><p><strong>Database Encryption:</strong> For sensitive data, consider encrypting the database file itself using tools like OpenSSL or other encryption utilities. This adds a layer of protection, even if the database file is compromised.</p></li>
<li><p><strong>Regular Backups:</strong> Regularly back up your database files to protect against data loss due to accidental deletion, corruption, or other unforeseen events. Store backups in a secure location, ideally offline.</p></li>
<li><p><strong>Strong Passwords (If Applicable):</strong> If using SQLite with authentication mechanisms (which are not built into SQLite itself but might be implemented at the application level), ensure users utilize strong, unique passwords.</p></li>
<li><p><strong>Principle of Least Privilege:</strong> Grant database access only to the users or processes that absolutely require it, minimizing the potential damage from unauthorized access.</p></li>
</ul>
<p>SQLite’s simplicity makes it relatively easy to secure, but following these guidelines, particularly focusing on parameterized queries and data sanitization, will significantly reduce the risk of security vulnerabilities. Remember that application-level security (input validation, output encoding, authentication) is just as crucial as database-level security.</p>
<h2 id="appendix-sqlite3-command-line-interface">Appendix: SQLite3 Command-Line Interface</h2>
<h3 id="accessing-the-command-line-shell">Accessing the command-line shell</h3>
<p>The SQLite3 command-line shell provides a convenient way to interact with SQLite databases directly without writing Python code. To access it, open your terminal or command prompt and type <code>sqlite3</code> followed by the database filename (or create a new one):</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">sqlite3</span> mydatabase.db  <span class="co"># Connects to mydatabase.db; creates it if it doesn't exist</span></span></code></pre></div>
<p>If the database file doesn’t exist, SQLite will create it. You will then see a prompt like <code>.</code>. You can now execute SQL commands directly. To exit the shell, type <code>.exit</code> or Ctrl+D.</p>
<h3 id="common-commands">Common commands</h3>
<p>The SQLite3 shell supports a range of SQL commands. Some common and useful commands include:</p>
<ul>
<li><p><strong><code>.tables</code>:</strong> Lists all tables in the current database.</p></li>
<li><p><strong><code>.schema table_name</code>:</strong> Displays the schema (structure) of a specific table.</p></li>
<li><p><strong><code>.help</code>:</strong> Shows a list of available commands within the shell.</p></li>
<li><p><strong><code>SELECT ... FROM ...</code>:</strong> Standard SQL SELECT query to retrieve data from tables (as described in the main manual).</p></li>
<li><p><strong><code>INSERT INTO ... VALUES ...</code>:</strong> Inserts new rows into tables.</p></li>
<li><p><strong><code>UPDATE ... SET ... WHERE ...</code>:</strong> Updates existing rows.</p></li>
<li><p><strong><code>DELETE FROM ... WHERE ...</code>:</strong> Deletes rows from tables.</p></li>
<li><p><strong><code>CREATE TABLE ...</code>:</strong> Creates new tables.</p></li>
<li><p><strong><code>DROP TABLE ...</code>:</strong> Deletes tables.</p></li>
<li><p><strong><code>.dump</code>:</strong> Outputs the entire database schema and data in SQL format. Useful for creating backups or transferring the database to another system.</p></li>
<li><p><strong><code>.read filename.sql</code>:</strong> Executes SQL commands from a specified file.</p></li>
</ul>
<p>Example using the command line:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">sqlite3</span> mydatabase.db</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">.tables</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="ex">.schema</span> users</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="ex">SELECT</span> <span class="pp">*</span> FROM users<span class="kw">;</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="ex">.exit</span></span></code></pre></div>
<p>This connects to <code>mydatabase.db</code>, lists tables, shows the <code>users</code> table schema, retrieves all data from <code>users</code>, and then exits.</p>
<h3 id="useful-tips-and-tricks">Useful tips and tricks</h3>
<ul>
<li><p><strong>Autocompletion:</strong> The command-line shell often provides autocompletion for table and column names, making it faster to write commands.</p></li>
<li><p><strong>Command History:</strong> Use the up and down arrow keys to navigate through your command history.</p></li>
<li><p><strong>SQL Formatting:</strong> For complex queries, it is helpful to write them in a separate <code>.sql</code> file and then use <code>.read filename.sql</code> to execute them in the shell, improving readability and maintainability.</p></li>
<li><p><strong>Debugging:</strong> The shell is handy for testing SQL queries before incorporating them into your Python code. This helps to isolate problems related to SQL from those in your Python code.</p></li>
<li><p><strong>Database Exploration:</strong> Use the shell to explore your database’s structure and content quickly, making it a valuable tool for database administration and ad-hoc queries.</p></li>
</ul>
<p>The SQLite3 command-line shell is a quick and efficient tool for interacting with your databases. It is especially useful for testing SQL queries, exploring data, and performing ad-hoc database administration tasks. Its simple interface makes it readily accessible to both beginners and experienced database users.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>