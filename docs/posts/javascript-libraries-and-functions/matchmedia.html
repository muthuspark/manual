<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>matchMedia - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id="></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="../../favicon.ico">
<meta property="og:title" content="matchMedia - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">matchMedia - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction-to-matchmedia" id="toc-introduction-to-matchmedia">Introduction to matchMedia</a></li>
  <li><a href="#basic-usage-of-matchmedia" id="toc-basic-usage-of-matchmedia">Basic Usage of matchMedia</a>
  <ul>
  <li><a href="#creating-a-mediaquerylist" id="toc-creating-a-mediaquerylist">Creating a MediaQueryList</a></li>
  <li><a href="#the-matches-property" id="toc-the-matches-property">The <code>matches</code> Property</a></li>
  <li><a href="#the-media-property" id="toc-the-media-property">The <code>media</code> Property</a></li>
  <li><a href="#adding-and-removing-listeners-with-addlistener-and-removelistener" id="toc-adding-and-removing-listeners-with-addlistener-and-removelistener">Adding and Removing Listeners with <code>addListener</code> and <code>removeListener</code></a></li>
  </ul></li>
  <li><a href="#advanced-techniques" id="toc-advanced-techniques">Advanced Techniques</a>
  <ul>
  <li><a href="#using-onchange-event-deprecated" id="toc-using-onchange-event-deprecated">Using <code>onchange</code> event (Deprecated)</a></li>
  <li><a href="#handling-multiple-media-queries" id="toc-handling-multiple-media-queries">Handling Multiple Media Queries</a></li>
  <li><a href="#best-practices-for-performance" id="toc-best-practices-for-performance">Best Practices for Performance</a></li>
  <li><a href="#working-with-different-media-types-screen-print-etc." id="toc-working-with-different-media-types-screen-print-etc.">Working with different media types (screen, print, etc.)</a></li>
  </ul></li>
  <li><a href="#examples-and-use-cases" id="toc-examples-and-use-cases">Examples and Use Cases</a>
  <ul>
  <li><a href="#responsive-design-implementation" id="toc-responsive-design-implementation">Responsive Design Implementation</a></li>
  <li><a href="#adaptive-images" id="toc-adaptive-images">Adaptive Images</a></li>
  <li><a href="#dynamic-styling-with-css-variables" id="toc-dynamic-styling-with-css-variables">Dynamic Styling with CSS Variables</a></li>
  <li><a href="#feature-detection-and-conditional-rendering" id="toc-feature-detection-and-conditional-rendering">Feature Detection and Conditional Rendering</a></li>
  </ul></li>
  <li><a href="#troubleshooting-and-common-issues" id="toc-troubleshooting-and-common-issues">Troubleshooting and Common Issues</a>
  <ul>
  <li><a href="#debugging-media-query-issues" id="toc-debugging-media-query-issues">Debugging Media Query Issues</a></li>
  <li><a href="#handling-browser-inconsistencies" id="toc-handling-browser-inconsistencies">Handling Browser Inconsistencies</a></li>
  <li><a href="#troubleshooting-listener-issues" id="toc-troubleshooting-listener-issues">Troubleshooting Listener Issues</a></li>
  </ul></li>
  <li><a href="#alternatives-to-matchmedia" id="toc-alternatives-to-matchmedia">Alternatives to matchMedia</a>
  <ul>
  <li><a href="#using-css-media-queries-directly" id="toc-using-css-media-queries-directly">Using CSS media queries directly</a></li>
  <li><a href="#alternative-libraries-and-frameworks" id="toc-alternative-libraries-and-frameworks">Alternative libraries and frameworks</a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix">Appendix</a>
  <ul>
  <li><a href="#glossary-of-terms" id="toc-glossary-of-terms">Glossary of Terms</a></li>
  <li><a href="#further-resources-and-links" id="toc-further-resources-and-links">Further Resources and Links</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="introduction-to-matchmedia">Introduction to matchMedia</h3>
<h4 id="what-is-matchmedia">What is matchMedia?</h4>
<p><code>matchMedia</code> is a powerful JavaScript API that allows developers to detect changes in the size and characteristics of a user’s viewport (browser window). It provides a way to listen for media queries, allowing you to dynamically adjust the content and styling of your website based on screen size, resolution, orientation, and other media features. Instead of relying on hardcoded breakpoints or separate CSS stylesheets for different devices, <code>matchMedia</code> enables responsive design by offering a programmatic approach to detect and react to media query matches. This enables creating truly adaptive user experiences that seamlessly adapt to various display contexts.</p>
<h4 id="why-use-matchmedia">Why use matchMedia?</h4>
<p>Using <code>matchMedia</code> offers several significant advantages for building responsive web applications:</p>
<ul>
<li><p><strong>Dynamic Content Adjustments:</strong> Modify content, layout, or functionality based on screen size, orientation, or other media features without requiring page reloads. This results in a smoother and more interactive user experience.</p></li>
<li><p><strong>Improved Performance:</strong> Avoid unnecessary CSS switching or JavaScript-based solutions that might be less efficient. <code>matchMedia</code> allows targeted updates, preventing unnecessary rendering overhead.</p></li>
<li><p><strong>Maintainability:</strong> Centralize your responsive logic within JavaScript, making your code cleaner, more organized, and easier to maintain than managing multiple CSS stylesheets or complex conditional statements.</p></li>
<li><p><strong>Feature Detection:</strong> Beyond screen size, you can use <code>matchMedia</code> to detect other features like preferred color schemes (“prefers-color-scheme”), pointer types (“pointer: coarse”), and more, making your application more accessible and adaptable.</p></li>
<li><p><strong>Testability:</strong> The programmatic nature of <code>matchMedia</code> makes testing your responsive logic much easier compared to CSS-only approaches.</p></li>
</ul>
<h4 id="browser-compatibility">Browser Compatibility</h4>
<p><code>matchMedia</code> enjoys widespread support across modern browsers. However, older browsers might require a polyfill (a JavaScript library that provides functionality for unsupported browsers).</p>
<table class="caption-top">
<colgroup>
<col style="width: 19%">
<col style="width: 25%">
<col style="width: 55%">
</colgroup>
<thead>
<tr class="header">
<th>Browser</th>
<th>Support Status</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Chrome</td>
<td>Excellent</td>
<td>Native support in all recent versions.</td>
</tr>
<tr class="even">
<td>Firefox</td>
<td>Excellent</td>
<td>Native support in all recent versions.</td>
</tr>
<tr class="odd">
<td>Safari</td>
<td>Excellent</td>
<td>Native support in all recent versions.</td>
</tr>
<tr class="even">
<td>Edge</td>
<td>Excellent</td>
<td>Native support in all recent versions.</td>
</tr>
<tr class="odd">
<td>Internet Explorer</td>
<td>Limited/No Support</td>
<td>Requires a polyfill for any meaningful usage.</td>
</tr>
<tr class="even">
<td>Opera</td>
<td>Excellent</td>
<td>Native support in all recent versions.</td>
</tr>
</tbody>
</table>
<p>For older browsers lacking native <code>matchMedia</code> support, consider using a reliable polyfill like <code>matchMedia.js</code> or a similar library readily available via a package manager like npm or yarn. Remember to check the polyfill’s license and compatibility before integrating it into your project. Modern JavaScript bundlers (like Webpack, Parcel, Rollup) can often handle polyfill inclusion automatically if configured correctly with appropriate browserlist settings.</p>
<h2 id="basic-usage-of-matchmedia">Basic Usage of matchMedia</h2>
<p>This section details the fundamental usage of the <code>matchMedia</code> API.</p>
<h3 id="creating-a-mediaquerylist">Creating a MediaQueryList</h3>
<p>The core of using <code>matchMedia</code> involves creating a <code>MediaQueryList</code> object. This object represents a specific media query and provides information about whether that query currently matches the user’s environment. You create a <code>MediaQueryList</code> using the <code>window.matchMedia()</code> method, passing the media query string as an argument.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create a MediaQueryList for screens wider than 768px</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> mq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(min-width: 768px)'</span>)<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Create a MediaQueryList for prefers-color-scheme: dark</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> darkModeMq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(prefers-color-scheme: dark)'</span>)<span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Create a MediaQueryList for prefers-reduced-motion: reduce</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> reduceMotionMq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(prefers-reduced-motion: reduce)'</span>)<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<p>The returned <code>mq</code> object is a <code>MediaQueryList</code>. You can then use its properties and methods to check the current state and respond to changes.</p>
<h3 id="the-matches-property">The <code>matches</code> Property</h3>
<p>The <code>matches</code> property of the <code>MediaQueryList</code> object is a boolean value indicating whether the media query currently matches the user’s environment. It’s <code>true</code> if the query matches and <code>false</code> otherwise.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(mq<span class="op">.</span><span class="at">matches</span>)<span class="op">;</span> <span class="co">// true if screen width is &gt;= 768px, false otherwise</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(darkModeMq<span class="op">.</span><span class="at">matches</span>)<span class="op">;</span> <span class="co">// true if the user prefers dark mode</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(reduceMotionMq<span class="op">.</span><span class="at">matches</span>)<span class="op">;</span> <span class="co">// true if the user prefers reduced motion</span></span></code></pre></div>
<p>This property is useful for immediately determining if a certain style or behavior should be applied.</p>
<h3 id="the-media-property">The <code>media</code> Property</h3>
<p>The <code>media</code> property is a read-only string containing the original media query that was passed to <code>window.matchMedia()</code>. This is useful for debugging or logging purposes, ensuring you’re working with the expected query.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(mq<span class="op">.</span><span class="at">media</span>)<span class="op">;</span> <span class="co">// Output: "(min-width: 768px)"</span></span></code></pre></div>
<h3 id="adding-and-removing-listeners-with-addlistener-and-removelistener">Adding and Removing Listeners with <code>addListener</code> and <code>removeListener</code></h3>
<p>The most powerful aspect of <code>matchMedia</code> is its ability to listen for changes to the media query’s matching state. This allows your application to react dynamically to changes in the user’s environment (e.g., resizing the browser window, changing device orientation, toggling dark mode).</p>
<p>The <code>addListener</code> method adds an event listener that is called whenever the <code>matches</code> property changes. The <code>removeListener</code> method removes an event listener that was previously added. The listener function receives a <code>MediaQueryList</code> object as an argument; you can access the <code>matches</code> property within this function to determine the new state.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">handleMediaQueryChange</span>(e) {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (e<span class="op">.</span><span class="at">matches</span>) {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Media query now matches</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Media query matches!'</span>)<span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Apply styles or change behavior</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">'large-screen'</span>)<span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Media query no longer matches</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Media query does not match!'</span>)<span class="op">;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Apply styles or change behavior</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">remove</span>(<span class="st">'large-screen'</span>)<span class="op">;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Add listener</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>mq<span class="op">.</span><span class="fu">addListener</span>(handleMediaQueryChange)<span class="op">;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">// ... later, to remove the listener:</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">// mq.removeListener(handleMediaQueryChange);</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">//Example using prefers-color-scheme</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">handleDarkModeChange</span>(e){</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(e<span class="op">.</span><span class="at">matches</span>){</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>        <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">'dark-mode'</span>)<span class="op">;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">remove</span>(<span class="st">'dark-mode'</span>)<span class="op">;</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>darkModeMq<span class="op">.</span><span class="fu">addListener</span>(handleDarkModeChange)<span class="op">;</span></span></code></pre></div>
<p>Remember to remove listeners when they are no longer needed to prevent memory leaks, especially in components that might be unmounted or reused. Consider adding the <code>removeListener</code> call within a cleanup function or event handler.</p>
<h2 id="advanced-techniques">Advanced Techniques</h2>
<p>This section explores more advanced usage patterns and best practices for working with <code>matchMedia</code>.</p>
<h3 id="using-onchange-event-deprecated">Using <code>onchange</code> event (Deprecated)</h3>
<p>While <code>addListener</code> and <code>removeListener</code> are the recommended approach for handling media query changes, the <code>onchange</code> event is deprecated but might still be encountered in older code. It’s generally less flexible and less efficient than the <code>addListener</code>/<code>removeListener</code> methods. <strong>It’s strongly recommended to use <code>addListener</code> and <code>removeListener</code> in new code.</strong></p>
<p>The <code>onchange</code> event handler is assigned directly to the <code>MediaQueryList</code> object. This handler is invoked whenever the <code>matches</code> property changes.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Deprecated - use addListener/removeListener instead</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>mq<span class="op">.</span><span class="at">onchange</span> <span class="op">=</span> <span class="kw">function</span>() {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">matches</span>) {</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// ...</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// ...</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h3 id="handling-multiple-media-queries">Handling Multiple Media Queries</h3>
<p>You can efficiently manage multiple media queries by creating separate <code>MediaQueryList</code> objects for each query and attaching appropriate listeners. However, for a more organized approach, consider using a single function to handle changes from different queries, perhaps using a data structure to track them.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> mq1 <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(min-width: 768px)'</span>)<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> mq2 <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(orientation: landscape)'</span>)<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">handleMultipleQueries</span>(e) {</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Query '</span><span class="sc">${</span>e<span class="op">.</span><span class="at">matches</span> <span class="op">?</span> e<span class="op">.</span><span class="at">media</span> <span class="op">:</span> <span class="st">"N/A"</span><span class="sc">}</span><span class="vs">' changed to </span><span class="sc">${</span>e<span class="op">.</span><span class="at">matches</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Apply logic based on which query changed and its new state</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(e<span class="op">.</span><span class="at">media</span> <span class="op">===</span> <span class="st">'(min-width: 768px)'</span>) {</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">//handle mq1 changes</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (e<span class="op">.</span><span class="at">media</span> <span class="op">===</span> <span class="st">'(orientation: landscape)'</span>) {</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">//handle mq2 changes</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>mq1<span class="op">.</span><span class="fu">addListener</span>(handleMultipleQueries)<span class="op">;</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>mq2<span class="op">.</span><span class="fu">addListener</span>(handleMultipleQueries)<span class="op">;</span></span></code></pre></div>
<p>This approach avoids code duplication and provides better organization when dealing with numerous media queries.</p>
<h3 id="best-practices-for-performance">Best Practices for Performance</h3>
<ul>
<li><p><strong>Avoid unnecessary listeners:</strong> Only add listeners when necessary and remove them when the component or functionality is no longer active. Unnecessary listeners consume resources and can impact performance.</p></li>
<li><p><strong>Efficient event handling:</strong> Keep your event handlers concise and performant. Avoid expensive operations (e.g., DOM manipulations) within the handler unless absolutely necessary. Consider debouncing or throttling event handlers if they’re called frequently due to rapid changes in the media query state.</p></li>
<li><p><strong>Minimize DOM manipulation:</strong> Instead of constantly updating the DOM within event handlers, consider caching DOM elements and manipulating their properties directly when the media query changes.</p></li>
<li><p><strong>Use CSS where possible:</strong> For simple visual adjustments based on screen size, CSS media queries are often more efficient than using <code>matchMedia</code> in JavaScript. Reserve <code>matchMedia</code> for more complex or dynamic adaptations requiring JavaScript control.</p></li>
</ul>
<h3 id="working-with-different-media-types-screen-print-etc.">Working with different media types (screen, print, etc.)</h3>
<p><code>matchMedia</code> supports different media types in your queries. You can target specific output media like <code>screen</code>, <code>print</code>, or others using media type descriptors in your query string.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> screenMq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'screen and (min-width: 600px)'</span>)<span class="op">;</span> <span class="co">//For screen devices wider than 600px</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> printMq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'print and (color)'</span>)<span class="op">;</span> <span class="co">//For color printers</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>screenMq<span class="op">.</span><span class="fu">addListener</span>(<span class="kw">function</span>(e){</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(e<span class="op">.</span><span class="at">matches</span>){</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">//Apply styles for screen</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">//Remove styles</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>printMq<span class="op">.</span><span class="fu">addListener</span>(<span class="kw">function</span>(e){</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(e<span class="op">.</span><span class="at">matches</span>){</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">//Apply styles for color printers</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="co">//Remove styles</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>This allows you to create styles and behaviors specifically tailored for print previews or other output media in addition to screen-based displays. Remember that <code>print</code> media queries only apply when the print dialog is open. Be mindful of this when testing.</p>
<h2 id="examples-and-use-cases">Examples and Use Cases</h2>
<p>This section provides practical examples demonstrating <code>matchMedia</code> in various scenarios.</p>
<h3 id="responsive-design-implementation">Responsive Design Implementation</h3>
<p>A fundamental use case for <code>matchMedia</code> is creating responsive designs. Instead of relying solely on CSS media queries, <code>matchMedia</code> allows for dynamic JavaScript-driven adaptations based on screen size.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> mq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(min-width: 768px)'</span>)<span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">handleResize</span>(e) {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (e<span class="op">.</span><span class="at">matches</span>) {</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Larger screens (tablets and desktops)</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'main-content'</span>)<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">'desktop-layout'</span>)<span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'sidebar'</span>)<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> <span class="st">'block'</span><span class="op">;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Smaller screens (mobiles)</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'main-content'</span>)<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">remove</span>(<span class="st">'desktop-layout'</span>)<span class="op">;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'sidebar'</span>)<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> <span class="st">'none'</span><span class="op">;</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>mq<span class="op">.</span><span class="fu">addListener</span>(handleResize)<span class="op">;</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="fu">handleResize</span>(mq)<span class="op">;</span> <span class="co">// Initial check on page load</span></span></code></pre></div>
<p>This example switches between different layouts based on screen width, potentially hiding a sidebar on smaller screens. Note the initial call to <code>handleResize(mq)</code> to apply the initial layout based on the page load screen size.</p>
<h3 id="adaptive-images">Adaptive Images</h3>
<p>Use <code>matchMedia</code> to dynamically load different images based on screen resolution or device pixel ratio. This helps optimize image loading and reduce bandwidth usage.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> mq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(min-resolution: 2dppx)'</span>)<span class="op">;</span> <span class="co">// Check for high-resolution screens</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">handleImageChange</span>(e) {</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> img <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myImage'</span>)<span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    img<span class="op">.</span><span class="at">src</span> <span class="op">=</span> e<span class="op">.</span><span class="at">matches</span> <span class="op">?</span> <span class="st">'high-resolution.jpg'</span> <span class="op">:</span> <span class="st">'low-resolution.jpg'</span><span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>mq<span class="op">.</span><span class="fu">addListener</span>(handleImageChange)<span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">handleImageChange</span>(mq)<span class="op">;</span></span></code></pre></div>
<p>This loads a high-resolution image only when the device supports it; otherwise, a lower-resolution image is loaded.</p>
<h3 id="dynamic-styling-with-css-variables">Dynamic Styling with CSS Variables</h3>
<p><code>matchMedia</code> can be used to control CSS custom properties (variables), providing a more elegant way to manage styles based on media conditions.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> mq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(prefers-color-scheme: dark)'</span>)<span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">handleDarkMode</span>(e) {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">documentElement</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="fu">setProperty</span>(<span class="st">'--bg-color'</span><span class="op">,</span> e<span class="op">.</span><span class="at">matches</span> <span class="op">?</span> <span class="st">'#333'</span> <span class="op">:</span> <span class="st">'#fff'</span>)<span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">documentElement</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="fu">setProperty</span>(<span class="st">'--text-color'</span><span class="op">,</span> e<span class="op">.</span><span class="at">matches</span> <span class="op">?</span> <span class="st">'#fff'</span> <span class="op">:</span> <span class="st">'#333'</span>)<span class="op">;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>mq<span class="op">.</span><span class="fu">addListener</span>(handleDarkMode)<span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="fu">handleDarkMode</span>(mq)<span class="op">;</span></span></code></pre></div>
<p>This example sets different background and text colors based on the user’s preferred color scheme (dark mode or light mode). This keeps styling centralized in CSS but enables dynamic switching based on user preferences or device capabilities.</p>
<h3 id="feature-detection-and-conditional-rendering">Feature Detection and Conditional Rendering</h3>
<p>Beyond screen size, <code>matchMedia</code> can detect various device capabilities and features, enabling conditional rendering of content or components.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> touchMq <span class="op">=</span> <span class="bu">window</span><span class="op">.</span><span class="fu">matchMedia</span>(<span class="st">'(pointer: coarse)'</span>)<span class="op">;</span> <span class="co">// Check for touch devices</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">handleTouchDevice</span>(e) {</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (e<span class="op">.</span><span class="at">matches</span>) {</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Show touch-friendly interface elements</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'touch-controls'</span>)<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> <span class="st">'block'</span><span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Show alternative interface elements for mouse/keyboard</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'mouse-controls'</span>)<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> <span class="st">'block'</span><span class="op">;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>touchMq<span class="op">.</span><span class="fu">addListener</span>(handleTouchDevice)<span class="op">;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">handleTouchDevice</span>(touchMq)<span class="op">;</span></span></code></pre></div>
<p>This example displays different interface controls based on whether the device primarily uses touch input (like a mobile phone) or mouse/keyboard input. This approach makes your application more accessible and usable across different input methods. Remember to always provide alternative ways for users to interact with your application if a feature is not available on their device.</p>
<h2 id="troubleshooting-and-common-issues">Troubleshooting and Common Issues</h2>
<p>This section addresses common problems encountered when working with <code>matchMedia</code>.</p>
<h3 id="debugging-media-query-issues">Debugging Media Query Issues</h3>
<p>Incorrectly written media queries are a frequent source of problems. Double-check your syntax carefully. Common mistakes include:</p>
<ul>
<li><p><strong>Typos:</strong> Ensure that media feature names (e.g., <code>min-width</code>, <code>orientation</code>) and values are spelled correctly. Case sensitivity matters.</p></li>
<li><p><strong>Incorrect Units:</strong> Use the appropriate units for values (e.g., <code>px</code>, <code>em</code>, <code>rem</code> for lengths, <code>dpi</code> for resolution). Omitting units can lead to unexpected results.</p></li>
<li><p><strong>Logical Errors:</strong> Review your media query logic, including the use of <code>and</code>, <code>or</code>, and <code>not</code> operators. Make sure your conditions accurately reflect the intended behavior.</p></li>
<li><p><strong>Conflicting Queries:</strong> Ensure that your media queries don’t inadvertently conflict with each other. Prioritize media queries appropriately and avoid overlapping conditions that might produce unpredictable results.</p></li>
</ul>
<p><strong>Debugging Techniques:</strong></p>
<ul>
<li><p><strong>Console Logging:</strong> Use <code>console.log(mq.media)</code> to verify that the media query string passed to <code>matchMedia()</code> is what you expect. Log the <code>mq.matches</code> value to see if the query matches or not under various conditions.</p></li>
<li><p><strong>Browser Developer Tools:</strong> Use your browser’s developer tools (usually accessible by pressing F12) to inspect the CSS styles applied to your elements. Check the computed styles to make sure the media queries are being applied as expected.</p></li>
<li><p><strong>Simplify:</strong> If you have complex media queries, try simplifying them to isolate the problem. Test individual parts of the query separately to pinpoint the source of the error.</p></li>
</ul>
<h3 id="handling-browser-inconsistencies">Handling Browser Inconsistencies</h3>
<p>While <code>matchMedia</code> has broad browser support, minor inconsistencies may exist. To ensure reliable cross-browser functionality:</p>
<ul>
<li><p><strong>Polyfills:</strong> For older browsers lacking native <code>matchMedia</code> support, use a robust polyfill. This ensures consistent behavior across a wider range of browsers. Thoroughly test your application after adding a polyfill.</p></li>
<li><p><strong>Feature Detection:</strong> Use feature detection rather than relying on browser sniffing. This involves checking whether a specific feature (like <code>matchMedia</code>) is available instead of making assumptions about the browser itself. This approach produces cleaner and more maintainable code that adapts more readily to future browser updates.</p></li>
<li><p><strong>Testing:</strong> Test your code across different browsers and devices to ensure consistent behavior. Automated browser testing tools can be very helpful in this process.</p></li>
<li><p><strong>Graceful Degradation:</strong> Design your application to gracefully degrade in cases where <code>matchMedia</code> is unavailable or behaves unexpectedly. This might involve providing fallback mechanisms or alternative UI elements.</p></li>
</ul>
<h3 id="troubleshooting-listener-issues">Troubleshooting Listener Issues</h3>
<p>Problems with listeners can manifest as unexpected behavior or missing updates when media query conditions change.</p>
<ul>
<li><p><strong>Listener Scope:</strong> Double-check the scope of your listener function, especially if using <code>this</code> within the function. Ensure that <code>this</code> refers to the expected object. Using arrow functions (<code>() =&gt; {}</code>) can help manage the scope correctly.</p></li>
<li><p><strong>Multiple Listeners:</strong> Avoid adding the same listener multiple times to the same <code>MediaQueryList</code> object. This can lead to the function being called repeatedly.</p></li>
<li><p><strong>Removing Listeners:</strong> Always remove event listeners when they’re no longer needed (e.g., when a component unmounts). Failing to remove listeners can cause memory leaks and unpredictable behavior.</p></li>
<li><p><strong>Event Order:</strong> Be aware that the order in which listeners are added doesn’t guarantee the order of execution.</p></li>
</ul>
<p><strong>Debugging Listener Issues:</strong></p>
<ul>
<li><p><strong>Logging:</strong> Add console logs inside your listener function to confirm that it’s being called when the media query changes.</p></li>
<li><p><strong>Breakpoints:</strong> Use breakpoints in your debugger to step through the listener function and inspect the state of variables and objects.</p></li>
<li><p><strong>Temporary Removal:</strong> Temporarily remove some listeners to see if one listener is interfering with another. This can help isolate the source of the problem.</p></li>
</ul>
<p>By systematically investigating these areas, you can resolve most <code>matchMedia</code> related issues efficiently. Remember to utilize your browser’s developer tools extensively to assist your debugging workflow.</p>
<h2 id="alternatives-to-matchmedia">Alternatives to matchMedia</h2>
<p>While <code>matchMedia</code> is a powerful tool, certain scenarios might benefit from alternative approaches.</p>
<h3 id="using-css-media-queries-directly">Using CSS media queries directly</h3>
<p>For simple responsive design adjustments, relying solely on CSS media queries can be sufficient and often more efficient than using <code>matchMedia</code>. CSS media queries are directly handled by the browser, avoiding the overhead of JavaScript execution.</p>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Simplicity:</strong> Easier to implement for basic responsive adjustments.</li>
<li><strong>Performance:</strong> Generally more performant for simple styling changes.</li>
<li><strong>No JavaScript required:</strong> Reduces the amount of JavaScript needed in your project.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li><strong>Limited Dynamic Control:</strong> Less control over dynamic content changes based on media queries. You cannot directly use JavaScript to react to the changes.</li>
<li><strong>Difficult for Complex Logic:</strong> Managing complex responsive logic entirely in CSS can become cumbersome and difficult to maintain.</li>
</ul>
<p><strong>Example:</strong> A simple responsive layout change can be entirely handled in CSS:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* Styles for screens smaller than 768px */</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">@media</span> <span class="fu">(</span><span class="kw">max-width</span><span class="ch">:</span> <span class="dv">767</span><span class="dt">px</span><span class="fu">)</span> {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="pp">#sidebar</span> {</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">display</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="pp">#main-content</span> {</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* Styles for screens larger than or equal to 768px */</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="im">@media</span> <span class="fu">(</span><span class="kw">min-width</span><span class="ch">:</span> <span class="dv">768</span><span class="dt">px</span><span class="fu">)</span> {</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="pp">#sidebar</span> {</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="pp">#main-content</span> {</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span><span class="ch">:</span> <span class="dv">80</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This avoids JavaScript altogether. However, more complex logic requiring dynamic content adjustments or conditional rendering would be challenging to implement purely in CSS.</p>
<h3 id="alternative-libraries-and-frameworks">Alternative libraries and frameworks</h3>
<p>Several JavaScript libraries and frameworks provide features that overlap with or extend the functionality of <code>matchMedia</code>. These might offer additional benefits depending on your project’s needs. However, it’s important to carefully weigh the trade-offs: Adding external libraries increases your project’s size and dependencies.</p>
<ul>
<li><p><strong>Frameworks (React, Vue, Angular, etc.):</strong> Modern JavaScript frameworks usually have built-in mechanisms or readily available libraries for handling responsive design and media query changes. They often abstract away the details of <code>matchMedia</code>, providing higher-level abstractions and convenient APIs.</p></li>
<li><p><strong>CSS-in-JS Libraries:</strong> Libraries like styled-components or emotion allow you to write CSS directly within JavaScript components. They may include features that handle media queries within the styling definition, simplifying the management of responsive styling.</p></li>
<li><p><strong>Other Libraries:</strong> Some dedicated libraries focus on responsive image handling or other specific aspects of adaptive design. Research libraries to find the appropriate tools.</p></li>
</ul>
<p><strong>Considerations when choosing alternatives:</strong></p>
<ul>
<li><p><strong>Project Complexity:</strong> For simple projects, CSS media queries might suffice. For complex applications with dynamic updates, a framework’s built-in features or <code>matchMedia</code> might be more suitable.</p></li>
<li><p><strong>Project Size and Dependencies:</strong> Adding external libraries increases the project size and introduces dependencies. Evaluate if the benefits of an alternative library outweigh the potential overhead.</p></li>
<li><p><strong>Maintainability:</strong> Consider the long-term maintainability of the solution. A well-structured approach using <code>matchMedia</code> or a framework’s features can improve maintainability compared to complex CSS-only solutions.</p></li>
</ul>
<p>The best approach depends on your specific project requirements and context. Consider the factors mentioned above to make an informed choice.</p>
<h2 id="appendix">Appendix</h2>
<h3 id="glossary-of-terms">Glossary of Terms</h3>
<ul>
<li><p><strong>Media Query:</strong> A CSS rule that allows you to apply styles based on characteristics of the device displaying the content. These characteristics include screen size, resolution, orientation, and other media features.</p></li>
<li><p><strong>Media Query List (<code>MediaQueryList</code>):</strong> An object returned by <code>window.matchMedia()</code>. It represents a specific media query and provides information about whether that query currently matches the user’s environment and allows adding listeners for changes.</p></li>
<li><p><strong><code>matches</code> Property:</strong> A boolean property of a <code>MediaQueryList</code> object that indicates whether the associated media query currently matches the user’s environment (<code>true</code> if it matches, <code>false</code> otherwise).</p></li>
<li><p><strong><code>media</code> Property:</strong> A read-only string property of a <code>MediaQueryList</code> object that contains the original media query string.</p></li>
<li><p><strong><code>addListener</code> Method:</strong> A method of a <code>MediaQueryList</code> object used to add an event listener that is triggered whenever the <code>matches</code> property changes.</p></li>
<li><p><strong><code>removeListener</code> Method:</strong> A method of a <code>MediaQueryList</code> object used to remove an event listener that was previously added using <code>addListener</code>.</p></li>
<li><p><strong>Media Feature:</strong> A characteristic of the rendering device or environment that can be tested in a media query (e.g., <code>width</code>, <code>height</code>, <code>orientation</code>, <code>resolution</code>, <code>pointer</code>, <code>prefers-color-scheme</code>).</p></li>
<li><p><strong>Viewport:</strong> The visible area of the browser window.</p></li>
<li><p><strong>Device Pixel Ratio (DPR):</strong> The ratio of pixels on the physical screen to pixels in the viewport. A higher DPR indicates a higher screen resolution.</p></li>
<li><p><strong>Polyfill:</strong> A piece of JavaScript code that provides functionality for older browsers that don’t support a particular feature natively.</p></li>
</ul>
<h3 id="further-resources-and-links">Further Resources and Links</h3>
<ul>
<li><p><strong>MDN Web Docs - <code>matchMedia()</code>:</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia">https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia</a> (The official Mozilla Developer Network documentation for <code>matchMedia()</code>)</p></li>
<li><p><strong>Can I Use… <code>matchMedia</code> Support:</strong> <a href="https://caniuse.com/?search=matchMedia">https://caniuse.com/?search=matchMedia</a> (Check browser compatibility across different versions)</p></li>
<li><p><strong>Examples and Tutorials (search online):</strong> Numerous blog posts and tutorials demonstrate various ways to use <code>matchMedia</code>. Search for “matchMedia examples” or “matchMedia responsive design” to find relevant resources.</p></li>
</ul>
<p>This appendix provides a starting point for deeper exploration and serves as a reference for key terms and resources related to <code>matchMedia</code>. Remember that the web is constantly evolving, so always refer to up-to-date documentation for the most accurate and complete information.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>