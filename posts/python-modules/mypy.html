<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>mypy - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id="></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="../../favicon.ico">
<meta property="og:title" content="mypy - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">mypy - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-mypy" id="toc-what-is-mypy">What is mypy?</a></li>
  <li><a href="#why-use-mypy" id="toc-why-use-mypy">Why use mypy?</a></li>
  <li><a href="#mypy-vs.-dynamic-typing" id="toc-mypy-vs.-dynamic-typing">mypy vs.&nbsp;dynamic typing</a></li>
  <li><a href="#setting-up-mypy" id="toc-setting-up-mypy">Setting up mypy</a></li>
  <li><a href="#basic-usage-example" id="toc-basic-usage-example">Basic usage example</a></li>
  <li><a href="#type-hints" id="toc-type-hints">Type Hints</a>
  <ul>
  <li><a href="#basic-type-hints" id="toc-basic-type-hints">Basic type hints</a></li>
  <li><a href="#annotating-variables" id="toc-annotating-variables">Annotating variables</a></li>
  <li><a href="#annotating-function-parameters-and-return-values" id="toc-annotating-function-parameters-and-return-values">Annotating function parameters and return values</a></li>
  <li><a href="#type-aliases" id="toc-type-aliases">Type aliases</a></li>
  <li><a href="#union-types" id="toc-union-types">Union types</a></li>
  <li><a href="#optional-types" id="toc-optional-types">Optional types</a></li>
  <li><a href="#generic-types" id="toc-generic-types">Generic types</a></li>
  <li><a href="#type-variables" id="toc-type-variables">Type variables</a></li>
  <li><a href="#callable-types" id="toc-callable-types">Callable types</a></li>
  <li><a href="#tuple-types" id="toc-tuple-types">Tuple types</a></li>
  <li><a href="#list-set-and-dict-types" id="toc-list-set-and-dict-types">List, Set, and Dict types</a></li>
  <li><a href="#newtype" id="toc-newtype">NewType</a></li>
  <li><a href="#namedtuple" id="toc-namedtuple">NamedTuple</a></li>
  <li><a href="#typeddict" id="toc-typeddict">TypedDict</a></li>
  <li><a href="#forward-references" id="toc-forward-references">Forward references</a></li>
  <li><a href="#type-checking-modules" id="toc-type-checking-modules">Type checking modules</a></li>
  </ul></li>
  <li><a href="#advanced-type-hints" id="toc-advanced-type-hints">Advanced Type Hints</a>
  <ul>
  <li><a href="#type-variance-covariance-and-contravariance" id="toc-type-variance-covariance-and-contravariance">Type variance (covariance and contravariance)</a></li>
  <li><a href="#protocols" id="toc-protocols">Protocols</a></li>
  <li><a href="#type-guards" id="toc-type-guards">Type guards</a></li>
  <li><a href="#structural-subtyping" id="toc-structural-subtyping">Structural subtyping</a></li>
  <li><a href="#custom-type-checkers" id="toc-custom-type-checkers">Custom type checkers</a></li>
  <li><a href="#working-with-external-libraries" id="toc-working-with-external-libraries">Working with external libraries</a></li>
  </ul></li>
  <li><a href="#configuration" id="toc-configuration">Configuration</a>
  <ul>
  <li><a href="#mypy.ini-configuration-file" id="toc-mypy.ini-configuration-file">mypy.ini configuration file</a></li>
  <li><a href="#command-line-options" id="toc-command-line-options">Command-line options</a></li>
  <li><a href="#configuring-type-checking-behavior" id="toc-configuring-type-checking-behavior">Configuring type checking behavior</a></li>
  <li><a href="#ignoring-errors" id="toc-ignoring-errors">Ignoring errors</a></li>
  <li><a href="#configuring-plugins" id="toc-configuring-plugins">Configuring plugins</a></li>
  <li><a href="#working-with-different-python-versions" id="toc-working-with-different-python-versions">Working with different Python versions</a></li>
  </ul></li>
  <li><a href="#working-with-mypy" id="toc-working-with-mypy">Working with mypy</a>
  <ul>
  <li><a href="#running-mypy" id="toc-running-mypy">Running mypy</a></li>
  <li><a href="#interpreting-mypy-output" id="toc-interpreting-mypy-output">Interpreting mypy output</a></li>
  <li><a href="#fixing-type-errors" id="toc-fixing-type-errors">Fixing type errors</a></li>
  <li><a href="#integrating-mypy-with-ides" id="toc-integrating-mypy-with-ides">Integrating mypy with IDEs</a></li>
  <li><a href="#integrating-mypy-with-cicd" id="toc-integrating-mypy-with-cicd">Integrating mypy with CI/CD</a></li>
  <li><a href="#using-mypy-with-different-project-structures" id="toc-using-mypy-with-different-project-structures">Using mypy with different project structures</a></li>
  <li><a href="#debugging-type-errors" id="toc-debugging-type-errors">Debugging type errors</a></li>
  </ul></li>
  <li><a href="#advanced-topics" id="toc-advanced-topics">Advanced Topics</a>
  <ul>
  <li><a href="#stub-files" id="toc-stub-files">Stub files</a></li>
  <li><a href="#type-shedding" id="toc-type-shedding">Type shedding</a></li>
  <li><a href="#extending-mypy" id="toc-extending-mypy">Extending mypy</a></li>
  <li><a href="#contributing-to-mypy" id="toc-contributing-to-mypy">Contributing to mypy</a></li>
  <li><a href="#future-directions" id="toc-future-directions">Future directions</a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix">Appendix</a>
  <ul>
  <li><a href="#glossary-of-terms" id="toc-glossary-of-terms">Glossary of terms</a></li>
  <li><a href="#frequently-asked-questions-faq" id="toc-frequently-asked-questions-faq">Frequently Asked Questions (FAQ)</a></li>
  <li><a href="#troubleshooting-common-issues" id="toc-troubleshooting-common-issues">Troubleshooting common issues</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-mypy">What is mypy?</h3>
<p>Mypy is an optional static type checker for Python. It analyzes your Python code and reports type errors, helping you catch bugs early in the development process before they reach runtime. Unlike runtime type checking, mypy examines your code’s type annotations (using Python’s type hinting system) to verify type correctness <em>without</em> actually executing the code. This allows for faster feedback and improved code reliability.</p>
<h3 id="why-use-mypy">Why use mypy?</h3>
<p>Using mypy offers several significant advantages:</p>
<ul>
<li><strong>Early bug detection:</strong> Mypy identifies type errors during development, preventing runtime crashes and unexpected behavior. This leads to more robust and maintainable code.</li>
<li><strong>Improved code readability and maintainability:</strong> Type annotations clarify the intended use of variables, function parameters, and return values, making your code easier to understand and modify.</li>
<li><strong>Enhanced code refactoring:</strong> With type annotations, refactoring becomes safer as mypy can alert you to potential type-related issues introduced by your changes.</li>
<li><strong>Better collaboration:</strong> Type hints provide a common understanding of the code’s interface, improving collaboration among developers.</li>
<li><strong>Integration with IDEs:</strong> Many IDEs integrate with mypy, providing real-time feedback on type errors as you code.</li>
</ul>
<h3 id="mypy-vs.-dynamic-typing">mypy vs.&nbsp;dynamic typing</h3>
<p>Python is dynamically typed, meaning type checking happens at runtime. This provides flexibility but can lead to unexpected errors that only surface during execution. Mypy adds a layer of static type checking <em>before</em> runtime, leveraging type hints to catch many errors that would otherwise go unnoticed until runtime. While mypy doesn’t replace dynamic typing entirely, it acts as a powerful complement, significantly improving the reliability and maintainability of your Python projects.</p>
<h3 id="setting-up-mypy">Setting up mypy</h3>
<p>Setting up mypy is straightforward:</p>
<ol type="1">
<li><p><strong>Installation:</strong> Use <code>pip</code> to install mypy: <code>pip install mypy</code></p></li>
<li><p><strong>Type hints:</strong> Add type hints to your Python code using Python’s type hinting syntax. For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(name: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span></span></code></pre></div></li>
<li><p><strong>Configuration (Optional):</strong> You can customize mypy’s behavior through a <code>mypy.ini</code> configuration file (see mypy’s documentation for details).</p></li>
</ol>
<h3 id="basic-usage-example">Basic usage example</h3>
<p>After installing mypy and adding type hints to your code, you can run mypy from your terminal:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> my_script.py</span></code></pre></div>
<p>Replace <code>my_script.py</code> with the name of your Python file. Mypy will analyze the code and report any type errors it finds. For example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(x: <span class="bu">int</span>, y: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(add(<span class="dv">5</span>, <span class="st">"hello"</span>)) <span class="co"># Type error!</span></span></code></pre></div>
<p>Running mypy on this code will produce an error message indicating that you’re trying to add an integer and a string. Mypy helps you catch these issues before they cause problems in your application.</p>
<h2 id="type-hints">Type Hints</h2>
<h3 id="basic-type-hints">Basic type hints</h3>
<p>Python’s type hinting system uses annotations to specify the expected types of variables, function parameters, and return values. Type hints are added using colons followed by the type annotation. For example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>age: <span class="bu">int</span> <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>name: <span class="bu">str</span> <span class="op">=</span> <span class="st">"Alice"</span></span></code></pre></div>
<p>These annotations are for static analysis by tools like mypy; they don’t affect runtime behavior.</p>
<h3 id="annotating-variables">Annotating variables</h3>
<p>Variables are annotated with their type after the variable name and before the assignment operator:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x: <span class="bu">int</span> <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>y: <span class="bu">float</span> <span class="op">=</span> <span class="fl">3.14</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>is_active: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span></code></pre></div>
<p>Note that type annotations are not enforced at runtime; you can still assign a value of a different type to a variable, but mypy will flag it as an error.</p>
<h3 id="annotating-function-parameters-and-return-values">Annotating function parameters and return values</h3>
<p>Function parameters and return values are annotated using the same syntax:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(name: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(x: <span class="bu">int</span>, y: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span></code></pre></div>
<p>The <code>-&gt;</code> indicates the return type of the function.</p>
<h3 id="type-aliases">Type aliases</h3>
<p>Type aliases allow you to create more readable and maintainable code by giving names to complex types:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>StringList <span class="op">=</span> <span class="bu">list</span>[<span class="bu">str</span>]</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>Point <span class="op">=</span> <span class="bu">tuple</span>[<span class="bu">int</span>, <span class="bu">int</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>my_list: StringList <span class="op">=</span> [<span class="st">"apple"</span>, <span class="st">"banana"</span>]</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>my_point: Point <span class="op">=</span> (<span class="dv">10</span>, <span class="dv">20</span>)</span></code></pre></div>
<h3 id="union-types">Union types</h3>
<p>Union types indicate that a variable can hold values of multiple types:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>value: <span class="bu">int</span> <span class="op">|</span> <span class="bu">str</span> <span class="op">=</span> <span class="dv">10</span>  <span class="co"># value can be an int or a str</span></span></code></pre></div>
<p>This means <code>value</code> can be assigned an integer or a string.</p>
<h3 id="optional-types">Optional types</h3>
<p>Optional types specify that a variable may hold a value or <code>None</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>username: <span class="bu">str</span> <span class="op">|</span> <span class="va">None</span> <span class="op">=</span> <span class="va">None</span></span></code></pre></div>
<p>This is equivalent to <code>Optional[str]</code> in older versions of type hinting.</p>
<h3 id="generic-types">Generic types</h3>
<p>Generic types allow you to define types that can work with different types of data:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> List</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>numbers: List[<span class="bu">int</span>] <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>strings: List[<span class="bu">str</span>] <span class="op">=</span> [<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>]</span></code></pre></div>
<p><code>List[int]</code> means a list containing only integers, and <code>List[str]</code> means a list containing only strings.</p>
<h3 id="type-variables">Type variables</h3>
<p>Type variables are used in generic types to represent unspecified types:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> TypeVar</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> TypeVar(<span class="st">'T'</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> identity(x: T) <span class="op">-&gt;</span> T:</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x</span></code></pre></div>
<p>Here, <code>T</code> can represent any type.</p>
<h3 id="callable-types">Callable types</h3>
<p>Callable types specify the signature of callable objects (functions):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Callable</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>add: Callable[[<span class="bu">int</span>, <span class="bu">int</span>], <span class="bu">int</span>] <span class="op">=</span> <span class="kw">lambda</span> x, y: x <span class="op">+</span> y</span></code></pre></div>
<p>This states that <code>add</code> is a function that takes two integers and returns an integer.</p>
<h3 id="tuple-types">Tuple types</h3>
<p>Tuple types specify tuples with fixed lengths and types:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>point: <span class="bu">tuple</span>[<span class="bu">int</span>, <span class="bu">int</span>] <span class="op">=</span> (<span class="dv">10</span>, <span class="dv">20</span>)</span></code></pre></div>
<p>This indicates a tuple containing two integers.</p>
<h3 id="list-set-and-dict-types">List, Set, and Dict types</h3>
<p>These are the standard Python types with type annotations:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>names: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">=</span> [<span class="st">"Alice"</span>, <span class="st">"Bob"</span>]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>unique_names: <span class="bu">set</span>[<span class="bu">str</span>] <span class="op">=</span> {<span class="st">"Alice"</span>, <span class="st">"Bob"</span>}</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>ages: <span class="bu">dict</span>[<span class="bu">str</span>, <span class="bu">int</span>] <span class="op">=</span> {<span class="st">"Alice"</span>: <span class="dv">30</span>, <span class="st">"Bob"</span>: <span class="dv">25</span>}</span></code></pre></div>
<h3 id="newtype">NewType</h3>
<p><code>NewType</code> creates distinct types from existing types for better type safety:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> NewType</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>UserId <span class="op">=</span> NewType(<span class="st">'UserId'</span>, <span class="bu">int</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>user_id: UserId <span class="op">=</span> UserId(<span class="dv">123</span>)</span></code></pre></div>
<p><code>user_id</code> is now treated as a distinct type from <code>int</code> by mypy.</p>
<h3 id="namedtuple">NamedTuple</h3>
<p><code>NamedTuple</code> creates tuples with named fields:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> NamedTuple</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Point(NamedTuple):</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    x: <span class="bu">int</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    y: <span class="bu">int</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>p: Point <span class="op">=</span> Point(<span class="dv">10</span>, <span class="dv">20</span>)</span></code></pre></div>
<h3 id="typeddict">TypedDict</h3>
<p><code>TypedDict</code> creates dictionaries with specific key-value type constraints:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> TypedDict</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Person(TypedDict):</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    age: <span class="bu">int</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>person: Person <span class="op">=</span> {<span class="st">"name"</span>: <span class="st">"Alice"</span>, <span class="st">"age"</span>: <span class="dv">30</span>}</span></code></pre></div>
<h3 id="forward-references">Forward references</h3>
<p>Forward references are used when a type is defined after it is used:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> List</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Node:</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    children: List[<span class="st">"Node"</span>] <span class="co"># Forward reference to Node</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    ...</span></code></pre></div>
<p>The string <code>"Node"</code> is interpreted as the type <code>Node</code> after the class definition.</p>
<h3 id="type-checking-modules">Type checking modules</h3>
<p>Modules that are not type hinted can be treated as untyped. However, you can use <code># type: ignore</code> in certain circumstances to suppress type errors if you’re interacting with an external library that lacks type information. Or use type stubs which provide type information for external libraries separately.</p>
<h2 id="advanced-type-hints">Advanced Type Hints</h2>
<h3 id="type-variance-covariance-and-contravariance">Type variance (covariance and contravariance)</h3>
<p>Type variance describes how a generic type behaves when its type parameters are substituted with subtypes or supertypes. Python’s type system supports covariance and contravariance for specific generic types.</p>
<ul>
<li><p><strong>Covariance:</strong> A covariant type <code>C[T]</code> means that if <code>A</code> is a subtype of <code>B</code>, then <code>C[A]</code> is a subtype of <code>C[B]</code>. This is supported for read-only types like <code>Iterable[T]</code>. For example, <code>Iterable[int]</code> is a subtype of <code>Iterable[object]</code>.</p></li>
<li><p><strong>Contravariance:</strong> A contravariant type <code>C[T]</code> means that if <code>A</code> is a subtype of <code>B</code>, then <code>C[B]</code> is a subtype of <code>C[A]</code>. This is less common but relevant for types representing functions or callbacks where the type parameter represents an input type. For example, a function that accepts a <code>Callable[[object], Any]</code> can also accept a <code>Callable[[int], Any]</code> because <code>int</code> is a subtype of <code>object</code>.</p></li>
</ul>
<p>Mypy’s behavior regarding variance depends on the specific type and how it’s used.</p>
<h3 id="protocols">Protocols</h3>
<p>Protocols define a set of methods that a class must implement. They provide a way to perform duck typing with static type checking. They’re useful for defining interfaces that classes can adhere to.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Protocol</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Sendable(Protocol):</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> send(<span class="va">self</span>, message: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="va">None</span>: ...</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Email:</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> send(<span class="va">self</span>, message: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Sending email: </span><span class="sc">{</span>message<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SMS:</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> send(<span class="va">self</span>, message: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="va">None</span>:</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Sending SMS: </span><span class="sc">{</span>message<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> send_message(sender: Sendable, message: <span class="bu">str</span>):</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  sender.send(message)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>email <span class="op">=</span> Email()</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>sms <span class="op">=</span> SMS()</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>send_message(email, <span class="st">"Hello!"</span>)</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>send_message(sms, <span class="st">"Hello!"</span>)</span></code></pre></div>
<p>Mypy checks that the objects passed to <code>send_message</code> implement the <code>send</code> method defined in the <code>Sendable</code> protocol.</p>
<h3 id="type-guards">Type guards</h3>
<p>Type guards are functions that narrow down the type of a variable based on a condition. This is particularly helpful when dealing with union types:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Union</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_str(x: Union[<span class="bu">int</span>, <span class="bu">str</span>]) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_value(x: Union[<span class="bu">int</span>, <span class="bu">str</span>]):</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> is_str(x):</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"String: </span><span class="sc">{</span>x<span class="sc">.</span>upper()<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># mypy knows x is a str here</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Integer: </span><span class="sc">{</span>x <span class="op">*</span> <span class="dv">2</span><span class="sc">}</span><span class="ss">"</span>)     <span class="co"># mypy knows x is an int here</span></span></code></pre></div>
<p>The <code>is_str</code> function acts as a type guard; mypy uses its return value to refine the type of <code>x</code> within the <code>if</code> and <code>else</code> blocks.</p>
<h3 id="structural-subtyping">Structural subtyping</h3>
<p>Mypy supports structural subtyping, which means that a class is considered a subtype of another if it implements the required methods and attributes, even if it doesn’t explicitly inherit from it. This aligns with Python’s duck-typing philosophy.</p>
<h3 id="custom-type-checkers">Custom type checkers</h3>
<p>For advanced scenarios, you can write custom type checkers to extend mypy’s functionality and handle domain-specific types or logic that mypy cannot directly analyze. This usually involves implementing a plugin for mypy.</p>
<h3 id="working-with-external-libraries">Working with external libraries</h3>
<p>When using external libraries that lack type hints, you may need to employ several strategies:</p>
<ul>
<li><p><strong>Type stubs:</strong> Use type stubs (<code>.pyi</code> files) that provide type information for external libraries. Many popular libraries have community-maintained stubs.</p></li>
<li><p><strong>Ignoring errors:</strong> Use <code># type: ignore</code> comments to suppress type errors when you cannot easily add type hints or use stubs. This should be done sparingly, as it undermines the benefits of static typing.</p></li>
<li><p><strong>Runtime checks:</strong> In cases where static type checking is not feasible, add runtime type checks to ensure type correctness at runtime.</p></li>
<li><p><strong>Gradual typing:</strong> Adopt a gradual approach, starting with type-hinting critical parts of your codebase and gradually expanding coverage over time. This minimizes disruption and allows you to incrementally improve the type safety of your project.</p></li>
</ul>
<h2 id="configuration">Configuration</h2>
<h3 id="mypy.ini-configuration-file">mypy.ini configuration file</h3>
<p>Mypy’s behavior can be customized using a <code>mypy.ini</code> configuration file. This file is typically placed in the root directory of your project. It uses an INI-style format. Here are some common configuration options:</p>
<ul>
<li><code>[mypy]</code> section: Contains general mypy settings.</li>
<li><code>ignore_missing_imports</code>: Set to <code>true</code> to ignore errors for missing imports (useful when working with incomplete type stubs).</li>
<li><code>check_untyped_defs</code>: Set to <code>true</code> (default) to check functions and methods without type hints. Set to <code>false</code> to skip checking untyped code.</li>
<li><code>disallow_untyped_defs</code>: Set to <code>true</code> to disallow defining functions and methods without type hints (enforces stricter type checking).</li>
<li><code>strict_optional</code>: Set to <code>true</code> for stricter checking of optional types (<code>Optional[...]</code>).</li>
<li><code>warn_unused_ignores</code>: Warns about <code># type: ignore</code> comments that are not needed.</li>
<li><code>show_error_codes</code>: Shows error codes in the output, useful for understanding specific issues.</li>
<li><code>python_version</code>: Specifies the Python version to check against (e.g., <code>python_version = 3.9</code>).</li>
</ul>
<p><strong>Example <code>mypy.ini</code>:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[mypy]</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="dt">ignore_missing_imports </span><span class="ot">=</span><span class="st"> </span><span class="kw">True</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="dt">check_untyped_defs </span><span class="ot">=</span><span class="st"> </span><span class="kw">False</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="dt">strict_optional </span><span class="ot">=</span><span class="st"> </span><span class="kw">True</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="dt">show_error_codes </span><span class="ot">=</span><span class="st"> </span><span class="kw">True</span></span></code></pre></div>
<h3 id="command-line-options">Command-line options</h3>
<p>Mypy offers various command-line options to control its behavior. Some frequently used options include:</p>
<ul>
<li><code>--config-file FILE</code>: Specifies the path to the <code>mypy.ini</code> configuration file.</li>
<li><code>--pyversion VERSION</code>: Sets the Python version to check against.</li>
<li><code>--ignore-missing-imports</code>: Ignores errors for missing imports.</li>
<li><code>--strict</code>: Enables stricter type checking (equivalent to setting various stricter options in <code>mypy.ini</code>).</li>
<li><code>--install-types</code>: Installs stub files for specified packages.</li>
<li><code>--show-error-context</code>: Shows more context around reported errors.</li>
<li><code>-p PACKAGE</code>: Specifies a package to type check.</li>
</ul>
<h3 id="configuring-type-checking-behavior">Configuring type checking behavior</h3>
<p>You can configure various aspects of mypy’s type checking behavior through the <code>mypy.ini</code> file or command-line options. This includes controlling strictness levels, handling of untyped code, and the treatment of optional types. The <code>strict</code> option enables many stricter checks simultaneously, while individual options allow fine-grained control.</p>
<h3 id="ignoring-errors">Ignoring errors</h3>
<p>Use <code># type: ignore</code> comments to suppress specific type errors in your code. This should be used judiciously as it bypasses static type checking. Provide an optional error code after <code>ignore</code> for more precise control (e.g.&nbsp;<code># type: ignore[arg-type]</code>). Overuse can indicate potential areas for improvement in your type hints or the external libraries you are using. <code>mypy --warn-unused-ignores</code> can help identify unnecessary <code># type: ignore</code> lines.</p>
<h3 id="configuring-plugins">Configuring plugins</h3>
<p>Mypy supports plugins that extend its functionality. These are typically Python modules that provide custom type checkers or other extensions. You configure plugins by specifying their paths in the <code>mypy.ini</code> file using the <code>plugins</code> option. For example: <code>plugins = my_custom_plugin.py</code>.</p>
<h3 id="working-with-different-python-versions">Working with different Python versions</h3>
<p>Mypy supports checking code against different Python versions. You can specify the target Python version using the <code>--pyversion</code> command-line option or the <code>python_version</code> setting in your <code>mypy.ini</code> file. This ensures that your type hints are compatible with the intended Python runtime. Mypy will detect inconsistencies between your code and the specified Python version if type hints or language features are not supported in that version.</p>
<h2 id="working-with-mypy">Working with mypy</h2>
<h3 id="running-mypy">Running mypy</h3>
<p>The simplest way to run mypy is from your terminal:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> <span class="op">&lt;</span>your_script.py<span class="op">&gt;</span></span></code></pre></div>
<p>Replace <code>&lt;your_script.py&gt;</code> with the path to your Python file or directory. If you have a <code>mypy.ini</code> configuration file, mypy will automatically detect and use it. You can specify additional command-line options as needed (see the Configuration section). For larger projects, consider using the <code>-p</code> option to specify packages to check:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mypy</span> <span class="at">-p</span> mypackage</span></code></pre></div>
<p>This will check the <code>mypackage</code> directory and all its subpackages recursively.</p>
<h3 id="interpreting-mypy-output">Interpreting mypy output</h3>
<p>Mypy’s output indicates type errors it detected during analysis. The output typically includes:</p>
<ul>
<li><strong>File and line number:</strong> Shows the location of the error.</li>
<li><strong>Error message:</strong> A description of the type error.</li>
<li><strong>Error code:</strong> (Optional, if enabled) A code that further categorizes the error.</li>
<li><strong>Context:</strong> (Optional, if enabled) Additional information to help understand the error.</li>
</ul>
<p>Mypy outputs error messages even if it detects many errors in the same file. Each error message is treated as independent.</p>
<h3 id="fixing-type-errors">Fixing type errors</h3>
<p>Fixing type errors involves modifying your code to satisfy mypy’s type constraints. Common approaches include:</p>
<ul>
<li><strong>Adding type hints:</strong> Add missing type hints to variables, function parameters, and return values.</li>
<li><strong>Correcting type inconsistencies:</strong> Ensure that values assigned to variables match their declared types.</li>
<li><strong>Using type guards:</strong> Refine types using type guards to resolve ambiguity when dealing with union types.</li>
<li><strong>Refactoring code:</strong> Restructure your code to improve type safety and reduce the number of errors reported by mypy.</li>
<li><strong>Using type aliases:</strong> Create descriptive aliases for complex types, which improves readability and helps in identifying type-related issues.</li>
</ul>
<h3 id="integrating-mypy-with-ides">Integrating mypy with IDEs</h3>
<p>Many IDEs offer built-in support for mypy integration, providing real-time feedback on type errors as you code:</p>
<ul>
<li><strong>VS Code:</strong> Install the <code>Python</code> extension, configure mypy in your settings, and enable the linter.</li>
<li><strong>PyCharm:</strong> PyCharm has built-in support for mypy. Configure mypy settings in the project settings.</li>
<li><strong>Other IDEs:</strong> Check your IDE’s documentation to see how to integrate mypy.</li>
</ul>
<h3 id="integrating-mypy-with-cicd">Integrating mypy with CI/CD</h3>
<p>Integrating mypy into your CI/CD pipeline ensures that type errors are caught early in the development process. This typically involves adding a step to your CI/CD configuration to run mypy on your codebase before deploying. If mypy reports any errors, the build can fail, preventing the deployment of code with type errors.</p>
<h3 id="using-mypy-with-different-project-structures">Using mypy with different project structures</h3>
<p>Mypy can be used with various project structures, including single files, packages, and monorepos. For larger projects, you’ll typically use the <code>-p</code> flag to specify packages or directories to check. In monorepos, mypy can be run selectively on specific subprojects. Consider using a <code>mypy.ini</code> file within each subproject to tailor configuration for specific needs.</p>
<h3 id="debugging-type-errors">Debugging type errors</h3>
<p>Debugging type errors can involve:</p>
<ul>
<li><strong>Careful examination of error messages:</strong> Mypy’s error messages should clearly indicate the nature of the error and its location.</li>
<li><strong>Tracing variable types:</strong> Use the debugger or print statements to check the runtime types of variables to understand how types evolve through your code.</li>
<li><strong>Simplifying code:</strong> Isolate the problematic parts of your code to pinpoint the cause of the error.</li>
<li><strong>Using comments strategically:</strong> Use comments to guide mypy’s analysis in complex cases (e.g., <code># type: ignore</code>).</li>
<li><strong>Leveraging IDE features:</strong> Use debugging tools and stepping through your code in the IDE to inspect variable types and control flow.</li>
</ul>
<h2 id="advanced-topics">Advanced Topics</h2>
<h3 id="stub-files">Stub files</h3>
<p>Stub files (<code>.pyi</code> files) provide type information for libraries that don’t have built-in type hints. They contain only type annotations; they don’t include actual implementation code. Stub files are essential for using mypy effectively with external libraries that lack type hints. They allow mypy to perform static type checking even for code that relies on these external libraries. You can find stub files on sites like typeshed, or create your own if needed.</p>
<h3 id="type-shedding">Type shedding</h3>
<p>Type shedding is the process of automatically generating stub files from existing Python code. While not perfect, tools can extract type information from comments, docstrings, and code structure to create approximate stub files. This can be a useful technique for gradually introducing type hints into a large, untyped codebase. It helps bootstrap the process of adding type annotations, making it easier to start using mypy even with a legacy codebase.</p>
<h3 id="extending-mypy">Extending mypy</h3>
<p>Mypy’s functionality can be extended through plugins. Plugins are custom Python modules that implement type checkers for new types or custom logic to interact with mypy’s internal mechanisms. This allows you to add support for domain-specific languages, frameworks, or handle specific type checking scenarios not directly supported by mypy’s default type system. Developing plugins typically involves working with mypy’s internal API and understanding its architecture.</p>
<h3 id="contributing-to-mypy">Contributing to mypy</h3>
<p>Contributions to mypy are welcome! The mypy project uses a standard GitHub workflow. Before contributing, it is recommended to familiarize yourself with the project’s coding style, testing procedures, and contribution guidelines found in the project’s repository. Contributions can range from fixing bugs, improving documentation, adding new features, and developing plugins.</p>
<h3 id="future-directions">Future directions</h3>
<p>The future of mypy involves several potential areas of improvement and new features:</p>
<ul>
<li><strong>Improved error messages:</strong> Making error messages even clearer and more actionable.</li>
<li><strong>Better support for asynchronous code:</strong> Enhancements to handle asynchronous programming constructs more effectively.</li>
<li><strong>Enhanced performance:</strong> Optimizing mypy’s performance to handle even larger codebases more efficiently.</li>
<li><strong>Integration with other tools:</strong> Improving integration with other static analysis tools and IDEs.</li>
<li><strong>More sophisticated type inference:</strong> Improving mypy’s ability to infer types automatically, reducing the need for explicit type hints.</li>
<li><strong>Support for newer language features:</strong> Adding support for newer features as they are introduced in Python.</li>
</ul>
<h2 id="appendix">Appendix</h2>
<h3 id="glossary-of-terms">Glossary of terms</h3>
<ul>
<li><strong>Static type checker:</strong> A tool that analyzes code to identify type errors <em>without</em> executing the code.</li>
<li><strong>Type hint:</strong> An annotation in the code that specifies the expected type of a variable, function parameter, or return value.</li>
<li><strong>Type annotation:</strong> Similar to type hint; explicitly states the type of a variable or expression.</li>
<li><strong>Type checking:</strong> The process of verifying that the types used in code are consistent and correct.</li>
<li><strong>Type error:</strong> An error that occurs when code uses types inconsistently (e.g., adding a string to an integer).</li>
<li><strong>Runtime type checking:</strong> Type checking that happens during program execution.</li>
<li><strong>Static type checking:</strong> Type checking that happens before program execution (at compile time, or in the case of Python, before runtime).</li>
<li><strong>Type stub:</strong> A <code>.pyi</code> file containing only type information for a library or module.</li>
<li><strong>Type alias:</strong> A name given to a complex type for improved readability.</li>
<li><strong>Union type:</strong> A type that can hold values of multiple types.</li>
<li><strong>Optional type:</strong> A type that can hold a value or <code>None</code>.</li>
<li><strong>Generic type:</strong> A type that can work with different types of data.</li>
<li><strong>Type variable:</strong> A placeholder for an unspecified type in generic types.</li>
<li><strong>Callable type:</strong> A type that represents a callable object (function).</li>
<li><strong>Covariance:</strong> A property of generic types where a subtype can replace a supertype.</li>
<li><strong>Contravariance:</strong> A property of generic types where a supertype can replace a subtype (typically in the context of function arguments).</li>
<li><strong>Protocol:</strong> Defines a set of methods that a class must implement.</li>
<li><strong>Type guard:</strong> A function that narrows down the type of a variable based on a condition.</li>
<li><strong>Structural subtyping:</strong> A class is a subtype if it has the required methods and attributes, regardless of explicit inheritance.</li>
<li><strong>Type shedding:</strong> Automatically generating type stubs from existing Python code.</li>
</ul>
<h3 id="frequently-asked-questions-faq">Frequently Asked Questions (FAQ)</h3>
<ul>
<li><p><strong>Q: Why should I use mypy?</strong> A: Mypy helps catch type errors early in development, improving code quality, maintainability, and reducing runtime surprises.</p></li>
<li><p><strong>Q: How do I install mypy?</strong> A: Use <code>pip install mypy</code>.</p></li>
<li><p><strong>Q: What if a library doesn’t have type hints?</strong> A: Look for type stubs (<code>.pyi</code> files) or consider using <code># type: ignore</code> sparingly.</p></li>
<li><p><strong>Q: My IDE doesn’t show mypy errors. How do I fix it?</strong> A: Check your IDE’s settings to enable mypy integration.</p></li>
<li><p><strong>Q: Mypy is too slow. What can I do?</strong> A: Consider using incremental checking or focusing type checking on specific parts of your codebase.</p></li>
<li><p><strong>Q: How do I ignore specific errors?</strong> A: Use <code># type: ignore</code> comments, but use them cautiously.</p></li>
<li><p><strong>Q: How can I contribute to mypy?</strong> A: Check the mypy project’s contribution guidelines on GitHub.</p></li>
</ul>
<h3 id="troubleshooting-common-issues">Troubleshooting common issues</h3>
<ul>
<li><p><strong>“No module named ‘mypy’”</strong>: Ensure mypy is installed correctly using <code>pip install mypy</code>.</p></li>
<li><p><strong>Mypy reports errors on correct code:</strong> Double-check your type hints, ensure mypy is configured correctly (e.g., <code>mypy.ini</code>), and verify you’re using a compatible Python version.</p></li>
<li><p><strong>Mypy is very slow:</strong> Try incremental mypy runs (running it only on changed files since the last run). Check if your mypy configuration needs optimization. Very large projects may require significant resources.</p></li>
<li><p><strong>Mypy doesn’t find my type stubs:</strong> Ensure that your type stubs are installed and located correctly in a location that mypy can find them. Common locations include the Python package installation path or the <code>typeshed</code> directory.</p></li>
<li><p><strong>“ImportError: No module named ‘…’”:</strong> This indicates a missing dependency. Install the necessary library using <code>pip</code>. If the issue persists, you may need to ensure the library is properly configured within your Python environment.</p></li>
<li><p><strong>Obscure error messages:</strong> Try simplifying the code snippet causing the error. Check the mypy error code for details, and search online for similar issues. Consider enabling more verbose mypy output using command-line flags or <code>mypy.ini</code> to provide more contextual information.</p></li>
</ul>


<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>