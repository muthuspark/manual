<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>argparse - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id="></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="../../favicon.ico">
<meta property="og:title" content="argparse - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">argparse - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-argparse" id="toc-what-is-argparse">What is argparse?</a></li>
  <li><a href="#why-use-argparse" id="toc-why-use-argparse">Why use argparse?</a></li>
  <li><a href="#argparse-vs.-other-command-line-parsing-modules" id="toc-argparse-vs.-other-command-line-parsing-modules">argparse vs.&nbsp;other command-line parsing modules</a></li>
  <li><a href="#installation-and-setup" id="toc-installation-and-setup">Installation and Setup</a></li>
  <li><a href="#basic-usage" id="toc-basic-usage">Basic Usage</a>
  <ul>
  <li><a href="#creating-an-argumentparser-object" id="toc-creating-an-argumentparser-object">Creating an ArgumentParser object</a></li>
  <li><a href="#adding-arguments-with-add_argument" id="toc-adding-arguments-with-add_argument">Adding arguments with add_argument()</a></li>
  <li><a href="#parsing-arguments-with-parse_args" id="toc-parsing-arguments-with-parse_args">Parsing arguments with parse_args()</a></li>
  <li><a href="#accessing-parsed-arguments" id="toc-accessing-parsed-arguments">Accessing parsed arguments</a></li>
  <li><a href="#a-simple-example" id="toc-a-simple-example">A simple example</a></li>
  </ul></li>
  <li><a href="#argument-types-and-options" id="toc-argument-types-and-options">Argument Types and Options</a>
  <ul>
  <li><a href="#positional-arguments" id="toc-positional-arguments">Positional arguments</a></li>
  <li><a href="#optional-arguments" id="toc-optional-arguments">Optional arguments</a></li>
  <li><a href="#short-and-long-option-names" id="toc-short-and-long-option-names">Short and long option names</a></li>
  <li><a href="#data-types-strings-integers-floats-booleans" id="toc-data-types-strings-integers-floats-booleans">Data types: strings, integers, floats, booleans</a></li>
  <li><a href="#choices-for-arguments" id="toc-choices-for-arguments">Choices for arguments</a></li>
  <li><a href="#default-values-for-arguments" id="toc-default-values-for-arguments">Default values for arguments</a></li>
  <li><a href="#required-arguments" id="toc-required-arguments">Required arguments</a></li>
  <li><a href="#argument-help-text" id="toc-argument-help-text">Argument help text</a></li>
  </ul></li>
  <li><a href="#advanced-usage" id="toc-advanced-usage">Advanced Usage</a>
  <ul>
  <li><a href="#using-action-arguments" id="toc-using-action-arguments">Using action arguments</a></li>
  <li><a href="#store-actions-store-store_true-store_false" id="toc-store-actions-store-store_true-store_false">Store actions: store, store_true, store_false</a></li>
  <li><a href="#append-actions-append-append_const" id="toc-append-actions-append-append_const">Append actions: append, append_const</a></li>
  <li><a href="#count-action" id="toc-count-action">Count action</a></li>
  <li><a href="#custom-actions" id="toc-custom-actions">Custom actions</a></li>
  <li><a href="#subparsers-creating-subcommands" id="toc-subparsers-creating-subcommands">Subparsers: Creating subcommands</a></li>
  <li><a href="#argument-groups" id="toc-argument-groups">Argument groups</a></li>
  <li><a href="#mutually-exclusive-groups" id="toc-mutually-exclusive-groups">Mutually exclusive groups</a></li>
  <li><a href="#handling-errors" id="toc-handling-errors">Handling errors</a></li>
  <li><a href="#custom-error-handling" id="toc-custom-error-handling">Custom error handling</a></li>
  <li><a href="#argument-parsing-from-files" id="toc-argument-parsing-from-files">Argument parsing from files</a></li>
  </ul></li>
  <li><a href="#formatting-and-output" id="toc-formatting-and-output">Formatting and Output</a>
  <ul>
  <li><a href="#formatting-help-messages" id="toc-formatting-help-messages">Formatting help messages</a></li>
  <li><a href="#customizing-help-text" id="toc-customizing-help-text">Customizing help text</a></li>
  <li><a href="#using-formatters" id="toc-using-formatters">Using formatters</a></li>
  <li><a href="#generating-usage-messages" id="toc-generating-usage-messages">Generating usage messages</a></li>
  <li><a href="#adding-version-information" id="toc-adding-version-information">Adding version information</a></li>
  </ul></li>
  <li><a href="#best-practices-and-examples" id="toc-best-practices-and-examples">Best Practices and Examples</a>
  <ul>
  <li><a href="#designing-user-friendly-command-line-interfaces" id="toc-designing-user-friendly-command-line-interfaces">Designing user-friendly command-line interfaces</a></li>
  <li><a href="#best-practices-for-argument-naming-and-organization" id="toc-best-practices-for-argument-naming-and-organization">Best practices for argument naming and organization</a></li>
  <li><a href="#example-complex-command-line-application" id="toc-example-complex-command-line-application">Example: Complex command-line application</a></li>
  <li><a href="#example-configuration-file-parsing" id="toc-example-configuration-file-parsing">Example: Configuration file parsing</a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix">Appendix</a>
  <ul>
  <li><a href="#commonly-used-arguments-and-options" id="toc-commonly-used-arguments-and-options">Commonly used arguments and options</a></li>
  <li><a href="#troubleshooting-common-issues" id="toc-troubleshooting-common-issues">Troubleshooting common issues</a></li>
  <li><a href="#further-reading-and-resources" id="toc-further-reading-and-resources">Further reading and resources</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-argparse">What is argparse?</h3>
<p><code>argparse</code> is a module in Python’s standard library that’s designed to create user-friendly command-line interfaces (CLIs). It allows you to easily define arguments your script accepts, automatically generate help and usage messages, and handle argument parsing with minimal code. Instead of manually parsing <code>sys.argv</code>, <code>argparse</code> provides a structured and intuitive way to manage command-line options and their associated values. This leads to cleaner, more maintainable, and easier-to-use scripts.</p>
<h3 id="why-use-argparse">Why use argparse?</h3>
<p>Using <code>argparse</code> offers several significant advantages:</p>
<ul>
<li><p><strong>Improved User Experience:</strong> <code>argparse</code> automatically generates help messages (<code>-h</code> or <code>--help</code>) that clearly explain the available arguments, their types, and any required or optional parameters. This makes your scripts much easier for others (and yourself) to use.</p></li>
<li><p><strong>Reduced Boilerplate Code:</strong> Manually parsing <code>sys.argv</code> can be tedious and error-prone. <code>argparse</code> significantly reduces the amount of code required to handle argument parsing, allowing you to focus on the core logic of your script.</p></li>
<li><p><strong>Error Handling:</strong> <code>argparse</code> provides built-in error handling, automatically catching common issues like missing required arguments or invalid argument types. It can also generate informative error messages, guiding users towards correct usage.</p></li>
<li><p><strong>Flexibility and Extensibility:</strong> <code>argparse</code> supports a wide range of argument types (strings, integers, floats, booleans, choices, etc.), and allows for complex argument combinations and nesting. It is highly flexible and can adapt to even intricate CLI designs.</p></li>
<li><p><strong>Maintainability:</strong> Using <code>argparse</code> results in cleaner, more organized code that is easier to maintain and extend over time. The structured approach makes it simpler to modify or add new arguments without disrupting the existing functionality.</p></li>
</ul>
<h3 id="argparse-vs.-other-command-line-parsing-modules">argparse vs.&nbsp;other command-line parsing modules</h3>
<p>While other modules exist for parsing command-line arguments in Python (e.g., <code>getopt</code>, <code>optparse</code>), <code>argparse</code> is generally preferred due to its ease of use, extensive features, and clear error handling. <code>getopt</code> is a more basic module, suitable for simpler scripts, while <code>optparse</code> is now deprecated in favor of <code>argparse</code>. <code>argparse</code> provides a superior balance of simplicity and power, making it the best choice for most command-line applications.</p>
<h3 id="installation-and-setup">Installation and Setup</h3>
<p><code>argparse</code> is part of Python’s standard library, so there’s no need for separate installation. It’s available in all standard Python installations (Python 3.2 and later). To use it, simply import the module into your script:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> argparse</span></code></pre></div>
<p>No further setup is required. You can immediately begin defining your command-line arguments using the <code>ArgumentParser</code> class and its associated methods.</p>
<h2 id="basic-usage">Basic Usage</h2>
<h3 id="creating-an-argumentparser-object">Creating an ArgumentParser object</h3>
<p>The first step in using <code>argparse</code> is to create an <code>ArgumentParser</code> object. This object will hold the definition of your command-line arguments. Optionally, you can provide a description of your program as a string to the constructor. This description will be included in the help message.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> argparse</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> argparse.ArgumentParser(description<span class="op">=</span><span class="st">'A simple example program.'</span>)</span></code></pre></div>
<h3 id="adding-arguments-with-add_argument">Adding arguments with add_argument()</h3>
<p>You add arguments to the <code>ArgumentParser</code> object using the <code>add_argument()</code> method. This method takes several important parameters:</p>
<ul>
<li><p><strong><code>name_or_flags</code>:</strong> A string or a list of strings specifying the argument’s name(s). These are the strings used on the command line to specify the argument. You can specify short options (e.g., <code>-f</code>) and/or long options (e.g., <code>--file</code>).</p></li>
<li><p><strong><code>action</code>:</strong> Specifies how the argument should be handled. Common actions include <code>'store'</code>, <code>'store_true'</code>, <code>'store_false'</code>, and <code>'append'</code>. <code>'store'</code> is the default, storing the given value. <code>'store_true'</code> and <code>'store_false'</code> are used for boolean flags; they store <code>True</code> or <code>False</code> respectively. <code>'append'</code> appends each given value to a list.</p></li>
<li><p><strong><code>type</code>:</strong> Specifies the type of the argument’s value (e.g., <code>int</code>, <code>float</code>, <code>str</code>).</p></li>
<li><p><strong><code>default</code>:</strong> Specifies a default value if the argument is not provided on the command line.</p></li>
<li><p><strong><code>help</code>:</strong> A string describing the argument; this will be included in the help message.</p></li>
<li><p><strong><code>required</code>:</strong> A boolean that indicates whether the argument is required.</p></li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"filename"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"The input filename"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"-o"</span>, <span class="st">"--output"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"The output filename"</span>, default<span class="op">=</span><span class="st">"output.txt"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"-v"</span>, <span class="st">"--verbose"</span>, action<span class="op">=</span><span class="st">"store_true"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Increase output verbosity"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"-n"</span>, <span class="st">"--numbers"</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, action<span class="op">=</span><span class="st">"append"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Add numbers to a list"</span>)</span></code></pre></div>
<h3 id="parsing-arguments-with-parse_args">Parsing arguments with parse_args()</h3>
<p>Once you’ve defined all your arguments, you parse the command-line arguments using the <code>parse_args()</code> method. This method returns a <code>Namespace</code> object containing the parsed arguments.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>args <span class="op">=</span> parser.parse_args()</span></code></pre></div>
<h3 id="accessing-parsed-arguments">Accessing parsed arguments</h3>
<p>You can access the parsed arguments using the dot notation on the <code>Namespace</code> object. For example, if you added an argument named <code>filename</code>, you would access it using <code>args.filename</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Input filename: </span><span class="sc">{</span>args<span class="sc">.</span>filename<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Output filename: </span><span class="sc">{</span>args<span class="sc">.</span>output<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Verbose mode: </span><span class="sc">{</span>args<span class="sc">.</span>verbose<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Numbers: </span><span class="sc">{</span>args<span class="sc">.</span>numbers<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<h3 id="a-simple-example">A simple example</h3>
<p>This example shows a complete program using <code>argparse</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> argparse</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> argparse.ArgumentParser(description<span class="op">=</span><span class="st">'Add two numbers.'</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">'a'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'First number'</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">'b'</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, <span class="bu">help</span><span class="op">=</span><span class="st">'Second number'</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>args <span class="op">=</span> parser.parse_args()</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> args.a <span class="op">+</span> args.b</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The sum is: </span><span class="sc">{</span>result<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>To run this, save it as a Python file (e.g., <code>adder.py</code>) and then execute it from your terminal like this: <code>python adder.py 5 10</code>. The output will be “The sum is: 15”. Running <code>python adder.py -h</code> will show the help message.</p>
<h2 id="argument-types-and-options">Argument Types and Options</h2>
<h3 id="positional-arguments">Positional arguments</h3>
<p>Positional arguments are required arguments that must be provided in the command line in the order they are defined. They are specified in <code>add_argument()</code> without any leading hyphens (<code>-</code> or <code>--</code>). The order in which they appear in your script dictates the order in which they must be supplied on the command line.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"filename"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Input filename"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"output_dir"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Output directory"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage: my_script.py input.txt /path/to/output</span></span></code></pre></div>
<h3 id="optional-arguments">Optional arguments</h3>
<p>Optional arguments are not required and can be omitted from the command line. They are specified with hyphens (<code>-</code> for short options) or double hyphens (<code>--</code> for long options).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"-v"</span>, <span class="st">"--verbose"</span>, action<span class="op">=</span><span class="st">"store_true"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Increase verbosity"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"-o"</span>, <span class="st">"--output"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Output file (optional)"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage: my_script.py -v  or my_script.py --verbose --output output.txt or my_script.py input.txt -o results.txt</span></span></code></pre></div>
<h3 id="short-and-long-option-names">Short and long option names</h3>
<p>Optional arguments can have both short (single-hyphen) and long (double-hyphen) option names. Short options are typically single letters, while long options are more descriptive.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"-f"</span>, <span class="st">"--file"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Input file"</span>) <span class="co"># -f and --file are both valid</span></span></code></pre></div>
<h3 id="data-types-strings-integers-floats-booleans">Data types: strings, integers, floats, booleans</h3>
<p><code>argparse</code> automatically handles several common data types. You specify the type using the <code>type</code> argument in <code>add_argument()</code>. If no type is specified, strings are assumed.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"count"</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Number of iterations"</span>)  <span class="co"># Integer</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--value"</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">float</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Floating-point value"</span>) <span class="co"># Float</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--enabled"</span>, action<span class="op">=</span><span class="st">"store_true"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Enable feature"</span>) <span class="co"># Boolean (True if present)</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--disabled"</span>, action<span class="op">=</span><span class="st">"store_false"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Disable feature"</span>, default<span class="op">=</span><span class="va">True</span>) <span class="co"># Boolean (False if present)</span></span></code></pre></div>
<p>Note that <code>store_true</code> and <code>store_false</code> actions implicitly handle boolean values; you do not need to specify <code>type=bool</code> with them. Instead, they create a flag that changes the value.</p>
<h3 id="choices-for-arguments">Choices for arguments</h3>
<p>You can restrict the values an argument can accept using the <code>choices</code> argument.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--level"</span>, choices<span class="op">=</span>[<span class="st">"low"</span>, <span class="st">"medium"</span>, <span class="st">"high"</span>], <span class="bu">help</span><span class="op">=</span><span class="st">"Log level"</span>)</span></code></pre></div>
<p>Attempting to use a value not in the list will result in an error.</p>
<h3 id="default-values-for-arguments">Default values for arguments</h3>
<p>You can specify a default value for an argument using the <code>default</code> argument. This value will be used if the argument is not provided on the command line.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--port"</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">int</span>, default<span class="op">=</span><span class="dv">8080</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Port number (default: 8080)"</span>)</span></code></pre></div>
<h3 id="required-arguments">Required arguments</h3>
<p>You can make an optional argument required by setting <code>required=True</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--config"</span>, required<span class="op">=</span><span class="va">True</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Path to configuration file"</span>)</span></code></pre></div>
<p>This will cause <code>parse_args()</code> to raise an error if the argument isn’t provided. Note that positional arguments are implicitly required unless a default is provided.</p>
<h3 id="argument-help-text">Argument help text</h3>
<p>The <code>help</code> argument in <code>add_argument()</code> is crucial for providing clear instructions to the user. The text provided here will be included in the automatically generated help message (<code>-h</code> or <code>--help</code>). Write concise and informative help messages to improve the usability of your CLI.</p>
<h2 id="advanced-usage">Advanced Usage</h2>
<h3 id="using-action-arguments">Using action arguments</h3>
<p>The <code>action</code> argument in <code>add_argument()</code> controls how the argument values are handled. Beyond the basic <code>'store'</code> action (the default), several other actions offer powerful functionalities.</p>
<h3 id="store-actions-store-store_true-store_false">Store actions: store, store_true, store_false</h3>
<ul>
<li><code>'store'</code>: The default action. It stores the given value in the <code>Namespace</code> object.</li>
<li><code>'store_true'</code>: Sets the value to <code>True</code> if the flag is present on the command line; otherwise, the default value (usually <code>False</code>) is used.</li>
<li><code>'store_false'</code>: Sets the value to <code>False</code> if the flag is present; otherwise, the default value (usually <code>True</code>) is used.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--verbose"</span>, action<span class="op">=</span><span class="st">"store_true"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Enable verbose output"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--debug"</span>, action<span class="op">=</span><span class="st">"store_false"</span>, dest<span class="op">=</span><span class="st">"verbose"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Disable verbose output"</span>) <span class="co">#Note the dest</span></span></code></pre></div>
<h3 id="append-actions-append-append_const">Append actions: append, append_const</h3>
<ul>
<li><code>'append'</code>: Appends each given value to a list. If the argument appears multiple times, multiple values are appended.</li>
<li><code>'append_const'</code>: Appends a constant value to a list whenever the flag is encountered (useful for boolean flags that add to a collection).</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--option"</span>, action<span class="op">=</span><span class="st">"append"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Add an option (can be repeated)"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--include"</span>, action<span class="op">=</span><span class="st">"append_const"</span>, const<span class="op">=</span><span class="st">"value"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Append value to list"</span>)</span></code></pre></div>
<h3 id="count-action">Count action</h3>
<p><code>'count'</code> increments a counter each time the option is encountered.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"-v"</span>, <span class="st">"--verbose"</span>, action<span class="op">=</span><span class="st">"count"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Increase verbosity (can be repeated)"</span>)</span></code></pre></div>
<p><code>args.verbose</code> will be an integer representing the number of times <code>-v</code> or <code>--verbose</code> was specified.</p>
<h3 id="custom-actions">Custom actions</h3>
<p>You can create custom actions by subclassing <code>argparse.Action</code>. This allows you to define highly specialized argument handling.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> CustomAction(argparse.Action):</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__call__</span>(<span class="va">self</span>, parser, namespace, values, option_string<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Custom argument processing logic here</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">setattr</span>(namespace, <span class="va">self</span>.dest, values.upper()) <span class="co">#Example custom action to uppercase value</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--custom"</span>, action<span class="op">=</span>CustomAction, <span class="bu">help</span><span class="op">=</span><span class="st">"A custom action"</span>)</span></code></pre></div>
<h3 id="subparsers-creating-subcommands">Subparsers: Creating subcommands</h3>
<p>Subparsers allow you to create complex CLIs with nested commands.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>subparsers <span class="op">=</span> parser.add_subparsers(dest<span class="op">=</span><span class="st">"command"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Available commands"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>parser_a <span class="op">=</span> subparsers.add_parser(<span class="st">"a"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Command A help"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>parser_a.add_argument(<span class="st">"arg_a"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Argument for command A"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>parser_b <span class="op">=</span> subparsers.add_parser(<span class="st">"b"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Command B help"</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>parser_b.add_argument(<span class="st">"arg_b"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Argument for command B"</span>)</span></code></pre></div>
<p>This creates a CLI with commands <code>a</code> and <code>b</code>.</p>
<h3 id="argument-groups">Argument groups</h3>
<p>Argument groups allow you to logically group related arguments in the help message.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>group <span class="op">=</span> parser.add_argument_group(<span class="st">"Input Options"</span>, <span class="st">"Options related to input data"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>group.add_argument(<span class="st">"--input_file"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Input file"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>group.add_argument(<span class="st">"--input_format"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Input format"</span>)</span></code></pre></div>
<h3 id="mutually-exclusive-groups">Mutually exclusive groups</h3>
<p>Mutually exclusive groups enforce that only one argument from a group can be specified.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>group <span class="op">=</span> parser.add_mutually_exclusive_group()</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>group.add_argument(<span class="st">"--option_a"</span>, action<span class="op">=</span><span class="st">"store_true"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Option A"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>group.add_argument(<span class="st">"--option_b"</span>, action<span class="op">=</span><span class="st">"store_true"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Option B"</span>)</span></code></pre></div>
<h3 id="handling-errors">Handling errors</h3>
<p><code>argparse</code> automatically handles many common errors (e.g., missing required arguments, invalid argument types). It generates helpful error messages.</p>
<h3 id="custom-error-handling">Custom error handling</h3>
<p>For more specialized error handling, you can use <code>try-except</code> blocks to catch <code>argparse.ArgumentError</code> or other exceptions.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    args <span class="op">=</span> parser.parse_args()</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Your code here</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> argparse.ArgumentError <span class="im">as</span> e:</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<h3 id="argument-parsing-from-files">Argument parsing from files</h3>
<p><code>argparse</code> doesn’t directly support parsing arguments from files. However, you can achieve this by reading the file’s contents and then parsing them using <code>parser.parse_args(args=file_content.split())</code>. Note that this requires carefully formatting the file to mimic command-line arguments.</p>
<h2 id="formatting-and-output">Formatting and Output</h2>
<h3 id="formatting-help-messages">Formatting help messages</h3>
<p><code>argparse</code> automatically generates help messages that describe your program’s arguments. The format of these messages can be customized to a degree. The default formatting is generally sufficient for simple scripts, but for more complex applications, you might want to adjust the presentation.</p>
<h3 id="customizing-help-text">Customizing help text</h3>
<p>You can customize the help text displayed by providing a <code>description</code> to the <code>ArgumentParser</code> constructor and <code>help</code> text to the <code>add_argument()</code> method for each argument. The <code>help</code> text for an argument should be concise and clearly explain its purpose and usage. The <code>description</code> for the parser provides a broader overview of the program’s functionality.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> argparse.ArgumentParser(description<span class="op">=</span><span class="st">"This is a description of my program."</span>,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                                 formatter_class<span class="op">=</span>argparse.RawTextHelpFormatter) <span class="co">#Example of a formatter</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"input"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Path to the input file.  Must be a valid CSV."</span>)</span></code></pre></div>
<h3 id="using-formatters">Using formatters</h3>
<p><code>argparse</code> provides several formatter classes to control the layout of the help messages:</p>
<ul>
<li><p><code>argparse.HelpFormatter</code>: The default formatter. It arranges arguments in columns.</p></li>
<li><p><code>argparse.RawTextHelpFormatter</code>: Preserves whitespace and newlines in the help text. Useful for multiline descriptions.</p></li>
<li><p><code>argparse.ArgumentDefaultsHelpFormatter</code>: Includes default values in the help message.</p></li>
<li><p><code>argparse.MetavarTypeHelpFormatter</code>: Uses the <code>metavar</code> argument specified in <code>add_argument()</code> to display argument values in the help message.</p></li>
</ul>
<p>You choose a formatter by specifying the <code>formatter_class</code> argument when creating the <code>ArgumentParser</code> object.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> argparse.ArgumentParser(description<span class="op">=</span><span class="st">"My program"</span>, formatter_class<span class="op">=</span>argparse.ArgumentDefaultsHelpFormatter)</span></code></pre></div>
<h3 id="generating-usage-messages">Generating usage messages</h3>
<p>The usage message shows users a basic example of how to run the program. It is typically included at the beginning of the help message. You can customize it using the <code>usage</code> argument in the <code>ArgumentParser</code> constructor. If you don’t provide a <code>usage</code> string, <code>argparse</code> will generate one based on your arguments.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> argparse.ArgumentParser(usage<span class="op">=</span><span class="st">'</span><span class="sc">%(prog)s</span><span class="st"> [options] input_file'</span>, description<span class="op">=</span><span class="st">"My program"</span>)</span></code></pre></div>
<p><code>%(prog)s</code> is a placeholder that will be replaced with the program’s name.</p>
<h3 id="adding-version-information">Adding version information</h3>
<p>You can add version information to your CLI’s help message by using the <code>version</code> argument in the <code>ArgumentParser</code> constructor and then calling <code>parser.parse_args()</code> with the <code>version</code> argument.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> argparse.ArgumentParser(prog<span class="op">=</span><span class="st">'myprogram'</span>, description<span class="op">=</span><span class="st">'My Program Description'</span>, version<span class="op">=</span><span class="st">'</span><span class="sc">%(prog)s</span><span class="st"> 1.0'</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>args <span class="op">=</span> parser.parse_args([<span class="st">'--version'</span>]) <span class="co"># Accessing version info via --version</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(args)</span></code></pre></div>
<p>This allows users to check the version using <code>myprogram --version</code> or <code>myprogram -V</code>. The <code>version</code> argument should be a string containing version information. Using <code>%(prog)s</code> will insert the program name.</p>
<h2 id="best-practices-and-examples">Best Practices and Examples</h2>
<h3 id="designing-user-friendly-command-line-interfaces">Designing user-friendly command-line interfaces</h3>
<p>Creating a user-friendly CLI involves careful consideration of several factors:</p>
<ul>
<li><p><strong>Clear and Concise Argument Names:</strong> Use descriptive, self-explanatory names for your arguments. Avoid abbreviations unless they are widely understood. Long options are generally preferred for clarity.</p></li>
<li><p><strong>Logical Argument Grouping:</strong> Group related arguments together using argument groups to improve readability in the help message.</p></li>
<li><p><strong>Consistent Naming Conventions:</strong> Follow consistent naming conventions (e.g., using hyphens or underscores) for arguments to maintain uniformity.</p></li>
<li><p><strong>Comprehensive Help Messages:</strong> Provide comprehensive help messages that clearly explain the purpose and usage of each argument.</p></li>
<li><p><strong>Input Validation:</strong> Implement input validation to catch errors and prevent unexpected behavior.</p></li>
<li><p><strong>Error Handling:</strong> Provide informative error messages that guide users towards correct usage.</p></li>
<li><p><strong>Default Values:</strong> Use default values for optional arguments to reduce the amount of information users need to provide.</p></li>
<li><p><strong>Subcommands (for complex applications):</strong> For complex applications with many features, consider using subcommands to break down the CLI into smaller, more manageable parts.</p></li>
</ul>
<h3 id="best-practices-for-argument-naming-and-organization">Best practices for argument naming and organization</h3>
<ul>
<li><strong>Use descriptive names:</strong> Names should clearly indicate the argument’s purpose. For example, <code>--output-file</code> is better than <code>-o</code>.</li>
<li><strong>Use consistent capitalization:</strong> Use either snake_case or camelCase consistently.</li>
<li><strong>Group related arguments:</strong> Use <code>add_argument_group</code> to logically group arguments.</li>
<li><strong>Order arguments logically:</strong> Positional arguments first, followed by optional arguments, grouped by functionality.</li>
<li><strong>Use default values where appropriate:</strong> Reduce the number of arguments users need to supply.</li>
<li><strong>Avoid ambiguous arguments:</strong> Ensure argument names and functionality are clear and distinct.</li>
</ul>
<h3 id="example-complex-command-line-application">Example: Complex command-line application</h3>
<p>This example demonstrates a more complex CLI with subcommands and argument groups:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> argparse</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> argparse.ArgumentParser(description<span class="op">=</span><span class="st">"A complex command-line application"</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>subparsers <span class="op">=</span> parser.add_subparsers(dest<span class="op">=</span><span class="st">"command"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Available commands"</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Subcommand: process</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>parser_process <span class="op">=</span> subparsers.add_parser(<span class="st">"process"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Process data"</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>parser_process.add_argument(<span class="st">"input_file"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Input file path"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>parser_process.add_argument(<span class="st">"-o"</span>, <span class="st">"--output_dir"</span>, default<span class="op">=</span><span class="st">"."</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Output directory"</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>input_group <span class="op">=</span> parser_process.add_argument_group(<span class="st">"Input Options"</span>, <span class="st">"Options related to input data"</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>input_group.add_argument(<span class="st">"--format"</span>, choices<span class="op">=</span>[<span class="st">"csv"</span>, <span class="st">"json"</span>], default<span class="op">=</span><span class="st">"csv"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Input file format"</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Subcommand: analyze</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>parser_analyze <span class="op">=</span> subparsers.add_parser(<span class="st">"analyze"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Analyze processed data"</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>parser_analyze.add_argument(<span class="st">"input_file"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Input file path (processed data)"</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>parser_analyze.add_argument(<span class="st">"--threshold"</span>, <span class="bu">type</span><span class="op">=</span><span class="bu">float</span>, default<span class="op">=</span><span class="fl">0.5</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Analysis threshold"</span>)</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>args <span class="op">=</span> parser.parse_args()</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Process arguments based on the chosen command</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> args.command <span class="op">==</span> <span class="st">"process"</span>:</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Processing data from </span><span class="sc">{</span>args<span class="sc">.</span>input_file<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>args<span class="sc">.</span>output_dir<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> args.command <span class="op">==</span> <span class="st">"analyze"</span>:</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Analyzing data from </span><span class="sc">{</span>args<span class="sc">.</span>input_file<span class="sc">}</span><span class="ss"> with threshold </span><span class="sc">{</span>args<span class="sc">.</span>threshold<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<h3 id="example-configuration-file-parsing">Example: Configuration file parsing</h3>
<p>While <code>argparse</code> doesn’t directly parse config files, you can combine it with a config file parser (like <code>configparser</code> or <code>toml</code>) to create a flexible CLI:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> argparse</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> configparser</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>parser <span class="op">=</span> argparse.ArgumentParser(description<span class="op">=</span><span class="st">"Program using config file"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>parser.add_argument(<span class="st">"--config"</span>, default<span class="op">=</span><span class="st">"config.ini"</span>, <span class="bu">help</span><span class="op">=</span><span class="st">"Path to config file"</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>args <span class="op">=</span> parser.parse_args()</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>config <span class="op">=</span> configparser.ConfigParser()</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>config.read(args.config)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Access config values</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>input_file <span class="op">=</span> config[<span class="st">"DEFAULT"</span>][<span class="st">"input_file"</span>]</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>output_dir <span class="op">=</span> config[<span class="st">"DEFAULT"</span>][<span class="st">"output_dir"</span>]</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Using input file: </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">, output directory: </span><span class="sc">{</span>output_dir<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>This shows how to use command-line arguments (here, the config file path) to control the settings read from a configuration file. The command-line arguments provide overrides for the default values specified in the configuration file.</p>
<h2 id="appendix">Appendix</h2>
<h3 id="commonly-used-arguments-and-options">Commonly used arguments and options</h3>
<p>This section summarizes frequently used arguments and options within <code>argparse</code>:</p>
<table class="caption-top">
<colgroup>
<col style="width: 17%">
<col style="width: 51%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th>Argument/Option</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ArgumentParser()</code></td>
<td>Creates the argument parser object.</td>
<td><code>parser = argparse.ArgumentParser()</code></td>
</tr>
<tr class="even">
<td><code>add_argument()</code></td>
<td>Adds an argument to the parser.</td>
<td><code>parser.add_argument("filename", help="Input file")</code></td>
</tr>
<tr class="odd">
<td><code>description</code></td>
<td>Description of the program (in <code>ArgumentParser()</code>).</td>
<td><code>parser = argparse.ArgumentParser(description="My program")</code></td>
</tr>
<tr class="even">
<td><code>help</code></td>
<td>Help text for an argument.</td>
<td><code>parser.add_argument("-v", help="Verbose mode")</code></td>
</tr>
<tr class="odd">
<td><code>action</code></td>
<td>Specifies how the argument is handled (<code>store</code>, <code>store_true</code>, <code>store_false</code>, <code>append</code>, <code>count</code>, etc.).</td>
<td><code>parser.add_argument("-v", action="store_true")</code></td>
</tr>
<tr class="even">
<td><code>type</code></td>
<td>Specifies the data type of the argument (int, float, str, etc.).</td>
<td><code>parser.add_argument("--count", type=int)</code></td>
</tr>
<tr class="odd">
<td><code>default</code></td>
<td>Default value if the argument is not provided.</td>
<td><code>parser.add_argument("--port", default=8080)</code></td>
</tr>
<tr class="even">
<td><code>required</code></td>
<td>Indicates if the argument is required.</td>
<td><code>parser.add_argument("--config", required=True)</code></td>
</tr>
<tr class="odd">
<td><code>choices</code></td>
<td>Restricts the argument to a set of choices.</td>
<td><code>parser.add_argument("--level", choices=["low", "high"])</code></td>
</tr>
<tr class="even">
<td><code>metavar</code></td>
<td>Specifies the name to be displayed in the help message for the argument.</td>
<td><code>parser.add_argument("file", metavar="FILE")</code></td>
</tr>
<tr class="odd">
<td><code>dest</code></td>
<td>The name used to store the value in the namespace (used with some actions).</td>
<td><code>parser.add_argument("-o", "--output", dest="outfile")</code></td>
</tr>
<tr class="even">
<td><code>formatter_class</code></td>
<td>Specifies the help message formatter.</td>
<td><code>parser.add_argument(formatter_class=argparse.RawTextHelpFormatter)</code></td>
</tr>
<tr class="odd">
<td><code>parse_args()</code></td>
<td>Parses the command-line arguments.</td>
<td><code>args = parser.parse_args()</code></td>
</tr>
<tr class="even">
<td><code>add_argument_group()</code></td>
<td>Creates a group of related arguments.</td>
<td><code>group = parser.add_argument_group("Input", "Input options")</code></td>
</tr>
<tr class="odd">
<td><code>add_mutually_exclusive_group()</code></td>
<td>Creates a group where only one argument can be specified.</td>
<td><code>group = parser.add_mutually_exclusive_group()</code></td>
</tr>
<tr class="even">
<td><code>add_subparsers()</code></td>
<td>Creates subcommands.</td>
<td><code>subparsers = parser.add_subparsers()</code></td>
</tr>
</tbody>
</table>
<h3 id="troubleshooting-common-issues">Troubleshooting common issues</h3>
<ul>
<li><p><strong><code>error: argument --option: expected one argument</code>:</strong> You likely forgot to provide a value to an argument that requires one.</p></li>
<li><p><strong><code>usage: myprogram.py [-h] [--option OPTION]</code>:</strong> Check your argument definitions. The <code>usage</code> message shows the expected syntax.</p></li>
<li><p><strong><code>TypeError: unsupported operand type(s) for +: 'int' and 'str'</code>:</strong> You are trying to perform an operation (like addition) on arguments of incompatible types. Ensure you specify the correct <code>type</code> in <code>add_argument()</code>.</p></li>
<li><p><strong><code>SystemExit: 2</code>:</strong> This often indicates that <code>argparse</code> encountered an error during argument parsing (e.g., missing required arguments, invalid input). Check the error message for details.</p></li>
<li><p><strong>Help message doesn’t show default values:</strong> Use <code>ArgumentDefaultsHelpFormatter</code> as your formatter class.</p></li>
</ul>
<p>For more detailed error messages, use the <code>-v</code> or <code>--verbose</code> flag with the Python interpreter, or add explicit error handling as shown in the previous section.</p>
<h3 id="further-reading-and-resources">Further reading and resources</h3>
<ul>
<li><p><strong>Official Python Documentation:</strong> The official <code>argparse</code> documentation provides comprehensive information on all aspects of the module: <a href="https://docs.python.org/3/library/argparse.html">https://docs.python.org/3/library/argparse.html</a></p></li>
<li><p><strong>Real Python Tutorial:</strong> This tutorial offers a more practical introduction to <code>argparse</code>: <a href="https://realpython.com/command-line-interfaces-python-argparse/">https://realpython.com/command-line-interfaces-python-argparse/</a> (and other similar online tutorials).</p></li>
<li><p><strong>Stack Overflow:</strong> For specific questions or problems, Stack Overflow is a valuable resource. Search for “python argparse” along with your specific issue.</p></li>
</ul>
<p>Remember to consult the official documentation for the most accurate and up-to-date information.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>