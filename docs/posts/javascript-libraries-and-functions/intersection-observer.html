<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">
<meta name="dcterms.date" content="2025-02-09">
<meta name="description" content="The Intersection Observer API is a powerful browser feature that provides a mechanism to asynchronously observe changes in the intersection of a target…">

<title>Intersection Observer - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  border: none;
  border-top: 1px solid #1a1a1a;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MXDPF6L5TL"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MXDPF6L5TL', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta property="og:title" content="Intersection Observer - Documentation – Technical Manuals">
<meta property="og:description" content="Comprehensive technical documentation and tutorials for JavaScript libraries and Python modules.">
<meta property="og:image" content="https://manuals.muthu.co//og-image.png">
<meta property="og:site_name" content="Technical Manuals">
<meta property="og:locale" content="en_US">
<meta property="og:image:height" content="630">
<meta property="og:image:width" content="1200">
<meta name="twitter:title" content="Intersection Observer - Documentation – Technical Manuals">
<meta name="twitter:description" content="Comprehensive technical documentation and tutorials for JavaScript libraries and Python modules.">
<meta name="twitter:image" content="https://manuals.muthu.co//og-image.png">
<meta name="twitter:creator" content="@krimuthu">
<meta name="twitter:site" content="@krimuthu">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image-height" content="630">
<meta name="twitter:image-width" content="1200">
<link rel="canonical" href="https://manuals.muthu.co/posts/javascript-libraries-and-functions/intersection-observer.html">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Technical Manuals",
  "url": "https://manuals.muthu.co/",
  "description": "Comprehensive technical documentation and tutorials for JavaScript libraries and Python modules.",
  "author": {
    "@type": "Person",
    "name": "Muthukrishnan",
    "url": "https://manuals.muthu.co/about.html",
    "sameAs": [
      "https://github.com/muthuspark",
      "https://linkedin.com/in/krimuthu",
      "https://twitter.com/krimuthu"
    ]
  },
  "publisher": {
    "@type": "Person",
    "name": "Muthukrishnan"
  },
  "inLanguage": "en-US",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://manuals.muthu.co/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<meta name="author" content="Muthukrishnan">
<meta name="robots" content="index, follow">
<meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<link rel="author" href="https://manuals.muthu.co/about.html">


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">Intersection Observer - Documentation</h1>

<p class="date">2025-02-09</p>
</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#intersection-observer-api" id="toc-intersection-observer-api">Intersection Observer API</a>
  <ul>
  <li><a href="#what-is-the-intersection-observer-api" id="toc-what-is-the-intersection-observer-api">What is the Intersection Observer API?</a></li>
  <li><a href="#why-use-intersection-observer" id="toc-why-use-intersection-observer">Why use Intersection Observer?</a></li>
  <li><a href="#when-to-use-intersection-observer" id="toc-when-to-use-intersection-observer">When to use Intersection Observer?</a></li>
  <li><a href="#browser-compatibility" id="toc-browser-compatibility">Browser Compatibility</a></li>
  <li><a href="#basic-terminology" id="toc-basic-terminology">Basic Terminology</a></li>
  </ul></li>
  <li><a href="#core-concepts" id="toc-core-concepts">Core Concepts</a>
  <ul>
  <li><a href="#the-intersectionobserver-constructor" id="toc-the-intersectionobserver-constructor">The <code>IntersectionObserver</code> Constructor</a></li>
  <li><a href="#the-intersectionobserverentry-object" id="toc-the-intersectionobserverentry-object">The <code>IntersectionObserverEntry</code> Object</a></li>
  <li><a href="#the-intersectionobservercallback-function" id="toc-the-intersectionobservercallback-function">The <code>IntersectionObserverCallback</code> Function</a></li>
  <li><a href="#understanding-isintersecting" id="toc-understanding-isintersecting">Understanding <code>isIntersecting</code></a></li>
  <li><a href="#understanding-intersectionratio" id="toc-understanding-intersectionratio">Understanding <code>intersectionRatio</code></a></li>
  <li><a href="#understanding-boundingclientrect-rootbounds-and-intersectionrect" id="toc-understanding-boundingclientrect-rootbounds-and-intersectionrect">Understanding <code>boundingClientRect</code>, <code>rootBounds</code>, and <code>intersectionRect</code></a></li>
  <li><a href="#understanding-time" id="toc-understanding-time">Understanding <code>time</code></a></li>
  <li><a href="#root-rootmargin-and-threshold-parameters" id="toc-root-rootmargin-and-threshold-parameters">Root, rootMargin, and threshold Parameters</a></li>
  </ul></li>
  <li><a href="#using-the-intersection-observer-api" id="toc-using-the-intersection-observer-api">Using the Intersection Observer API</a>
  <ul>
  <li><a href="#creating-an-intersection-observer-instance" id="toc-creating-an-intersection-observer-instance">Creating an Intersection Observer Instance</a></li>
  <li><a href="#observing-a-target-element" id="toc-observing-a-target-element">Observing a Target Element</a></li>
  <li><a href="#handling-intersection-changes" id="toc-handling-intersection-changes">Handling Intersection Changes</a></li>
  <li><a href="#disconnecting-the-observer" id="toc-disconnecting-the-observer">Disconnecting the Observer</a></li>
  <li><a href="#example-lazy-loading-images" id="toc-example-lazy-loading-images">Example: Lazy Loading Images</a></li>
  <li><a href="#example-infinite-scrolling" id="toc-example-infinite-scrolling">Example: Infinite Scrolling</a></li>
  <li><a href="#example-tracking-element-visibility" id="toc-example-tracking-element-visibility">Example: Tracking Element Visibility</a></li>
  <li><a href="#example-implementing-a-progress-bar-based-on-visibility" id="toc-example-implementing-a-progress-bar-based-on-visibility">Example: Implementing a Progress Bar Based on Visibility</a></li>
  </ul></li>
  <li><a href="#advanced-techniques" id="toc-advanced-techniques">Advanced Techniques</a>
  <ul>
  <li><a href="#using-multiple-thresholds" id="toc-using-multiple-thresholds">Using Multiple Thresholds</a></li>
  <li><a href="#working-with-different-root-elements" id="toc-working-with-different-root-elements">Working with Different Root Elements</a></li>
  <li><a href="#using-rootmargin-for-custom-margins" id="toc-using-rootmargin-for-custom-margins">Using <code>rootMargin</code> for Custom Margins</a></li>
  <li><a href="#optimizing-performance-for-many-observed-elements" id="toc-optimizing-performance-for-many-observed-elements">Optimizing Performance for Many Observed Elements</a></li>
  <li><a href="#handling-unobserved-elements-disconnect-and-re-observe" id="toc-handling-unobserved-elements-disconnect-and-re-observe">Handling Unobserved Elements (Disconnect and Re-observe)</a></li>
  <li><a href="#integration-with-other-apis-e.g.-animation-libraries" id="toc-integration-with-other-apis-e.g.-animation-libraries">Integration with Other APIs (e.g., Animation Libraries)</a></li>
  </ul></li>
  <li><a href="#troubleshooting-and-best-practices" id="toc-troubleshooting-and-best-practices">Troubleshooting and Best Practices</a>
  <ul>
  <li><a href="#common-errors-and-their-solutions" id="toc-common-errors-and-their-solutions">Common Errors and Their Solutions</a></li>
  <li><a href="#performance-considerations-and-optimization-strategies" id="toc-performance-considerations-and-optimization-strategies">Performance Considerations and Optimization Strategies</a></li>
  <li><a href="#accessibility-considerations" id="toc-accessibility-considerations">Accessibility Considerations</a></li>
  <li><a href="#debugging-techniques" id="toc-debugging-techniques">Debugging Techniques</a></li>
  <li><a href="#alternative-approaches-for-specific-use-cases" id="toc-alternative-approaches-for-specific-use-cases">Alternative Approaches for Specific Use Cases</a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix">Appendix</a>
  <ul>
  <li><a href="#complete-code-examples" id="toc-complete-code-examples">Complete Code Examples</a></li>
  <li><a href="#browser-compatibility-table-detailed" id="toc-browser-compatibility-table-detailed">Browser Compatibility Table (Detailed)</a></li>
  <li><a href="#glossary-of-terms" id="toc-glossary-of-terms">Glossary of Terms</a></li>
  <li><a href="#further-reading-and-resources" id="toc-further-reading-and-resources">Further Reading and Resources</a></li>
  </ul></li>
  </ul>
</nav>
<h2 id="intersection-observer-api">Intersection Observer API</h2>
<h3 id="what-is-the-intersection-observer-api">What is the Intersection Observer API?</h3>
<p>The Intersection Observer API is a powerful browser feature that provides a mechanism to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document’s viewport. In simpler terms, it lets you know when an element becomes visible (or partially visible) within another element, without constantly polling for changes. This is highly efficient and avoids performance issues associated with traditional methods like using <code>scroll</code> events. Instead of actively checking for visibility, the browser notifies your code when the intersection changes.</p>
<h3 id="why-use-intersection-observer">Why use Intersection Observer?</h3>
<ul>
<li><p><strong>Improved Performance:</strong> Avoids the performance overhead of continuously checking element visibility using timers or event listeners on <code>scroll</code>. This is crucial for applications with many elements or complex layouts.</p></li>
<li><p><strong>Efficiency:</strong> Intersection Observer only triggers callbacks when a change in intersection occurs, reducing unnecessary computations.</p></li>
<li><p><strong>Flexibility:</strong> Allows observation of intersection with any ancestor element, not just the viewport. This opens possibilities for creating sophisticated, interactive elements within complex layouts.</p></li>
<li><p><strong>Simplified Code:</strong> The API provides a clean and concise way to handle visibility changes, making your code easier to read and maintain.</p></li>
</ul>
<h3 id="when-to-use-intersection-observer">When to use Intersection Observer?</h3>
<p>Intersection Observer is ideal for scenarios where:</p>
<ul>
<li><p><strong>Lazy Loading:</strong> Efficiently load images or other resources only when they are about to become visible in the viewport, improving initial page load times.</p></li>
<li><p><strong>Infinite Scrolling:</strong> Detect when to load more content as the user scrolls down the page.</p></li>
<li><p><strong>Ad Management:</strong> Trigger ad display or tracking only when an ad element enters the viewport.</p></li>
<li><p><strong>Animations and Effects:</strong> Initiate animations or effects based on element visibility.</p></li>
<li><p><strong>Progress Indicators:</strong> Display progress bars or other indicators based on the visibility of elements representing different steps in a process.</p></li>
<li><p><strong>Performance Optimizations:</strong> Detect when elements are visible to perform actions that are only needed when the user sees them.</p></li>
</ul>
<h3 id="browser-compatibility">Browser Compatibility</h3>
<p>Intersection Observer enjoys broad support across modern browsers. However, it’s important to check compatibility for older browsers and provide fallbacks if necessary. You can use a polyfill (such as the one provided by <a href="https://github.com/w3c/IntersectionObserver">https://github.com/w3c/IntersectionObserver</a>) for broader support. Consult a compatibility table like <a href="https://caniuse.com/?search=Intersection%20Observer">caniuse.com</a> for the most up-to-date information.</p>
<h3 id="basic-terminology">Basic Terminology</h3>
<ul>
<li><p><strong>Root:</strong> The element against which the intersection of the target is checked. If <code>null</code>, the root is the viewport.</p></li>
<li><p><strong>Target:</strong> The element being observed for intersection changes.</p></li>
<li><p><strong>Threshold:</strong> A number or an array of numbers between 0 and 1, specifying the intersection ratio at which callbacks are triggered. A value of 0 means the callback triggers as soon as any part of the target intersects the root. A value of 1 means the callback triggers only when the target is fully visible within the root. An array allows for triggering at multiple intersection ratios.</p></li>
<li><p><strong>Intersection Ratio:</strong> A value between 0 and 1 representing the percentage of the target element that is visible within the root. 0 means no intersection, 1 means complete intersection.</p></li>
<li><p><strong>Intersection Observer Callback:</strong> A function that is called whenever the intersection ratio of the target element changes. This function receives an array of <code>IntersectionObserverEntry</code> objects, each containing information about the intersection.</p></li>
<li><p><strong>IntersectionObserverEntry:</strong> An object containing information about the intersection of a single target element, including the <code>intersectionRatio</code>, <code>boundingClientRect</code>, <code>rootBounds</code>, <code>time</code>, and <code>isIntersecting</code> properties.</p></li>
</ul>
<p>This introduction provides a foundational understanding for developers working with the Intersection Observer API. The following sections will detail specific usage examples and advanced techniques.</p>
<h2 id="core-concepts">Core Concepts</h2>
<p>This section delves into the core components of the Intersection Observer API, providing detailed explanations and examples.</p>
<h3 id="the-intersectionobserver-constructor">The <code>IntersectionObserver</code> Constructor</h3>
<p>The <code>IntersectionObserver</code> constructor creates a new Intersection Observer instance. It takes two arguments:</p>
<ul>
<li><p><strong><code>callback</code> (required):</strong> A function that will be executed whenever the intersection of a target element with its root changes. This function receives an array of <code>IntersectionObserverEntry</code> objects as an argument.</p></li>
<li><p><strong><code>options</code> (optional):</strong> An object that allows you to customize the observer’s behavior. This object can include the following properties:</p>
<ul>
<li><p><strong><code>root</code>:</strong> The element that serves as the root for checking intersections. If omitted or set to <code>null</code>, the viewport is used as the root. Must be a valid DOM element.</p></li>
<li><p><strong><code>rootMargin</code>:</strong> A string specifying an offset to the root’s bounding box. This allows you to adjust the intersection detection area. It follows the CSS <code>margin</code> syntax (e.g., “10px 20px 30px 40px”, “10px”, “10px 10px”).</p></li>
<li><p><strong><code>threshold</code>:</strong> A number or array of numbers between 0 and 1, inclusive. Specifies the intersection ratio(s) at which the callback should be triggered. A single number represents a single threshold; an array allows for triggering at multiple ratios. For instance, <code>0.5</code> will trigger when 50% of the target is visible; <code>[0, 0.25, 0.5]</code> will trigger at 0%, 25%, and 50% visibility.</p></li>
</ul></li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(callback<span class="op">,</span> {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">root</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">'#myRootElement'</span>)<span class="op">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">rootMargin</span><span class="op">:</span> <span class="st">'10px'</span><span class="op">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">threshold</span><span class="op">:</span> <span class="fl">0.5</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="the-intersectionobserverentry-object">The <code>IntersectionObserverEntry</code> Object</h3>
<p>The <code>IntersectionObserverEntry</code> object contains information about the intersection of a single target element with its root. Each entry in the array passed to the <code>callback</code> function is an <code>IntersectionObserverEntry</code> object. It has the following properties:</p>
<ul>
<li><p><strong><code>isIntersecting</code>:</strong> A boolean indicating whether the target element is intersecting its root.</p></li>
<li><p><strong><code>intersectionRatio</code>:</strong> A number between 0 and 1 indicating the percentage of the target element that is intersecting its root.</p></li>
<li><p><strong><code>boundingClientRect</code>:</strong> A <code>DOMRect</code> object representing the size and position of the target element relative to the viewport.</p></li>
<li><p><strong><code>rootBounds</code>:</strong> A <code>DOMRect</code> object representing the size and position of the root element relative to the viewport (or viewport itself if <code>root</code> is null).</p></li>
<li><p><strong><code>intersectionRect</code>:</strong> A <code>DOMRect</code> object representing the size and position of the intersection area between the target and the root.</p></li>
<li><p><strong><code>time</code>:</strong> A DOMHighResTimeStamp indicating the time when the intersection change occurred.</p></li>
<li><p><strong><code>target</code>:</strong> The target element being observed.</p></li>
</ul>
<h3 id="the-intersectionobservercallback-function">The <code>IntersectionObserverCallback</code> Function</h3>
<p>The <code>IntersectionObserverCallback</code> function is the function passed to the <code>IntersectionObserver</code> constructor. It’s called whenever the intersection status of observed targets changes. It receives an array of <code>IntersectionObserverEntry</code> objects as its argument. Each entry represents a single target and its current intersection status.</p>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">callback</span>(entries<span class="op">,</span> observer) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (entry<span class="op">.</span><span class="at">isIntersecting</span>) {</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Element is intersecting:'</span><span class="op">,</span> entry<span class="op">.</span><span class="at">target</span>)<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Perform actions when the element intersects</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Element is not intersecting:'</span><span class="op">,</span> entry<span class="op">.</span><span class="at">target</span>)<span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Perform actions when the element is not intersecting</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="understanding-isintersecting">Understanding <code>isIntersecting</code></h3>
<p>The <code>isIntersecting</code> property is a simple boolean value indicating whether any part of the target element is currently intersecting the root element. It’s a quick way to check for basic visibility.</p>
<h3 id="understanding-intersectionratio">Understanding <code>intersectionRatio</code></h3>
<p>The <code>intersectionRatio</code> property is a more nuanced measure of visibility. It’s a floating-point number between 0 and 1, inclusive, representing the proportion of the target element’s area that is visible within the root element. A value of 0 means no intersection, while 1 means the target is completely visible within the root.</p>
<h3 id="understanding-boundingclientrect-rootbounds-and-intersectionrect">Understanding <code>boundingClientRect</code>, <code>rootBounds</code>, and <code>intersectionRect</code></h3>
<p>These three <code>DOMRect</code> properties provide detailed geometric information:</p>
<ul>
<li><p><strong><code>boundingClientRect</code>:</strong> Gives the size and position of the target element relative to the viewport.</p></li>
<li><p><strong><code>rootBounds</code>:</strong> Gives the size and position of the root element relative to the viewport (or the viewport itself if <code>root</code> is <code>null</code>).</p></li>
<li><p><strong><code>intersectionRect</code>:</strong> Gives the size and position of the area where the target and root overlap. This rectangle represents the actual visible portion of the target element within the root.</p></li>
</ul>
<h3 id="understanding-time">Understanding <code>time</code></h3>
<p>The <code>time</code> property provides a high-resolution timestamp representing the moment when the intersection change occurred. This can be useful for performance analysis or for precisely timing actions related to visibility changes.</p>
<h3 id="root-rootmargin-and-threshold-parameters">Root, rootMargin, and threshold Parameters</h3>
<p>These parameters control how the Intersection Observer behaves:</p>
<ul>
<li><p><strong><code>root</code>:</strong> Defines the ancestor element against which intersection is determined. <code>null</code> uses the viewport.</p></li>
<li><p><strong><code>rootMargin</code>:</strong> Allows adding margins to the root’s bounding box. Useful for triggering actions slightly before or after the target is fully visible within the root’s boundaries. A positive margin expands the intersection area; a negative margin shrinks it.</p></li>
<li><p><strong><code>threshold</code>:</strong> Determines the intersection ratio(s) that trigger the callback. A single number or an array of numbers between 0 and 1 can be used. A threshold of 0.5 means the callback triggers when 50% of the target is visible. Using an array allows for actions at multiple visibility percentages.</p></li>
</ul>
<p>These core concepts are fundamental to using the Intersection Observer API effectively. The next sections will demonstrate practical applications and advanced techniques.</p>
<h2 id="using-the-intersection-observer-api">Using the Intersection Observer API</h2>
<p>This section provides practical examples demonstrating how to use the Intersection Observer API in various scenarios.</p>
<h3 id="creating-an-intersection-observer-instance">Creating an Intersection Observer Instance</h3>
<p>The first step is to create an <code>IntersectionObserver</code> instance. This requires a callback function and an optional options object:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(callback<span class="op">,</span> {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">root</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="co">// or a DOM element</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">rootMargin</span><span class="op">:</span> <span class="st">'0px'</span><span class="op">,</span> <span class="co">//optional offset</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">threshold</span><span class="op">:</span> <span class="fl">0.5</span> <span class="co">// or an array of thresholds [0, 0.25, 0.5]</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<ul>
<li><strong><code>callback</code>:</strong> A function that will be executed whenever the observed element’s intersection changes. This function receives an array of <code>IntersectionObserverEntry</code> objects as its argument.</li>
<li><strong><code>options</code>:</strong> An object containing optional parameters: <code>root</code>, <code>rootMargin</code>, and <code>threshold</code>. <code>root</code> specifies the element against which intersection is checked (default is the viewport if <code>null</code>). <code>rootMargin</code> adds an offset to the root’s bounding box. <code>threshold</code> specifies the intersection ratio(s) at which the callback should be triggered.</li>
</ul>
<h3 id="observing-a-target-element">Observing a Target Element</h3>
<p>After creating the observer, you need to start observing target elements using the <code>observe()</code> method:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> targetElement <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">'#myTargetElement'</span>)<span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>observer<span class="op">.</span><span class="fu">observe</span>(targetElement)<span class="op">;</span></span></code></pre></div>
<p>This adds the <code>targetElement</code> to the observer’s list of monitored elements. The observer will now start tracking its intersection with the root element and trigger the callback function whenever the intersection changes.</p>
<h3 id="handling-intersection-changes">Handling Intersection Changes</h3>
<p>The <code>callback</code> function receives an array of <code>IntersectionObserverEntry</code> objects, one for each observed element that has experienced an intersection change. You can iterate over these entries and perform actions based on the <code>isIntersecting</code> and <code>intersectionRatio</code> properties:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">callback</span>(entries<span class="op">,</span> observer) {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (entry<span class="op">.</span><span class="at">isIntersecting</span>) {</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Element is intersecting, perform actions</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Element is intersecting:'</span><span class="op">,</span> entry<span class="op">.</span><span class="at">target</span>)<span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Example: Load an image</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (entry<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">tagName</span> <span class="op">===</span> <span class="st">'IMG'</span>) {</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        entry<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">src</span> <span class="op">=</span> entry<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">dataset</span><span class="op">.</span><span class="at">src</span><span class="op">;</span> <span class="co">//Lazy Loading</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Element is not intersecting, perform actions</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Element is not intersecting:'</span><span class="op">,</span> entry<span class="op">.</span><span class="at">target</span>)<span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Example: Remove Placeholder image</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="disconnecting-the-observer">Disconnecting the Observer</h3>
<p>When you no longer need to observe elements, disconnect the observer using the <code>disconnect()</code> method:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>observer<span class="op">.</span><span class="fu">disconnect</span>()<span class="op">;</span></span></code></pre></div>
<p>This stops the observer from monitoring any elements and prevents further callback executions. It’s essential for efficient resource management, especially when dealing with many observers.</p>
<h3 id="example-lazy-loading-images">Example: Lazy Loading Images</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> lazyImages <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">'img[data-src]'</span>)<span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(entries <span class="kw">=&gt;</span> {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (entry<span class="op">.</span><span class="at">isIntersecting</span>) {</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> img <span class="op">=</span> entry<span class="op">.</span><span class="at">target</span><span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>      img<span class="op">.</span><span class="at">src</span> <span class="op">=</span> img<span class="op">.</span><span class="at">dataset</span><span class="op">.</span><span class="at">src</span><span class="op">;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>      img<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">remove</span>(<span class="st">'lazy'</span>)<span class="op">;</span> <span class="co">//For Visual Placeholder Removal</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>      observer<span class="op">.</span><span class="fu">unobserve</span>(img)<span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> {</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">threshold</span><span class="op">:</span> <span class="fl">0.5</span> <span class="co">// Load image when 50% visible</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>lazyImages<span class="op">.</span><span class="fu">forEach</span>(img <span class="kw">=&gt;</span> observer<span class="op">.</span><span class="fu">observe</span>(img))<span class="op">;</span></span></code></pre></div>
<h3 id="example-infinite-scrolling">Example: Infinite Scrolling</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">//This is a simplified example, a fully featured implementation</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">//would require more sophisticated pagination logic.</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> loading <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> container <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'content-container'</span>)<span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(entries <span class="kw">=&gt;</span> {</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(entries[<span class="dv">0</span>]<span class="op">.</span><span class="at">isIntersecting</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>loading) {</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    loading <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fetchMoreData</span>()<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> loading <span class="op">=</span> <span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> {</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">root</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">threshold</span><span class="op">:</span> <span class="fl">0.1</span> <span class="co">//Trigger fetch when 10% of the end of the page is visible</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> sentinel <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'div'</span>)<span class="op">;</span> <span class="co">//sentinel element to observe</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>sentinel<span class="op">.</span><span class="at">id</span> <span class="op">=</span> <span class="st">'sentinel'</span><span class="op">;</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>container<span class="op">.</span><span class="fu">appendChild</span>(sentinel)<span class="op">;</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>observer<span class="op">.</span><span class="fu">observe</span>(sentinel)<span class="op">;</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co">// Placeholder for data fetching logic. Replace this with your data fetching API call.</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">fetchMoreData</span>() {</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Fetching more data...'</span>)<span class="op">;</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Simulate network latency</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">await</span> <span class="kw">new</span> <span class="bu">Promise</span>(res <span class="kw">=&gt;</span> <span class="pp">setTimeout</span>(res<span class="op">,</span> <span class="dv">1000</span>))<span class="op">;</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Append more data elements to the container.</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Data fetched and appended.'</span>)<span class="op">;</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="example-tracking-element-visibility">Example: Tracking Element Visibility</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> element <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myElement'</span>)<span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(entries <span class="kw">=&gt;</span> {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (entry<span class="op">.</span><span class="at">isIntersecting</span>) {</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Element is visible:'</span><span class="op">,</span> entry<span class="op">.</span><span class="at">intersectionRatio</span>)<span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Element is hidden'</span>)<span class="op">;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>observer<span class="op">.</span><span class="fu">observe</span>(element)<span class="op">;</span></span></code></pre></div>
<h3 id="example-implementing-a-progress-bar-based-on-visibility">Example: Implementing a Progress Bar Based on Visibility</h3>
<p>This example requires a progress bar element to be present in the HTML, updated based on the intersectionRatio of multiple elements.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> progress <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'progress'</span>)<span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> elements <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">'.progress-step'</span>)<span class="op">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> totalVisibleRatio <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(entries <span class="kw">=&gt;</span> {</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    totalVisibleRatio <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        totalVisibleRatio <span class="op">+=</span> entry<span class="op">.</span><span class="at">intersectionRatio</span><span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> percentage <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((totalVisibleRatio <span class="op">/</span> elements<span class="op">.</span><span class="at">length</span>) <span class="op">*</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    progress<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">width</span> <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>percentage<span class="sc">}</span><span class="vs">%`</span><span class="op">;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> {<span class="dt">threshold</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="fl">0.25</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.75</span><span class="op">,</span> <span class="dv">1</span>]})<span class="op">;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>elements<span class="op">.</span><span class="fu">forEach</span>(element <span class="kw">=&gt;</span> observer<span class="op">.</span><span class="fu">observe</span>(element))<span class="op">;</span></span></code></pre></div>
<p>Remember to adapt these examples to your specific needs and context. Properly structuring your HTML and CSS is crucial for successful implementation. Consider adding error handling and ensuring compatibility for older browsers using polyfills.</p>
<h2 id="advanced-techniques">Advanced Techniques</h2>
<p>This section explores more sophisticated uses of the Intersection Observer API, addressing performance considerations and integration with other technologies.</p>
<h3 id="using-multiple-thresholds">Using Multiple Thresholds</h3>
<p>Instead of a single <code>threshold</code> value, you can provide an array of thresholds. This allows the callback to fire at multiple intersection ratios, providing finer-grained control over how you handle visibility changes.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(callback<span class="op">,</span> {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">threshold</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="fl">0.25</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.75</span><span class="op">,</span> <span class="dv">1</span>] <span class="co">//Triggers at 0%, 25%, 50%, 75%, and 100% visibility</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">callback</span>(entries<span class="op">,</span> observer) {</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Element is </span><span class="sc">${</span>entry<span class="op">.</span><span class="at">isIntersecting</span> <span class="op">?</span> <span class="st">''</span> <span class="op">:</span> <span class="st">'not '</span><span class="sc">}</span><span class="vs">intersecting, intersectionRatio: </span><span class="sc">${</span>entry<span class="op">.</span><span class="at">intersectionRatio</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Perform different actions based on entry.intersectionRatio</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This allows for different actions based on the degree of visibility. For example, you might load a low-resolution image at 25% visibility and a high-resolution one only at 75% or 100%.</p>
<h3 id="working-with-different-root-elements">Working with Different Root Elements</h3>
<p>The <code>root</code> option allows you to specify an ancestor element other than the viewport as the root for intersection detection. This is useful for creating more complex layouts and interactive components.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> container <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myContainer'</span>)<span class="op">;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(callback<span class="op">,</span> { <span class="dt">root</span><span class="op">:</span> container })<span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>observer<span class="op">.</span><span class="fu">observe</span>(<span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myElement'</span>))<span class="op">;</span></span></code></pre></div>
<p>Now, the observer checks the intersection of <code>myElement</code> relative to <code>myContainer</code>, not the viewport. This is helpful for observing elements within scrollable containers or other complex structures.</p>
<h3 id="using-rootmargin-for-custom-margins">Using <code>rootMargin</code> for Custom Margins</h3>
<p>The <code>rootMargin</code> option lets you add margins to the root’s bounding box. This effectively expands or shrinks the area considered for intersection. Positive values enlarge the area, while negative values shrink it. This is valuable for anticipating visibility or delaying actions.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(callback<span class="op">,</span> {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">rootMargin</span><span class="op">:</span> <span class="st">'50px 0px -50px 0px'</span><span class="op">,</span> <span class="co">//50px top margin, 50px bottom margin removed</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">threshold</span><span class="op">:</span> <span class="fl">0.5</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>This example adds a 50px top margin and removes a 50px bottom margin from the root’s bounds, making the intersection trigger earlier (top) and later (bottom) than without <code>rootMargin</code>.</p>
<h3 id="optimizing-performance-for-many-observed-elements">Optimizing Performance for Many Observed Elements</h3>
<p>Observing a large number of elements can impact performance. Here are some optimization strategies:</p>
<ul>
<li><strong>Use appropriate thresholds:</strong> Avoid overly frequent callbacks by using fewer or higher thresholds.</li>
<li><strong>Unobserve elements when no longer needed:</strong> Use <code>unobserve()</code> to remove elements from observation once you’re done with them. This is particularly important for lazy-loading where images should be unobserved after loading.</li>
<li><strong>Batch observations:</strong> Instead of observing individual elements, consider grouping related elements for better performance.</li>
<li><strong>Throttle or debounce callbacks:</strong> If the callback involves computationally expensive operations, throttle or debounce it to limit execution frequency.</li>
</ul>
<h3 id="handling-unobserved-elements-disconnect-and-re-observe">Handling Unobserved Elements (Disconnect and Re-observe)</h3>
<p>Sometimes, you might need to temporarily stop observing elements and then start observing them again later. This is easily done using <code>disconnect()</code> and <code>observe()</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>observer<span class="op">.</span><span class="fu">disconnect</span>()<span class="op">;</span> <span class="co">// Stop observing</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">// ... some other code ...</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>observer<span class="op">.</span><span class="fu">observe</span>(element)<span class="op">;</span> <span class="co">// Start observing again</span></span></code></pre></div>
<p>This is useful when dynamically adding or removing elements to the DOM or when you only want to observe elements under specific conditions.</p>
<h3 id="integration-with-other-apis-e.g.-animation-libraries">Integration with Other APIs (e.g., Animation Libraries)</h3>
<p>The Intersection Observer API integrates well with animation libraries like GSAP, Anime.js, or Velocity.js. You can trigger animations based on element visibility.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Example with GSAP</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(entries <span class="kw">=&gt;</span> {</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (entry<span class="op">.</span><span class="at">isIntersecting</span>) {</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>      gsap<span class="op">.</span><span class="fu">to</span>(entry<span class="op">.</span><span class="at">target</span><span class="op">,</span> { <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">duration</span><span class="op">:</span> <span class="dv">1</span> })<span class="op">;</span> <span class="co">// Animate element's opacity and position</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Observe elements you want to animate</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">// ...</span></span></code></pre></div>
<p>This shows how Intersection Observer’s visibility data can trigger animation effects smoothly and efficiently, enhancing user experience and application performance. Replace <code>gsap</code> with your preferred animation library’s API. Remember to include the animation library in your project. Remember to handle cases where the element leaves the viewport and potentially reverse the animation or reset properties.</p>
<h2 id="troubleshooting-and-best-practices">Troubleshooting and Best Practices</h2>
<p>This section addresses common issues, performance optimization, accessibility considerations, and debugging strategies related to the Intersection Observer API.</p>
<h3 id="common-errors-and-their-solutions">Common Errors and Their Solutions</h3>
<ul>
<li><p><strong><code>TypeError: Failed to construct 'IntersectionObserver': 1 argument required, but only 0 present</code>:</strong> This error occurs when the <code>IntersectionObserver</code> constructor is called without the required callback function. Ensure you provide a callback function as the first argument.</p></li>
<li><p><strong><code>Uncaught TypeError: Cannot read properties of undefined (reading 'observe')</code>:</strong> This often means that <code>observer</code> is undefined because the Intersection Observer wasn’t correctly created or the variable is being accessed before initialization. Double-check your <code>IntersectionObserver</code> instantiation and ensure the code that uses <code>observer</code> runs after its creation.</p></li>
<li><p><strong>Callback function not being triggered:</strong> Verify that:</p>
<ul>
<li>The target element is actually intersecting the root (check using browser developer tools).</li>
<li>The <code>threshold</code> value is appropriate for your needs; a very high threshold may never be met.</li>
<li>The root element exists and is correctly specified.</li>
<li>There are no errors preventing the callback from executing (check the console).</li>
</ul></li>
<li><p><strong>Unexpected intersection ratios:</strong> Incorrect <code>rootMargin</code> settings can lead to unexpected intersection ratios. Carefully review your <code>rootMargin</code> values and ensure they reflect your intended behavior.</p></li>
</ul>
<h3 id="performance-considerations-and-optimization-strategies">Performance Considerations and Optimization Strategies</h3>
<ul>
<li><p><strong>Minimize the number of observed elements:</strong> Avoid observing unnecessary elements. Only observe elements whose visibility truly needs to be tracked.</p></li>
<li><p><strong>Use appropriate thresholds:</strong> Avoid overly frequent callbacks by using higher threshold values or a smaller number of threshold values. Choose thresholds that match the granularity needed for your application logic.</p></li>
<li><p><strong>Un-observe elements when done:</strong> When an element’s visibility state is no longer needed, use <code>observer.unobserve(element)</code> to remove it from observation. This is especially critical for lazy-loading images, where once an image is loaded, it should be unobserved.</p></li>
<li><p><strong>Use <code>rootMargin</code> strategically:</strong> Carefully choose <code>rootMargin</code> values to reduce the number of intersection changes.</p></li>
<li><p><strong>Batch similar elements:</strong> If multiple elements require similar actions based on their visibility, combine their observations to reduce overhead.</p></li>
<li><p><strong>Debounce or throttle the callback:</strong> If your callback function performs expensive computations, debounce or throttle it to prevent performance degradation. This reduces the frequency of callback executions.</p></li>
<li><p><strong>Use Intersection Observer effectively with other optimization techniques:</strong> Combine Intersection Observer with other performance optimization techniques such as lazy loading of scripts or CSS.</p></li>
</ul>
<h3 id="accessibility-considerations">Accessibility Considerations</h3>
<ul>
<li><p><strong>Ensure functionality without JavaScript:</strong> Provide fallback mechanisms for users with JavaScript disabled or using assistive technologies. Lazy-loading, for instance, should have appropriate placeholders visible even if JavaScript fails.</p></li>
<li><p><strong>Avoid visual changes dependent solely on Intersection Observer:</strong> Avoid relying solely on Intersection Observer for crucial visual changes or functionality that could impact screen readers or other assistive technology. Alternative approaches using ARIA attributes or CSS should be considered for robustness.</p></li>
<li><p><strong>Provide appropriate ARIA attributes for visual changes triggered by Intersection Observer:</strong> Use ARIA attributes (like <code>aria-hidden</code>, <code>aria-describedby</code>, etc.) to make the changes triggered by the observer understandable for assistive technologies.</p></li>
</ul>
<h3 id="debugging-techniques">Debugging Techniques</h3>
<ul>
<li><p><strong>Use the browser’s developer tools:</strong> The browser’s developer tools (especially the console) are invaluable for debugging Intersection Observer issues. Check for errors, inspect the <code>IntersectionObserverEntry</code> objects, and step through your code.</p></li>
<li><p><strong>Log intersection events:</strong> Add <code>console.log()</code> statements within your callback function to monitor the intersection events and their associated data. This allows you to pinpoint when and why the callback is (or isn’t) being triggered.</p></li>
<li><p><strong>Simplify your code:</strong> To isolate issues, temporarily remove unnecessary features or logic from your code. This can help narrow down the source of the problem.</p></li>
<li><p><strong>Test with different browsers and devices:</strong> Test your implementation in various browsers and devices to ensure consistent behavior. Use a polyfill if you need to support older browsers that don’t natively support Intersection Observer.</p></li>
</ul>
<h3 id="alternative-approaches-for-specific-use-cases">Alternative Approaches for Specific Use Cases</h3>
<p>While Intersection Observer is excellent for many visibility-based tasks, some use cases might benefit from alternative approaches:</p>
<ul>
<li><p><strong>Simple visibility checks:</strong> For very basic visibility checks, a simpler approach using element’s boundingClientRect and window scroll events might suffice, particularly in scenarios with only a few elements. However, Intersection Observer is significantly more efficient for many elements.</p></li>
<li><p><strong>Complex animations:</strong> For highly complex animations, using specialized animation libraries with their built-in visibility handling might be preferred.</p></li>
<li><p><strong>Specific browser requirements:</strong> For very old browsers, use a polyfill. For highly specialized situations, there could be alternative browser APIs or solutions, depending on the exact scenario.</p></li>
</ul>
<p>Remember that Intersection Observer offers an efficient and powerful solution for many visibility-related tasks. By understanding its capabilities and limitations and following the best practices outlined above, developers can leverage this API to create responsive and performant web applications.</p>
<h2 id="appendix">Appendix</h2>
<p>This appendix provides supplementary information to aid in the understanding and application of the Intersection Observer API.</p>
<h3 id="complete-code-examples">Complete Code Examples</h3>
<p>This section presents complete, runnable code examples for the scenarios described earlier in the manual. Remember to include necessary HTML structure for these examples to function correctly.</p>
<p><strong>1. Lazy Loading Images:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Lazy Loading Images<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">.lazy</span> {</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">opacity</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">transition</span><span class="ch">:</span> <span class="dv">opacity 0.5</span><span class="dt">s</span> <span class="dv">ease-in-out</span><span class="op">;</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.lazy.loaded</span> {</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">opacity</span><span class="ch">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> class</span><span class="op">=</span><span class="st">"lazy"</span><span class="ot"> data-src</span><span class="op">=</span><span class="st">"image1.jpg"</span><span class="ot"> alt</span><span class="op">=</span><span class="st">"Image 1"</span><span class="dt">&gt;</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> class</span><span class="op">=</span><span class="st">"lazy"</span><span class="ot"> data-src</span><span class="op">=</span><span class="st">"image2.jpg"</span><span class="ot"> alt</span><span class="op">=</span><span class="st">"Image 2"</span><span class="dt">&gt;</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">img</span><span class="ot"> class</span><span class="op">=</span><span class="st">"lazy"</span><span class="ot"> data-src</span><span class="op">=</span><span class="st">"image3.jpg"</span><span class="ot"> alt</span><span class="op">=</span><span class="st">"Image 3"</span><span class="dt">&gt;</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> lazyImages <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">'img[data-src]'</span>)<span class="op">;</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(entries <span class="kw">=&gt;</span> {</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  entries<span class="op">.</span><span class="fu">forEach</span>(entry <span class="kw">=&gt;</span> {</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (entry<span class="op">.</span><span class="at">isIntersecting</span>) {</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> img <span class="op">=</span> entry<span class="op">.</span><span class="at">target</span><span class="op">;</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>      img<span class="op">.</span><span class="at">src</span> <span class="op">=</span> img<span class="op">.</span><span class="at">dataset</span><span class="op">.</span><span class="at">src</span><span class="op">;</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>      img<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">'loaded'</span>)<span class="op">;</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>      observer<span class="op">.</span><span class="fu">unobserve</span>(img)<span class="op">;</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> {</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>  <span class="dt">threshold</span><span class="op">:</span> <span class="fl">0.5</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>lazyImages<span class="op">.</span><span class="fu">forEach</span>(img <span class="kw">=&gt;</span> observer<span class="op">.</span><span class="fu">observe</span>(img))<span class="op">;</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<p><strong>2. Infinite Scrolling (Simplified):</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Infinite Scrolling<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"content-container"</span><span class="dt">&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">&lt;!-- Content goes here --&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"sentinel"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> loading <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> container <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'content-container'</span>)<span class="op">;</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> observer <span class="op">=</span> <span class="kw">new</span> <span class="fu">IntersectionObserver</span>(entries <span class="kw">=&gt;</span> {</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (entries[<span class="dv">0</span>]<span class="op">.</span><span class="at">isIntersecting</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>loading) {</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    loading <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fetchMoreData</span>()<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> loading <span class="op">=</span> <span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> {</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="dt">root</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="dt">threshold</span><span class="op">:</span> <span class="fl">0.1</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> sentinel <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'sentinel'</span>)<span class="op">;</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>observer<span class="op">.</span><span class="fu">observe</span>(sentinel)<span class="op">;</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">fetchMoreData</span>() {</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Fetching more data...'</span>)<span class="op">;</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">await</span> <span class="kw">new</span> <span class="bu">Promise</span>(res <span class="kw">=&gt;</span> <span class="pp">setTimeout</span>(res<span class="op">,</span> <span class="dv">1000</span>))<span class="op">;</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Append new content here</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Data fetched and appended.'</span>)<span class="op">;</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<p><strong>(Remember to replace placeholder image URLs and implement actual data fetching in the Infinite Scrolling example.)</strong> These are simplified examples; a production-ready implementation would require more robust error handling and data management.</p>
<h3 id="browser-compatibility-table-detailed">Browser Compatibility Table (Detailed)</h3>
<table class="caption-top">
<colgroup>
<col style="width: 21%">
<col style="width: 13%">
<col style="width: 18%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Browser</th>
<th>Version</th>
<th>Support</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Chrome</td>
<td>65+</td>
<td>Full</td>
<td></td>
</tr>
<tr class="even">
<td>Firefox</td>
<td>66+</td>
<td>Full</td>
<td></td>
</tr>
<tr class="odd">
<td>Safari</td>
<td>12.1+</td>
<td>Full</td>
<td></td>
</tr>
<tr class="even">
<td>Edge</td>
<td>79+</td>
<td>Full</td>
<td></td>
</tr>
<tr class="odd">
<td>Opera</td>
<td>52+</td>
<td>Full</td>
<td></td>
</tr>
<tr class="even">
<td>Internet Explorer</td>
<td>N/A</td>
<td>No Support</td>
<td>Requires a polyfill</td>
</tr>
<tr class="odd">
<td>Android Browser</td>
<td>Varies</td>
<td>Varies</td>
<td>Check specific version compatibility</td>
</tr>
<tr class="even">
<td>iOS Safari</td>
<td>Varies</td>
<td>Varies</td>
<td>Check specific version compatibility</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> This table is subject to change. Always refer to <a href="https://caniuse.com/?search=Intersection%20Observer">caniuse.com</a> for the most up-to-date information. “Full Support” means full implementation of the spec.</p>
<h3 id="glossary-of-terms">Glossary of Terms</h3>
<ul>
<li><p><strong>Intersection Observer API:</strong> A browser API that allows asynchronous observation of changes in the intersection of a target element with its root.</p></li>
<li><p><strong>Root:</strong> The element used as the reference for determining the intersection of a target element. If <code>null</code>, the viewport is used.</p></li>
<li><p><strong>Target:</strong> The element whose intersection with the root is being observed.</p></li>
<li><p><strong>Threshold:</strong> A number or array of numbers indicating the intersection ratio at which the callback is triggered.</p></li>
<li><p><strong>Intersection Ratio:</strong> A value between 0 and 1 representing the percentage of the target element visible within the root.</p></li>
<li><p><strong>Intersection Observer Entry:</strong> An object containing information about the intersection of a target element with its root.</p></li>
<li><p><strong>Intersection Observer Callback:</strong> A function called when an intersection change occurs.</p></li>
<li><p><strong><code>rootMargin</code>:</strong> A CSS margin-like string that adds an offset to the root element’s bounding box.</p></li>
<li><p><strong><code>boundingClientRect</code>:</strong> A <code>DOMRect</code> representing the size and position of the element relative to the viewport.</p></li>
<li><p><strong><code>rootBounds</code>:</strong> A <code>DOMRect</code> representing the size and position of the root element relative to the viewport.</p></li>
<li><p><strong><code>intersectionRect</code>:</strong> A <code>DOMRect</code> representing the intersection rectangle of the target and root.</p></li>
</ul>
<h3 id="further-reading-and-resources">Further Reading and Resources</h3>
<ul>
<li><p><strong>MDN Web Docs - Intersection Observer API:</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API">https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API</a> This is the official documentation for the API.</p></li>
<li><p><strong>Can I Use - Intersection Observer:</strong> <a href="https://caniuse.com/?search=Intersection%20Observer">https://caniuse.com/?search=Intersection%20Observer</a> Check for browser compatibility.</p></li>
<li><p><strong>Polyfill for Intersection Observer:</strong> <a href="https://github.com/w3c/IntersectionObserver">https://github.com/w3c/IntersectionObserver</a> A polyfill to add support for older browsers.</p></li>
</ul>
<p>This appendix provides additional information to aid developers in their usage of the Intersection Observer API. Always refer to the latest official documentation for the most accurate and up-to-date details.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>