<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>Dexie.js - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id="></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="../../favicon.ico">
<meta property="og:title" content="Dexie.js - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">Dexie.js - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#getting-started" id="toc-getting-started">Getting Started</a>
  <ul>
  <li><a href="#installation" id="toc-installation">Installation</a></li>
  <li><a href="#basic-usage" id="toc-basic-usage">Basic Usage</a></li>
  <li><a href="#your-first-database" id="toc-your-first-database">Your First Database</a></li>
  <li><a href="#opening-a-database" id="toc-opening-a-database">Opening a Database</a></li>
  </ul></li>
  <li><a href="#defining-tables" id="toc-defining-tables">Defining Tables</a>
  <ul>
  <li><a href="#table-schema" id="toc-table-schema">Table Schema</a></li>
  <li><a href="#defining-primary-keys" id="toc-defining-primary-keys">Defining Primary Keys</a></li>
  <li><a href="#indexes" id="toc-indexes">Indexes</a></li>
  <li><a href="#defining-collections" id="toc-defining-collections">Defining Collections</a></li>
  </ul></li>
  <li><a href="#data-manipulation" id="toc-data-manipulation">Data Manipulation</a>
  <ul>
  <li><a href="#adding-data-add-put-bulkadd-bulkput" id="toc-adding-data-add-put-bulkadd-bulkput">Adding Data (<code>add</code>, <code>put</code>, <code>bulkAdd</code>, <code>bulkPut</code>)</a></li>
  <li><a href="#retrieving-data-get-getall-tocollection" id="toc-retrieving-data-get-getall-tocollection">Retrieving Data (<code>get</code>, <code>getAll</code>, <code>toCollection</code>)</a></li>
  <li><a href="#updating-data-update-put" id="toc-updating-data-update-put">Updating Data (<code>update</code>, <code>put</code>)</a></li>
  <li><a href="#deleting-data-delete-clear" id="toc-deleting-data-delete-clear">Deleting Data (<code>delete</code>, <code>clear</code>)</a></li>
  <li><a href="#transactions" id="toc-transactions">Transactions</a></li>
  <li><a href="#where-clauses" id="toc-where-clauses">Where Clauses</a></li>
  <li><a href="#ordering-results" id="toc-ordering-results">Ordering Results</a></li>
  <li><a href="#filtering-results" id="toc-filtering-results">Filtering Results</a></li>
  <li><a href="#limiting-results" id="toc-limiting-results">Limiting Results</a></li>
  </ul></li>
  <li><a href="#advanced-features" id="toc-advanced-features">Advanced Features</a>
  <ul>
  <li><a href="#database-events" id="toc-database-events">Database Events</a></li>
  <li><a href="#collections" id="toc-collections">Collections</a></li>
  <li><a href="#upgrade-strategies" id="toc-upgrade-strategies">Upgrade Strategies</a></li>
  <li><a href="#hooks" id="toc-hooks">Hooks</a></li>
  <li><a href="#custom-table-methods" id="toc-custom-table-methods">Custom Table Methods</a></li>
  <li><a href="#versioning-and-migrations" id="toc-versioning-and-migrations">Versioning and Migrations</a></li>
  <li><a href="#working-with-blobs-and-files" id="toc-working-with-blobs-and-files">Working with Blobs and Files</a></li>
  <li><a href="#error-handling" id="toc-error-handling">Error Handling</a></li>
  <li><a href="#performance-tuning" id="toc-performance-tuning">Performance Tuning</a></li>
  </ul></li>
  <li><a href="#working-with-different-data-types" id="toc-working-with-different-data-types">Working with Different Data Types</a>
  <ul>
  <li><a href="#numbers" id="toc-numbers">Numbers</a></li>
  <li><a href="#strings" id="toc-strings">Strings</a></li>
  <li><a href="#dates" id="toc-dates">Dates</a></li>
  <li><a href="#arrays" id="toc-arrays">Arrays</a></li>
  <li><a href="#objects" id="toc-objects">Objects</a></li>
  <li><a href="#json" id="toc-json">JSON</a></li>
  <li><a href="#blobs" id="toc-blobs">Blobs</a></li>
  </ul></li>
  <li><a href="#best-practices" id="toc-best-practices">Best Practices</a>
  <ul>
  <li><a href="#database-design" id="toc-database-design">Database Design</a></li>
  <li><a href="#schema-optimization" id="toc-schema-optimization">Schema Optimization</a></li>
  <li><a href="#query-optimization" id="toc-query-optimization">Query Optimization</a></li>
  <li><a href="#error-handling-best-practices" id="toc-error-handling-best-practices">Error Handling Best Practices</a></li>
  <li><a href="#testing-and-debugging" id="toc-testing-and-debugging">Testing and Debugging</a></li>
  </ul></li>
  <li><a href="#api-reference" id="toc-api-reference">API Reference</a>
  <ul>
  <li><a href="#dexie-object" id="toc-dexie-object">Dexie Object</a></li>
  <li><a href="#table-object" id="toc-table-object">Table Object</a></li>
  <li><a href="#collection-object" id="toc-collection-object">Collection Object</a></li>
  <li><a href="#transaction-object" id="toc-transaction-object">Transaction Object</a></li>
  <li><a href="#keyrange-object" id="toc-keyrange-object">KeyRange Object</a></li>
  <li><a href="#helper-functions" id="toc-helper-functions">Helper Functions</a></li>
  </ul></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting">Troubleshooting</a>
  <ul>
  <li><a href="#common-errors" id="toc-common-errors">Common Errors</a></li>
  <li><a href="#debugging-techniques" id="toc-debugging-techniques">Debugging Techniques</a></li>
  <li><a href="#troubleshooting-browser-compatibility" id="toc-troubleshooting-browser-compatibility">Troubleshooting Browser Compatibility</a></li>
  <li><a href="#finding-help-and-support" id="toc-finding-help-and-support">Finding Help and Support</a></li>
  </ul></li>
  </ul>
</nav>
<h2 id="getting-started">Getting Started</h2>
<h3 id="installation">Installation</h3>
<p>Dexie.js is an easy-to-install JavaScript library. The most common way is via npm or yarn:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install dexie</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">yarn</span> add dexie</span></code></pre></div>
<p>Alternatively, you can include it directly from a CDN, though this is less ideal for larger projects due to version management challenges:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://unpkg.com/dexie"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span> <span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Remember to check the latest version number on the Dexie.js website or npm registry and update the URL or package version accordingly.</p>
<h3 id="basic-usage">Basic Usage</h3>
<p>Dexie.js provides an intuitive, Promise-based API for interacting with IndexedDB. At its core, you define a database schema, open the database, and then use methods to perform CRUD (Create, Read, Update, Delete) operations.</p>
<h3 id="your-first-database">Your First Database</h3>
<p>Let’s create a simple database to store a list of names.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Import Dexie</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> Dexie <span class="im">from</span> <span class="st">'dexie'</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Define the database schema</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> db <span class="op">=</span> <span class="kw">new</span> <span class="fu">Dexie</span>(<span class="st">'myDatabase'</span>)<span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">version</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">stores</span>({</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">names</span><span class="op">:</span> <span class="st">'++id, name'</span> <span class="co">// '++id' creates an auto-incrementing primary key</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Add data</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">names</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">'John Doe'</span> })<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Data added successfully!'</span>)<span class="op">;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Retrieve data</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">names</span><span class="op">.</span><span class="fu">toArray</span>()<span class="op">.</span><span class="fu">then</span>((names) <span class="kw">=&gt;</span> {</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Retrieved names:'</span><span class="op">,</span> names)<span class="op">;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>This code snippet first defines a database named ‘myDatabase’ with a single table named ‘names’. The <code>++id</code> in the <code>stores</code> definition creates an auto-incrementing primary key for each record. We then add a name and retrieve all names from the database using promises. Remember to handle potential errors using <code>.catch()</code> if needed.</p>
<h3 id="opening-a-database">Opening a Database</h3>
<p>Dexie.js handles database opening asynchronously. The constructor (<code>new Dexie('myDatabase')</code>) doesn’t immediately open the database; it creates a <code>Dexie</code> object that represents the database. The database is only opened when you perform an operation that requires accessing the database (e.g., adding, getting, or updating data). This happens implicitly when you invoke methods like <code>db.names.add()</code>, or explicitly when you call <code>db.open()</code>. While <code>db.open()</code> is rarely needed, it can be useful for pre-emptive opening in specific scenarios like before the main application logic starts, or to explicitly handle database opening errors before other actions are taken. For example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> Dexie <span class="im">from</span> <span class="st">'dexie'</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> db <span class="op">=</span> <span class="kw">new</span> <span class="fu">Dexie</span>(<span class="st">'myDatabase'</span>)<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">version</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">stores</span>({</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">names</span><span class="op">:</span> <span class="st">'++id, name'</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">open</span>()<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Database opened successfully!"</span>)<span class="op">;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Continue with other operations here.</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> {</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">"Error opening database:"</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Handle database opening errors appropriately, perhaps by displaying an error message to the user.</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Error handling via <code>.catch()</code> is crucial for robust application behaviour. Always handle potential errors when interacting with the database.</p>
<h2 id="defining-tables">Defining Tables</h2>
<h3 id="table-schema">Table Schema</h3>
<p>Dexie.js tables are defined within the <code>stores</code> object of a database version. The <code>stores</code> object maps table names to their schema definitions. The schema specifies the table’s columns and their properties, primarily the primary key. It uses a string-based syntax where column names are separated by commas.</p>
<p>A simple schema might look like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">version</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">stores</span>({</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">users</span><span class="op">:</span> <span class="st">'id, name, email'</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>This defines a table named <code>users</code> with three columns: <code>id</code>, <code>name</code>, and <code>email</code>. Note that no data types are explicitly specified; Dexie.js handles data type inference.</p>
<h3 id="defining-primary-keys">Defining Primary Keys</h3>
<p>A primary key uniquely identifies each record in a table. Dexie.js supports auto-incrementing primary keys and custom primary keys.</p>
<p><strong>Auto-Incrementing Primary Keys:</strong></p>
<p>Use <code>++id</code> to create an auto-incrementing integer primary key named <code>id</code>. This is often the simplest and most convenient approach.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">version</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">stores</span>({</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">products</span><span class="op">:</span> <span class="st">'++id, name, price'</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p><strong>Custom Primary Keys:</strong></p>
<p>For custom primary keys, simply list the column name(s) that will serve as the primary key. Dexie.js will use these columns to ensure uniqueness. You can have a composite primary key consisting of multiple columns.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">version</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">stores</span>({</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">items</span><span class="op">:</span> <span class="st">'orderId, itemId, description'</span> <span class="co">// orderId and itemId together form the primary key</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="indexes">Indexes</h3>
<p>Indexes speed up queries on specific columns. Indexes are defined by adding <code>+</code> before a column name in the <code>stores</code> definition. Multiple indexes can be created per table.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">version</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">stores</span>({</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">products</span><span class="op">:</span> <span class="st">'++id, name, +price, +category'</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>This creates indexes on the <code>price</code> and <code>category</code> columns, enabling faster searches based on these fields. Note that the primary key is always indexed implicitly.</p>
<h3 id="defining-collections">Defining Collections</h3>
<p>While Dexie.js doesn’t explicitly use the term “collections” in the same way as some other databases, the concept is embodied by its tables. Each table in Dexie.js acts as a collection of objects. The <code>stores</code> object definition in the <code>db.version()</code> method is what defines the structure and schema for these collections/tables. Therefore, defining a table automatically defines a collection. All interactions with the table—adding, retrieving, updating, deleting—are effectively operations on the collection represented by that table.</p>
<h2 id="data-manipulation">Data Manipulation</h2>
<h3 id="adding-data-add-put-bulkadd-bulkput">Adding Data (<code>add</code>, <code>put</code>, <code>bulkAdd</code>, <code>bulkPut</code>)</h3>
<ul>
<li><p><strong><code>add(obj)</code>:</strong> Adds a new object to the table. Dexie.js automatically assigns the primary key if one is auto-incrementing. Returns a Promise resolving to the generated primary key.</p></li>
<li><p><strong><code>put(obj)</code>:</strong> Adds or updates an object. If an object with the same primary key already exists, it’s updated; otherwise, it’s added. Returns a Promise resolving to the primary key.</p></li>
<li><p><strong><code>bulkAdd(arrayOfObjs)</code>:</strong> Adds multiple objects in a single transaction. More efficient than calling <code>add()</code> repeatedly. Returns a Promise resolving to an array of the generated primary keys (in the same order as the input array).</p></li>
<li><p><strong><code>bulkPut(arrayOfObjs)</code>:</strong> Similar to <code>bulkAdd()</code>, but updates existing objects if they have matching primary keys. Returns a Promise resolving to an array of primary keys.</p></li>
</ul>
<h3 id="retrieving-data-get-getall-tocollection">Retrieving Data (<code>get</code>, <code>getAll</code>, <code>toCollection</code>)</h3>
<ul>
<li><p><strong><code>get(primaryKey)</code>:</strong> Retrieves a single object by its primary key. Returns a Promise resolving to the object or <code>undefined</code> if not found.</p></li>
<li><p><strong><code>getAll(primaryKey)</code>:</strong> Retrieves all objects matching specified primary key(s). If no arguments are given, it retrieves all objects in the table. Returns a Promise resolving to an array of objects.</p></li>
<li><p><strong><code>toCollection()</code>:</strong> Transforms a query into a <code>Collection</code> object, providing more advanced querying capabilities chained before using <code>toArray()</code>, <code>each()</code>, etc. Useful for building complex queries.</p></li>
</ul>
<h3 id="updating-data-update-put">Updating Data (<code>update</code>, <code>put</code>)</h3>
<ul>
<li><p><strong><code>update(primaryKey, modifications)</code>:</strong> Updates a single object identified by its primary key. <code>modifications</code> is an object containing the fields to update. Returns a Promise resolving to the number of updated objects (0 or 1).</p></li>
<li><p><strong><code>put(obj)</code>:</strong> As mentioned before, <code>put()</code> can also be used for updating. If an object with the same primary key already exists, it will be updated with the values provided in the argument <code>obj</code>.</p></li>
</ul>
<h3 id="deleting-data-delete-clear">Deleting Data (<code>delete</code>, <code>clear</code>)</h3>
<ul>
<li><p><strong><code>delete(primaryKey)</code>:</strong> Deletes a single object identified by its primary key. Returns a Promise resolving to the number of deleted objects (0 or 1).</p></li>
<li><p><strong><code>clear()</code>:</strong> Deletes all objects from the table. Returns a Promise.</p></li>
</ul>
<h3 id="transactions">Transactions</h3>
<p>Dexie.js supports transactions to ensure data integrity. Use <code>db.transaction()</code> to wrap multiple database operations within a single transaction. If any operation fails within the transaction, the entire transaction is rolled back.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">transaction</span>(<span class="st">'rw'</span><span class="op">,</span> db<span class="op">.</span><span class="at">users</span><span class="op">,</span> db<span class="op">.</span><span class="at">products</span><span class="op">,</span> <span class="kw">function</span><span class="op">*</span> () {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> db<span class="op">.</span><span class="at">users</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">'Jane Doe'</span> })<span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> db<span class="op">.</span><span class="at">products</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">'Widget'</span><span class="op">,</span> <span class="dt">price</span><span class="op">:</span> <span class="dv">10</span> })<span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="where-clauses">Where Clauses</h3>
<p>Dexie.js uses <code>.where()</code> to filter results based on various conditions:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">users</span><span class="op">.</span><span class="fu">where</span>(<span class="st">'age'</span>)<span class="op">.</span><span class="fu">above</span>(<span class="dv">25</span>)<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span> <span class="co">// Get all users older than 25</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">products</span><span class="op">.</span><span class="fu">where</span>(<span class="st">'price'</span>)<span class="op">.</span><span class="fu">between</span>(<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span>)<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span> <span class="co">//Get products with price between 10 and 20</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">users</span><span class="op">.</span><span class="fu">where</span>(<span class="st">'name'</span>)<span class="op">.</span><span class="fu">startsWith</span>(<span class="st">'J'</span>)<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span> <span class="co">// Get all users whose name starts with 'J'</span></span></code></pre></div>
<p>You can chain multiple <code>.where()</code> clauses, though this is more efficient with indexes on the relevant fields.</p>
<h3 id="ordering-results">Ordering Results</h3>
<p>Use <code>.orderBy()</code> to sort the results of a query:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">products</span><span class="op">.</span><span class="fu">orderBy</span>(<span class="st">'price'</span>)<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span> <span class="co">// Order products by price (ascending)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">products</span><span class="op">.</span><span class="fu">orderBy</span>(<span class="st">'price'</span>)<span class="op">.</span><span class="fu">reverse</span>()<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span> <span class="co">// Order products by price (descending)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">products</span><span class="op">.</span><span class="fu">orderBy</span>(<span class="st">'category'</span><span class="op">,</span> <span class="st">'price'</span>)<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span><span class="co">// Order by category, then price.</span></span></code></pre></div>
<p>Multiple columns can be used for multi-level sorting.</p>
<h3 id="filtering-results">Filtering Results</h3>
<p>The <code>.filter()</code> method allows you to filter the results based on a custom function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">products</span><span class="op">.</span><span class="fu">where</span>(<span class="st">'price'</span>)<span class="op">.</span><span class="fu">above</span>(<span class="dv">10</span>)<span class="op">.</span><span class="fu">filter</span>(product <span class="kw">=&gt;</span> product<span class="op">.</span><span class="at">category</span> <span class="op">===</span> <span class="st">'Electronics'</span>)<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span></span></code></pre></div>
<h3 id="limiting-results">Limiting Results</h3>
<p>Use <code>.limit()</code> to restrict the number of results returned:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">products</span><span class="op">.</span><span class="fu">orderBy</span>(<span class="st">'price'</span>)<span class="op">.</span><span class="fu">limit</span>(<span class="dv">5</span>)<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span> <span class="co">// Get the 5 cheapest products</span></span></code></pre></div>
<p><code>.offset()</code> can be used in conjunction with <code>.limit()</code> to skip a certain number of results:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">products</span><span class="op">.</span><span class="fu">orderBy</span>(<span class="st">'price'</span>)<span class="op">.</span><span class="fu">offset</span>(<span class="dv">5</span>)<span class="op">.</span><span class="fu">limit</span>(<span class="dv">5</span>)<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span><span class="co">// Get products ranked 6-10 by price</span></span></code></pre></div>
<p>Remember to chain these methods appropriately for complex queries. Using indexes whenever possible significantly improves query performance.</p>
<h2 id="advanced-features">Advanced Features</h2>
<h3 id="database-events">Database Events</h3>
<p>Dexie.js emits several events that allow you to react to database changes and lifecycle events. These events are typically handled using the <code>.on()</code> method. Common events include:</p>
<ul>
<li><strong><code>'populate'</code>:</strong> Fired when the database is populated from IndexedDB.</li>
<li><strong><code>'ready'</code>:</strong> Fired when the database is ready for use after opening.</li>
<li><strong><code>'blocked'</code>:</strong> Fired when another tab or window is blocking database access.</li>
<li><strong><code>'versionchange'</code>:</strong> Fired when a version change is requested. This is useful for handling schema migrations smoothly across different browser tabs or windows.</li>
<li><strong><code>'upgrade'</code>:</strong> Fired during database upgrades, allowing custom upgrade logic.</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">on</span>(<span class="st">'ready'</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">'Database is ready'</span>))<span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">on</span>(<span class="st">'blocked'</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="bu">console</span><span class="op">.</span><span class="fu">warn</span>(<span class="st">'Database is blocked'</span>))<span class="op">;</span></span></code></pre></div>
<h3 id="collections">Collections</h3>
<p>Dexie Collections, returned by <code>db.table.toCollection()</code>, offer a fluent API for building complex queries and chaining operations before executing them with methods like <code>toArray()</code>, <code>each()</code>, <code>count()</code>, etc. They act as a sort of deferred execution mechanism, giving more control over how and when queries are executed. Efficient for complex queries or scenarios requiring multiple operations on the same subset of data.</p>
<h3 id="upgrade-strategies">Upgrade Strategies</h3>
<p>When upgrading database versions, you must handle schema changes within the <code>upgrade</code> event handler of the <code>Dexie.version()</code> method. This ensures data integrity during schema migrations. Use transactions within the <code>upgrade</code> function to ensure atomicity of operations.</p>
<h3 id="hooks">Hooks</h3>
<p>Dexie.js allows defining hooks to run specific code before or after database operations. These hooks provide opportunities for logging, validation, or other custom logic:</p>
<ul>
<li><strong><code>before</code> hooks:</strong> Run before an operation (e.g., <code>add</code>, <code>put</code>, <code>update</code>, <code>delete</code>).</li>
<li><strong><code>after</code> hooks:</strong> Run after an operation.</li>
</ul>
<p>Hooks are defined using the <code>hook()</code> method. For instance, creating a <code>before</code> hook that logs operations:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">users</span><span class="op">.</span><span class="fu">hook</span>(<span class="st">'beforeAdd'</span><span class="op">,</span> (primKey<span class="op">,</span> obj<span class="op">,</span> transaction) <span class="kw">=&gt;</span> {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Adding user:"</span><span class="op">,</span> obj)<span class="op">;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="custom-table-methods">Custom Table Methods</h3>
<p>You can add custom methods to your tables to encapsulate frequently used operations or create reusable logic. This helps to enhance code readability and maintainability:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">users</span><span class="op">.</span><span class="fu">method</span>(<span class="st">'findByEmail'</span><span class="op">,</span> <span class="kw">function</span>(email) {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">where</span>(<span class="st">'email'</span>)<span class="op">.</span><span class="fu">equals</span>(email)<span class="op">.</span><span class="fu">first</span>()<span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage:</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">users</span><span class="op">.</span><span class="fu">findByEmail</span>(<span class="st">'test@example.com'</span>)<span class="op">.</span><span class="fu">then</span>(user <span class="kw">=&gt;</span> { <span class="co">/* ... */</span> })<span class="op">;</span></span></code></pre></div>
<h3 id="versioning-and-migrations">Versioning and Migrations</h3>
<p>Dexie.js uses versions to manage schema changes. Each version is defined using <code>db.version(number)</code>, and the <code>upgrade</code> function within this definition contains the necessary upgrade logic. For example:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">version</span>(<span class="dv">2</span>)<span class="op">.</span><span class="fu">stores</span>({</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">users</span><span class="op">:</span> <span class="st">'++id, name, email, address'</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">upgrade</span>(<span class="kw">function</span> (trans) {</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (trans<span class="op">.</span><span class="at">db</span><span class="op">.</span><span class="at">version</span> <span class="op">===</span> <span class="dv">1</span>) {</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">// upgrade logic from version 1 to version 2</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>        trans<span class="op">.</span><span class="at">db</span><span class="op">.</span><span class="at">users</span><span class="op">.</span><span class="fu">toCollection</span>()<span class="op">.</span><span class="fu">modify</span>({<span class="dt">address</span><span class="op">:</span> <span class="kw">null</span>})<span class="op">;</span> <span class="co">//add a new field `address`</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="working-with-blobs-and-files">Working with Blobs and Files</h3>
<p>Dexie.js handles Blobs and Files seamlessly. You can store and retrieve them just like any other data type, using methods like <code>add()</code> and <code>get()</code>. The key is that the database will store references to the blobs, not the entire blob data directly in the table itself.</p>
<h3 id="error-handling">Error Handling</h3>
<p>Always use <code>.catch()</code> to handle potential errors during database operations. Dexie.js throws errors for various reasons, including invalid queries, database failures, and schema mismatches. Appropriate error handling is crucial for application robustness. Check for specific error types (e.g., <code>Dexie.NoSuchPrimaryKey</code>, <code>Dexie.SchemaError</code>, etc.) to provide user-friendly error messages.</p>
<h3 id="performance-tuning">Performance Tuning</h3>
<ul>
<li><strong>Use Indexes:</strong> Create indexes on frequently queried columns to significantly improve query performance.</li>
<li><strong>Minimize Transactions:</strong> Use transactions judiciously, as large transactions can impact performance.</li>
<li><strong>Efficient Queries:</strong> Avoid <code>getAll()</code> if possible when only one or a few specific records are needed; instead use <code>get()</code> or <code>where()</code> for more targeted retrievals.</li>
<li><strong>Batch Operations:</strong> Use <code>bulkAdd()</code> and <code>bulkPut()</code> for adding or updating multiple records efficiently.</li>
<li><strong>Asynchronous Operations:</strong> Always use Promises or async/await to handle asynchronous operations gracefully, preventing blocking.</li>
<li><strong>Data Validation:</strong> Perform data validation before writing to the database to prevent issues that might require rollback.</li>
</ul>
<h2 id="working-with-different-data-types">Working with Different Data Types</h2>
<p>Dexie.js handles various JavaScript data types with minimal friction. However, understanding how these types are stored and retrieved can lead to more efficient and robust code.</p>
<h3 id="numbers">Numbers</h3>
<p>Numbers are stored as their native JavaScript numeric representations (both integers and floating-point numbers). Dexie.js automatically handles type inference and conversion. No special handling is usually needed.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">count</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">price</span><span class="op">:</span> <span class="fl">99.99</span> })<span class="op">;</span></span></code></pre></div>
<h3 id="strings">Strings</h3>
<p>Strings are stored as native JavaScript strings. No special encoding or escaping is typically required, though you might need to handle encoding/decoding if you’re interacting with external systems that might use different character encodings.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">'John Doe'</span><span class="op">,</span> <span class="dt">description</span><span class="op">:</span> <span class="st">'A long string with various characters.'</span> })<span class="op">;</span></span></code></pre></div>
<h3 id="dates">Dates</h3>
<p>Dates are stored as timestamps (the number of milliseconds since the Unix epoch). When retrieving a Date object from the database, Dexie.js automatically converts the timestamp back into a <code>Date</code> object.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> now <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">created</span><span class="op">:</span> now })<span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ... later ...</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">get</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">then</span>(item <span class="kw">=&gt;</span> {</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(item<span class="op">.</span><span class="at">created</span> <span class="kw">instanceof</span> <span class="bu">Date</span>)<span class="op">;</span> <span class="co">// true</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="arrays">Arrays</h3>
<p>Arrays are stored as JavaScript arrays. There are no special constraints on the data types within the array; they can be a mix of numbers, strings, objects, etc. However, for better queryability, consider structuring your data to avoid deeply nested arrays if possible.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">tags</span><span class="op">:</span> [<span class="st">'javascript'</span><span class="op">,</span> <span class="st">'indexeddb'</span><span class="op">,</span> <span class="st">'dexie'</span>] })<span class="op">;</span></span></code></pre></div>
<h3 id="objects">Objects</h3>
<p>Objects are stored as JavaScript objects. They are generally handled without special treatment, but remember that you cannot directly query the properties of nested objects unless you design your schema to reflect the necessary structure for querying.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">user</span><span class="op">:</span> { <span class="dt">name</span><span class="op">:</span> <span class="st">'Jane'</span><span class="op">,</span> <span class="dt">age</span><span class="op">:</span> <span class="dv">30</span> } })<span class="op">;</span></span></code></pre></div>
<p>To efficiently query nested data, flatten your object structure where needed for indexing or pre-process the data for easier querying.</p>
<h3 id="json">JSON</h3>
<p>While Dexie.js doesn’t have a specific JSON type, you can store JSON data as strings. You will need to explicitly parse the JSON strings using <code>JSON.parse()</code> when retrieving and <code>JSON.stringify()</code> when storing.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> jsonData <span class="op">=</span> { <span class="dt">name</span><span class="op">:</span> <span class="st">'Test'</span><span class="op">,</span> <span class="dt">data</span><span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>] }<span class="op">;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">data</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(jsonData) })<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Retrieving and parsing:</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">get</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">then</span>(item <span class="kw">=&gt;</span> {</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> parsedData <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(item<span class="op">.</span><span class="at">data</span>)<span class="op">;</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Use parsedData</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="blobs">Blobs</h3>
<p>Blobs (Binary Large Objects) are stored as Blobs. Dexie.js handles them efficiently, storing references to the actual blob data within IndexedDB. When retrieving a Blob, you receive a new Blob object representing the data. For large Blobs, consider optimizing your data handling to avoid loading unnecessary data into memory.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> myBlob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([<span class="st">'Hello, world!'</span>]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'text/plain'</span> })<span class="op">;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myTable</span><span class="op">.</span><span class="fu">add</span>({ <span class="dt">myBlob</span><span class="op">:</span> myBlob })<span class="op">;</span></span></code></pre></div>
<p>Remember that efficient data modeling and indexing are critical for optimal performance when working with large datasets or complex data structures in Dexie.js. Consider optimizing your data structure to support efficient querying.</p>
<h2 id="best-practices">Best Practices</h2>
<h3 id="database-design">Database Design</h3>
<p>Careful database design is crucial for performance and maintainability. Consider these points:</p>
<ul>
<li><strong>Schema Normalization:</strong> Design your schema to minimize data redundancy and improve data integrity. Avoid storing the same data in multiple places.</li>
<li><strong>Data Types:</strong> Choose appropriate data types for each field to optimize storage and retrieval.</li>
<li><strong>Indexes:</strong> Strategically create indexes on frequently queried columns to significantly improve query speed. Avoid over-indexing, as this can slow down write operations.</li>
<li><strong>Relationships:</strong> If your data has relationships (e.g., one-to-many, many-to-many), design your schema to represent them efficiently. Consider using separate tables linked by foreign keys instead of embedding related data within a single object.</li>
<li><strong>Scalability:</strong> Design your database to scale with your application’s growth. This might involve considering data partitioning or sharding strategies for very large datasets.</li>
</ul>
<h3 id="schema-optimization">Schema Optimization</h3>
<ul>
<li><strong>Avoid Over-Normalization:</strong> While normalization is beneficial, excessive normalization can lead to overly complex schemas and slower queries. Strive for a balance between normalization and efficiency.</li>
<li><strong>Primary Keys:</strong> Choose appropriate primary keys. Auto-incrementing keys are generally a good default choice, but custom primary keys might be necessary depending on your data model.</li>
<li><strong>Indexes:</strong> Carefully select the columns to index. Index columns frequently used in <code>where</code> clauses, <code>orderBy</code> clauses, and joins. Experiment with different indexes to find the optimal configuration.</li>
</ul>
<h3 id="query-optimization">Query Optimization</h3>
<ul>
<li><strong>Use Indexes:</strong> Leverage indexes to speed up queries. Without indexes, Dexie.js will perform full table scans, which can be very slow for large datasets.</li>
<li><strong>Avoid <code>getAll()</code>:</strong> Use <code>getAll()</code> only when necessary to retrieve all data. For specific records, prefer <code>get()</code> or queries using <code>.where()</code>.</li>
<li><strong>Limit and Offset:</strong> Use <code>limit()</code> and <code>offset()</code> to reduce the amount of data retrieved, improving query performance, especially for paginated results.</li>
<li><strong>Chaining:</strong> Chain Dexie’s query methods effectively. This is often more efficient than executing multiple separate queries.</li>
<li><strong>Transactions:</strong> Use transactions to wrap multiple database operations for data integrity and, sometimes, improved performance. However, very large transactions should be avoided.</li>
</ul>
<h3 id="error-handling-best-practices">Error Handling Best Practices</h3>
<ul>
<li><strong><code>catch()</code> Blocks:</strong> Always include <code>.catch()</code> blocks in your asynchronous database operations to handle potential errors gracefully.</li>
<li><strong>Specific Error Handling:</strong> Try to catch and handle specific error types (e.g., <code>Dexie.NoSuchPrimaryKey</code>, <code>Dexie.TransactionError</code>) to provide more informative error messages and error recovery strategies.</li>
<li><strong>User Feedback:</strong> Provide user-friendly error messages rather than displaying technical details to the end user.</li>
<li><strong>Logging:</strong> Log errors for debugging and monitoring purposes, storing the error details for later analysis.</li>
<li><strong>Retry Logic:</strong> For transient errors (e.g., network issues), you might incorporate retry mechanisms with exponential backoff.</li>
</ul>
<h3 id="testing-and-debugging">Testing and Debugging</h3>
<ul>
<li><strong>Unit Tests:</strong> Write unit tests to verify the correctness of your database interactions, ensuring data consistency and preventing regressions.</li>
<li><strong>Integration Tests:</strong> Test the interaction between your database and other parts of your application.</li>
<li><strong>Browser Developer Tools:</strong> Use your browser’s developer tools (especially the console) to inspect database operations, debug queries, and examine error messages. Pay attention to network requests and database interactions when troubleshooting.</li>
<li><strong>Dexie’s Debug Mode:</strong> Enable Dexie’s debug mode (<code>Dexie.debug = true;</code>) to get additional logging information which can be helpful during development and debugging.</li>
<li><strong>Version Control:</strong> Use version control to track changes to your database schema and code, making it easy to revert to previous states if necessary.</li>
</ul>
<h2 id="api-reference">API Reference</h2>
<p>This section provides a concise overview of the core Dexie.js API objects. For complete and up-to-date details, refer to the official Dexie.js documentation.</p>
<h3 id="dexie-object">Dexie Object</h3>
<p>The <code>Dexie</code> object represents the entire database. It’s created using the <code>new Dexie(dbName)</code> constructor. Key methods include:</p>
<ul>
<li><strong><code>version(number)</code>:</strong> Defines a database version and its schema. Used for schema migrations.</li>
<li><strong><code>open()</code>:</strong> Opens the database (usually handled implicitly).</li>
<li><strong><code>close()</code>:</strong> Closes the database.</li>
<li><strong><code>table(tableName)</code>:</strong> Returns a <code>Table</code> object for a specific table.</li>
<li><strong><code>transaction(mode, tables, func)</code>:</strong> Creates a transaction.</li>
<li><strong><code>on(eventName, listener)</code>:</strong> Attaches an event listener.</li>
<li><strong><code>delete()</code>:</strong> Deletes the entire database.</li>
</ul>
<h3 id="table-object">Table Object</h3>
<p>The <code>Table</code> object represents a single table within the database. It’s obtained via <code>db.table(tableName)</code>. Key methods include:</p>
<ul>
<li><strong><code>add(obj)</code>:</strong> Adds a new object.</li>
<li><strong><code>put(obj)</code>:</strong> Adds or updates an object.</li>
<li><strong><code>bulkAdd(arrayOfObjs)</code>:</strong> Adds multiple objects.</li>
<li><strong><code>bulkPut(arrayOfObjs)</code>:</strong> Adds or updates multiple objects.</li>
<li><strong><code>get(primaryKey)</code>:</strong> Retrieves an object by primary key.</li>
<li><strong><code>getAll(primaryKey)</code>:</strong> Retrieves objects by primary keys or all objects if no keys are provided.</li>
<li><strong><code>delete(primaryKey)</code>:</strong> Deletes an object by primary key.</li>
<li><strong><code>clear()</code>:</strong> Deletes all objects from the table.</li>
<li><strong><code>where(indexName)</code>:</strong> Starts a where clause.</li>
<li><strong><code>count()</code>:</strong> Counts the number of objects in the table or matching a query.</li>
<li><strong><code>orderBy(indexName)</code>:</strong> Orders the results of a query.</li>
<li><strong><code>limit(n)</code>:</strong> Limits the number of results.</li>
<li><strong><code>offset(n)</code>:</strong> Skips the first <code>n</code> results.</li>
<li><strong><code>filter(filterFunction)</code>:</strong> Filters the results of a query.</li>
<li><strong><code>toCollection()</code>:</strong> Returns a <code>Collection</code> object for chained query building.</li>
<li><strong><code>hook(hookName, callback)</code>:</strong> Attaches a hook (before/after operations).</li>
<li><strong><code>method(methodName, methodFunction)</code>:</strong> Adds a custom method to the table.</li>
</ul>
<h3 id="collection-object">Collection Object</h3>
<p>The <code>Collection</code> object represents a query that hasn’t been executed yet. It’s obtained via <code>table.toCollection()</code>. It allows for building complex queries by chaining multiple methods before finally executing the query with methods like:</p>
<ul>
<li><strong><code>toArray()</code>:</strong> Executes the query and returns a Promise resolving to an array.</li>
<li><strong><code>each(callback)</code>:</strong> Executes the query and iterates through the results, calling the callback for each.</li>
<li><strong><code>count()</code>:</strong> Counts the number of results.</li>
<li><strong><code>offset(n)</code>:</strong> Skips the first <code>n</code> results.</li>
<li><strong><code>limit(n)</code>:</strong> Limits the number of results.</li>
<li><strong><code>filter(filterFunction)</code>:</strong> Filters the results.</li>
<li><strong><code>modify(modifier)</code>:</strong> Modifies the objects in the collection directly in the database.</li>
<li><strong><code>delete()</code>:</strong> Deletes the objects in the collection.</li>
</ul>
<h3 id="transaction-object">Transaction Object</h3>
<p>The <code>Transaction</code> object represents a database transaction. It’s created via <code>db.transaction()</code>. Key properties and methods:</p>
<ul>
<li><strong><code>tables</code>:</strong> An array of the tables involved in the transaction.</li>
<li><strong><code>mode</code>:</strong> The transaction mode (‘rw’ for read-write, ‘r’ for read-only).</li>
<li><strong><code>table(tableName)</code>:</strong> Returns the <code>Table</code> object for a table within this transaction.</li>
</ul>
<h3 id="keyrange-object">KeyRange Object</h3>
<p>The <code>KeyRange</code> object is used to specify a range of keys in <code>where</code> clauses. It’s not directly created by the user but is used by functions such as <code>.where(...).between(a, b)</code>.</p>
<h3 id="helper-functions">Helper Functions</h3>
<p>Dexie.js provides several helper functions:</p>
<ul>
<li><strong><code>Dexie.Promise.resolve()</code>/<code>Dexie.Promise.reject()</code>:</strong> Promise creation methods.</li>
<li><strong><code>Dexie.liveQuery()</code>:</strong> Creates a live query, reacting to changes. Useful for real-time updates.</li>
</ul>
<p>This API reference provides a high-level overview. Refer to the official documentation for detailed descriptions, examples, and exhaustive coverage of all options and methods. The official documentation is the most accurate and updated source for Dexie.js’s API.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>This section covers common issues and strategies for resolving them when working with Dexie.js.</p>
<h3 id="common-errors">Common Errors</h3>
<ul>
<li><p><strong><code>Dexie.NoSuchPrimaryKey</code>:</strong> This error occurs when trying to access a record using <code>get()</code> or <code>delete()</code> with a primary key that doesn’t exist. Double-check the primary key value and ensure it’s correct.</p></li>
<li><p><strong><code>Dexie.SchemaError</code>:</strong> This indicates a schema mismatch, typically occurring during database upgrades. Review your upgrade logic in the <code>upgrade()</code> function within <code>db.version()</code>. Ensure that all schema changes are handled correctly and that transactions are used within the upgrade function.</p></li>
<li><p><strong><code>Dexie.QuotaExceededError</code>:</strong> This error indicates that the browser’s storage quota has been exceeded. Consider optimizing your database design, removing unnecessary data, or implementing strategies for managing storage limits.</p></li>
<li><p><strong><code>TypeError: this.transaction is undefined</code>:</strong> This often happens when calling database methods outside of a transaction or outside an async function that is part of a transaction. Ensure that all database operations are within an appropriate transaction context.</p></li>
<li><p><strong>Promise Rejection:</strong> If your database operations fail silently, make sure you have properly handled the Promise rejections using <code>.catch()</code>. Check the error object provided in the <code>catch</code> block for details on what went wrong.</p></li>
<li><p><strong><code>Error opening database</code>:</strong> This can be caused by multiple things: permission problems, browser restrictions, a database with the same name already open (check for this in other tabs).</p></li>
</ul>
<h3 id="debugging-techniques">Debugging Techniques</h3>
<ul>
<li><p><strong>Browser Developer Tools:</strong> Use your browser’s developer tools (especially the console) to examine errors, inspect network requests, and step through your code.</p></li>
<li><p><strong><code>Dexie.debug = true;</code>:</strong> Setting <code>Dexie.debug</code> to <code>true</code> enables verbose logging that can be very helpful in identifying issues. This provides detailed information about queries and database operations.</p></li>
<li><p><strong>Logging:</strong> Add <code>console.log()</code> statements at strategic points in your code to track data and identify where errors might be originating. Log the data being added to the database to see if it is what you expected.</p></li>
<li><p><strong>Simplify Your Code:</strong> Isolate problematic sections of code by temporarily removing or commenting out parts to identify the root cause.</p></li>
<li><p><strong>Check for Race Conditions:</strong> Be aware of potential race conditions if multiple parts of your application access the database concurrently. Use transactions to ensure data integrity.</p></li>
</ul>
<h3 id="troubleshooting-browser-compatibility">Troubleshooting Browser Compatibility</h3>
<p>Dexie.js generally supports modern browsers. However, ensure that you’re targeting browsers with adequate IndexedDB support. Older browsers might not support all Dexie.js features or might have different IndexedDB implementations that behave slightly differently.</p>
<h3 id="finding-help-and-support">Finding Help and Support</h3>
<ul>
<li><p><strong>Dexie.js Documentation:</strong> The official Dexie.js documentation is an excellent resource, providing detailed explanations, examples, and API references.</p></li>
<li><p><strong>GitHub Issues:</strong> Check the Dexie.js GitHub repository for existing issues. If you can’t find a solution, create a new issue, providing detailed information about the problem, your code, and the steps to reproduce it.</p></li>
<li><p><strong>Online Forums and Communities:</strong> Search online forums and communities (e.g., Stack Overflow) for solutions to common problems.</p></li>
<li><p><strong>Dexie.js Author:</strong> Contact the Dexie.js author through appropriate channels (e.g., GitHub) if you need direct assistance.</p></li>
</ul>
<p>Remember to always provide a minimal, reproducible example when seeking help online. This makes it easier for others to understand your problem and assist you in finding a solution.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>