<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>FileSaver.js - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MXDPF6L5TL"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MXDPF6L5TL', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta property="og:title" content="FileSaver.js - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">FileSaver.js - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction">Introduction</a>
  <ul>
  <li><a href="#what-is-filesaver.js" id="toc-what-is-filesaver.js">What is FileSaver.js?</a></li>
  <li><a href="#why-use-filesaver.js" id="toc-why-use-filesaver.js">Why use FileSaver.js?</a></li>
  <li><a href="#browser-compatibility" id="toc-browser-compatibility">Browser Compatibility</a></li>
  <li><a href="#installation" id="toc-installation">Installation</a></li>
  </ul></li>
  <li><a href="#basic-usage" id="toc-basic-usage">Basic Usage</a>
  <ul>
  <li><a href="#saving-a-simple-text-file" id="toc-saving-a-simple-text-file">Saving a simple text file</a></li>
  <li><a href="#saving-a-blob-object" id="toc-saving-a-blob-object">Saving a Blob object</a></li>
  <li><a href="#specifying-the-filename" id="toc-specifying-the-filename">Specifying the filename</a></li>
  <li><a href="#setting-file-type-and-extensions" id="toc-setting-file-type-and-extensions">Setting file type and extensions</a></li>
  </ul></li>
  <li><a href="#advanced-usage" id="toc-advanced-usage">Advanced Usage</a>
  <ul>
  <li><a href="#saving-data-urls" id="toc-saving-data-urls">Saving data URLs</a></li>
  <li><a href="#saving-from-a-canvas-element" id="toc-saving-from-a-canvas-element">Saving from a canvas element</a></li>
  <li><a href="#handling-user-prompts-and-errors" id="toc-handling-user-prompts-and-errors">Handling user prompts and errors</a></li>
  <li><a href="#customizing-the-save-dialog" id="toc-customizing-the-save-dialog">Customizing the save dialog</a></li>
  <li><a href="#working-with-different-file-types-e.g.-images-pdfs" id="toc-working-with-different-file-types-e.g.-images-pdfs">Working with different file types (e.g., images, PDFs)</a></li>
  <li><a href="#asynchronous-operations" id="toc-asynchronous-operations">Asynchronous operations</a></li>
  </ul></li>
  <li><a href="#api-reference" id="toc-api-reference">API Reference</a>
  <ul>
  <li><a href="#saveas-method-parameters-and-return-values" id="toc-saveas-method-parameters-and-return-values"><code>saveAs()</code> method parameters and return values</a></li>
  <li><a href="#detailed-explanation-of-each-parameter" id="toc-detailed-explanation-of-each-parameter">Detailed explanation of each parameter</a></li>
  <li><a href="#error-handling-and-exceptions" id="toc-error-handling-and-exceptions">Error handling and exceptions</a></li>
  </ul></li>
  <li><a href="#examples" id="toc-examples">Examples</a>
  <ul>
  <li><a href="#saving-text-files" id="toc-saving-text-files">Saving text files</a></li>
  <li><a href="#saving-image-files" id="toc-saving-image-files">Saving image files</a></li>
  <li><a href="#saving-csv-files" id="toc-saving-csv-files">Saving CSV files</a></li>
  <li><a href="#saving-json-files" id="toc-saving-json-files">Saving JSON files</a></li>
  <li><a href="#complex-example-combining-multiple-data-sources" id="toc-complex-example-combining-multiple-data-sources">Complex example: combining multiple data sources</a></li>
  </ul></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting">Troubleshooting</a>
  <ul>
  <li><a href="#common-errors-and-solutions" id="toc-common-errors-and-solutions">Common errors and solutions</a></li>
  <li><a href="#debugging-tips" id="toc-debugging-tips">Debugging tips</a></li>
  <li><a href="#browser-specific-issues" id="toc-browser-specific-issues">Browser-specific issues</a></li>
  </ul></li>
  <li><a href="#contributing" id="toc-contributing">Contributing</a>
  <ul>
  <li><a href="#reporting-bugs" id="toc-reporting-bugs">Reporting bugs</a></li>
  <li><a href="#suggesting-features" id="toc-suggesting-features">Suggesting features</a></li>
  <li><a href="#coding-style-guide" id="toc-coding-style-guide">Coding style guide</a></li>
  <li><a href="#testing-procedures" id="toc-testing-procedures">Testing procedures</a></li>
  </ul></li>
  </ul>
</nav>
<h2 id="introduction">Introduction</h2>
<h3 id="what-is-filesaver.js">What is FileSaver.js?</h3>
<p>FileSaver.js is a JavaScript library that allows you to save files on the client-side, directly from the user’s web browser. It provides a simple and consistent API for saving files of various types, bypassing the browser’s often inconsistent and limited native file download mechanisms. This means you can programmatically trigger a file download without relying on <code>&lt;a&gt;</code> tags or form submissions.</p>
<h3 id="why-use-filesaver.js">Why use FileSaver.js?</h3>
<ul>
<li><p><strong>Cross-browser consistency:</strong> FileSaver.js provides a unified API across different browsers, abstracting away the variations in how they handle file downloads. This simplifies your code and ensures consistent behavior across various platforms.</p></li>
<li><p><strong>Programmatic control:</strong> You have complete control over the file download process, including the filename, file content, and MIME type. This is particularly useful for dynamically generated files or complex data processing workflows.</p></li>
<li><p><strong>Enhanced user experience:</strong> FileSaver.js enables a smoother and more intuitive file download experience for users. It avoids the limitations and quirks often associated with older, less reliable methods.</p></li>
<li><p><strong>Ease of use:</strong> The API is straightforward and easy to integrate into your existing JavaScript projects.</p></li>
</ul>
<h3 id="browser-compatibility">Browser Compatibility</h3>
<p>FileSaver.js supports a wide range of modern browsers, including:</p>
<ul>
<li>Chrome</li>
<li>Firefox</li>
<li>Safari</li>
<li>Edge</li>
<li>Opera</li>
</ul>
<p>For older browsers that lack the necessary features, FileSaver.js gracefully degrades, often using a fallback mechanism to provide the functionality. Check the official repository for the most up-to-date compatibility information. It’s generally compatible with any browser that supports Blob objects.</p>
<h3 id="installation">Installation</h3>
<p>FileSaver.js can be easily installed using various methods:</p>
<ul>
<li><p><strong>npm:</strong> If you’re using npm (Node Package Manager), you can install it via the command line:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install file-saver</span></code></pre></div>
<p>Then, import it into your JavaScript file:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span></code></pre></div></li>
<li><p><strong>CDN:</strong> You can include FileSaver.js directly from a CDN, such as jsDelivr:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code></pre></div>
<p>This will make the <code>saveAs</code> function globally available.</p></li>
<li><p><strong>Direct Download:</strong> Download the library from the official GitHub repository and include it in your project using a <code>&lt;script&gt;</code> tag. Remember to reference the correct file path.</p></li>
</ul>
<h2 id="basic-usage">Basic Usage</h2>
<h3 id="saving-a-simple-text-file">Saving a simple text file</h3>
<p>The simplest way to use FileSaver.js is to save a plain text file. This example saves a text string as a <code>.txt</code> file:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> textToSave <span class="op">=</span> <span class="st">'Hello, FileSaver.js!'</span><span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([textToSave]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'text/plain;charset=utf-8'</span> })<span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-file.txt'</span>)<span class="op">;</span></span></code></pre></div>
<p>This code first creates a <code>Blob</code> object from the text string, specifying the MIME type as <code>text/plain</code>. Then, it uses the <code>saveAs</code> function to initiate the download, providing the <code>Blob</code> and the desired filename.</p>
<h3 id="saving-a-blob-object">Saving a Blob object</h3>
<p>FileSaver.js primarily works with <code>Blob</code> objects. A <code>Blob</code> represents a file-like object in the browser. You can create a <code>Blob</code> from various data sources, including strings, arrays, and array buffers. This example demonstrates saving a Blob created from an array of strings:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> data <span class="op">=</span> [</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Line 1'</span><span class="op">,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Line 2'</span><span class="op">,</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Line 3'</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>(data<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'text/plain;charset=utf-8'</span> })<span class="op">;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-data.txt'</span>)<span class="op">;</span></span></code></pre></div>
<p>Remember to specify the appropriate MIME type based on the content of your Blob.</p>
<h3 id="specifying-the-filename">Specifying the filename</h3>
<p>The second argument to the <code>saveAs</code> function determines the filename. You can use any valid filename, including extensions:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([<span class="st">'This is my file content.'</span>]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'text/plain;charset=utf-8'</span> })<span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-document.txt'</span>)<span class="op">;</span> <span class="co">//Saves as my-document.txt</span></span></code></pre></div>
<p>The filename should include the desired extension to indicate the file type to the user’s operating system.</p>
<h3 id="setting-file-type-and-extensions">Setting file type and extensions</h3>
<p>The file type is crucial and is set using the <code>type</code> property within the <code>Blob</code> constructor. This determines how the browser handles the downloaded file (e.g., which application opens it). The filename extension should generally correspond to the MIME type.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">//Save a CSV file</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> csvData <span class="op">=</span> <span class="st">'Name,Age,City</span><span class="sc">\n</span><span class="st">John,30,New York</span><span class="sc">\n</span><span class="st">Jane,25,London'</span><span class="op">;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([csvData]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'text/csv;charset=utf-8'</span> })<span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-data.csv'</span>)<span class="op">;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">// Save a JSON file</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> jsonData <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">'John Doe'</span><span class="op">,</span> <span class="dt">age</span><span class="op">:</span> <span class="dv">30</span> })<span class="op">;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> jsonBlob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([jsonData]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'application/json;charset=utf-8'</span> })<span class="op">;</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(jsonBlob<span class="op">,</span> <span class="st">'data.json'</span>)<span class="op">;</span></span></code></pre></div>
<p>Incorrect MIME types can lead to the file not opening correctly or being handled unexpectedly by the browser. Make sure to use the correct MIME type for the data you’re saving.</p>
<h2 id="advanced-usage">Advanced Usage</h2>
<h3 id="saving-data-urls">Saving data URLs</h3>
<p>You can save files from data URLs using FileSaver.js. First, you need to convert the data URL into a <code>Blob</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dataURLtoBlob</span>(dataurl) {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> arr <span class="op">=</span> dataurl<span class="op">.</span><span class="fu">split</span>(<span class="st">','</span>)<span class="op">,</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      mime <span class="op">=</span> arr[<span class="dv">0</span>]<span class="op">.</span><span class="fu">match</span>(<span class="ss">/:</span><span class="sc">(</span><span class="ss">.</span><span class="sc">*?)</span><span class="ss">;/</span>)[<span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      bstr <span class="op">=</span> <span class="fu">atob</span>(arr[<span class="dv">1</span>])<span class="op">,</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      n <span class="op">=</span> bstr<span class="op">.</span><span class="at">length</span><span class="op">,</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>      u8arr <span class="op">=</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>(n)<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(n<span class="op">--</span>){</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    u8arr[n] <span class="op">=</span> bstr<span class="op">.</span><span class="fu">charCodeAt</span>(n)<span class="op">;</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Blob</span>([u8arr]<span class="op">,</span> {<span class="dt">type</span><span class="op">:</span>mime})<span class="op">;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> dataUrl <span class="op">=</span> <span class="st">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=='</span><span class="op">;</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="fu">dataURLtoBlob</span>(dataUrl)<span class="op">;</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'image-from-dataurl.png'</span>)<span class="op">;</span></span></code></pre></div>
<p>This example defines a helper function <code>dataURLtoBlob</code> to perform the conversion before passing the resulting <code>Blob</code> to <code>saveAs</code>.</p>
<h3 id="saving-from-a-canvas-element">Saving from a canvas element</h3>
<p>To save the contents of a canvas element, you first need to get the image data as a data URL using <code>canvas.toDataURL()</code>, and then use the <code>dataURLtoBlob</code> function from the previous example:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Assuming you have a canvas element with id 'myCanvas'</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> canvas <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myCanvas'</span>)<span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> dataUrl <span class="op">=</span> canvas<span class="op">.</span><span class="fu">toDataURL</span>()<span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="fu">dataURLtoBlob</span>(dataUrl)<span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-canvas.png'</span>)<span class="op">;</span></span></code></pre></div>
<p>Remember to replace <code>'myCanvas'</code> with the actual ID of your canvas element.</p>
<h3 id="handling-user-prompts-and-errors">Handling user prompts and errors</h3>
<p>While FileSaver.js generally handles the download process smoothly, you might want to handle potential issues. Although errors are rare, you can wrap the <code>saveAs</code> call in a <code>try...catch</code> block:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span> {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([<span class="st">'My file content'</span>]<span class="op">,</span> {<span class="dt">type</span><span class="op">:</span> <span class="st">'text/plain'</span>})<span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-file.txt'</span>)<span class="op">;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">catch</span> (error) {</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">'Error saving file:'</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add user-friendly error handling here, e.g., display an alert message.</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This improves robustness by providing a mechanism for handling unexpected problems.</p>
<h3 id="customizing-the-save-dialog">Customizing the save dialog</h3>
<p>FileSaver.js doesn’t directly provide options to extensively customize the browser’s save dialog. The dialog’s appearance and behavior are primarily controlled by the browser itself. However, ensuring correct MIME types and filenames gives the user the best chance of a smooth experience.</p>
<h3 id="working-with-different-file-types-e.g.-images-pdfs">Working with different file types (e.g., images, PDFs)</h3>
<p>FileSaver.js works seamlessly with various file types. The key is to use the appropriate MIME type when creating the <code>Blob</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">// PDF</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> pdfBlob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([pdfDocumentData]<span class="op">,</span> {<span class="dt">type</span><span class="op">:</span> <span class="st">'application/pdf'</span>})<span class="op">;</span>  <span class="co">//Replace pdfDocumentData with your PDF data</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(pdfBlob<span class="op">,</span> <span class="st">'my-document.pdf'</span>)<span class="op">;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Image (assuming you have image data as a Uint8Array)</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> imageBlob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([imageData]<span class="op">,</span> {<span class="dt">type</span><span class="op">:</span> <span class="st">'image/jpeg'</span>})<span class="op">;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(imageBlob<span class="op">,</span> <span class="st">'my-image.jpg'</span>)<span class="op">;</span></span></code></pre></div>
<p>Remember that the <code>pdfDocumentData</code> and <code>imageData</code> placeholders must be replaced with your actual data.</p>
<h3 id="asynchronous-operations">Asynchronous operations</h3>
<p>The <code>saveAs</code> function is asynchronous. While it doesn’t use Promises directly, the download process happens in the background. This means your code will continue executing after calling <code>saveAs</code> without waiting for the download to complete. This behavior is usually desirable; however, if you need to know when the download finishes, consider using events provided by the browser (which are outside the scope of FileSaver.js itself). For example, you could check the download progress via browser dev tools’ network tab.</p>
<h2 id="api-reference">API Reference</h2>
<h3 id="saveas-method-parameters-and-return-values"><code>saveAs()</code> method parameters and return values</h3>
<p>The core function of FileSaver.js is <code>saveAs()</code>. It takes two parameters:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> filename<span class="op">,</span> [options])<span class="op">;</span> </span></code></pre></div>
<ul>
<li><strong><code>blob</code></strong>: A <code>Blob</code> object representing the file data to be saved. This is a <em>required</em> parameter.</li>
<li><strong><code>filename</code></strong>: A string specifying the desired filename for the downloaded file. This includes the file extension (e.g., “my-file.txt”). This is a <em>required</em> parameter.</li>
<li><strong><code>options</code></strong>: (Optional) An object containing additional options. Currently, FileSaver.js does not directly support options via this parameter, though future versions might.</li>
</ul>
<p>The <code>saveAs()</code> function itself doesn’t return any value. The download process happens asynchronously in the background.</p>
<h3 id="detailed-explanation-of-each-parameter">Detailed explanation of each parameter</h3>
<ul>
<li><p><strong><code>blob</code> (Required):</strong> This parameter is a <code>Blob</code> object. A Blob is a file-like object representing raw data. You create a <code>Blob</code> using the <code>Blob</code> constructor, providing an array of data (e.g., strings, ArrayBuffers, etc.) and an optional <code>type</code> property to specify the MIME type. The <code>type</code> property is crucial for correctly identifying the file type and enabling the browser to handle the download appropriately. Examples of valid MIME types include: <code>text/plain</code>, <code>text/csv</code>, <code>application/json</code>, <code>image/png</code>, <code>image/jpeg</code>, <code>application/pdf</code>.</p></li>
<li><p><strong><code>filename</code> (Required):</strong> This parameter is a string that determines the name of the downloaded file. It’s a user-friendly name and should typically include the appropriate file extension (e.g., <code>.txt</code>, <code>.csv</code>, <code>.pdf</code>, <code>.jpg</code>). The browser will use this filename to present the file download to the user.</p></li>
<li><p><strong><code>options</code> (Optional):</strong> Currently, the <code>options</code> parameter is not actively used by FileSaver.js. However, it’s included in the function signature for potential future extensions and to maintain consistency with other file handling APIs.</p></li>
</ul>
<h3 id="error-handling-and-exceptions">Error handling and exceptions</h3>
<p>FileSaver.js generally handles the file saving process robustly. However, errors can occur due to issues like browser limitations or incorrect usage. While FileSaver.js doesn’t throw specific exceptions itself, problems might manifest as the file download failing to initiate or the save dialog not appearing. Therefore, good practice involves wrapping the <code>saveAs</code> call in a <code>try...catch</code> block to handle potential errors:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span> {</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([<span class="st">'My file content'</span>]<span class="op">,</span> {<span class="dt">type</span><span class="op">:</span> <span class="st">'text/plain'</span>})<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-file.txt'</span>)<span class="op">;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">catch</span> (error) {</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">'An error occurred while saving the file:'</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add user-friendly error handling here (e.g., display an alert to the user).</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This approach allows for better error management and provides a way to gracefully handle situations where the file saving operation fails. Note that the <code>error</code> object might not always contain detailed information about the failure, especially in older browser versions. In such cases, error handling should primarily focus on preventing the application from crashing and providing feedback to the user.</p>
<h2 id="examples">Examples</h2>
<h3 id="saving-text-files">Saving text files</h3>
<p>This example demonstrates saving a simple text file:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> text <span class="op">=</span> <span class="st">"This is the content of my text file."</span><span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([text]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'text/plain;charset=utf-8'</span> })<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-text-file.txt'</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="saving-image-files">Saving image files</h3>
<p>To save an image file, you’ll typically start with image data (e.g., from a canvas element or a data URL). This example assumes you have image data as a Uint8Array:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">//  Replace 'imageData' with your actual image data (Uint8Array)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> imageData <span class="op">=</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>([<span class="co">/* ... your image data ... */</span>])<span class="op">;</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([imageData]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'image/jpeg'</span> })<span class="op">;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-image.jpg'</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="saving-csv-files">Saving CSV files</h3>
<p>This example saves a CSV file with comma-separated values:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> csvData <span class="op">=</span> <span class="st">"Name,Age,City</span><span class="sc">\n</span><span class="st">John Doe,30,New York</span><span class="sc">\n</span><span class="st">Jane Doe,25,London"</span><span class="op">;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([csvData]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'text/csv;charset=utf-8'</span> })<span class="op">;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-data.csv'</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="saving-json-files">Saving JSON files</h3>
<p>Saving JSON data involves creating a Blob from a JSON string:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> jsonData <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">"John Doe"</span><span class="op">,</span> <span class="dt">age</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span> <span class="dt">city</span><span class="op">:</span> <span class="st">"New York"</span> })<span class="op">;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>([jsonData]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">'application/json;charset=utf-8'</span> })<span class="op">;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveAs</span>(blob<span class="op">,</span> <span class="st">'my-data.json'</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="complex-example-combining-multiple-data-sources">Complex example: combining multiple data sources</h3>
<p>This example demonstrates combining data from different sources into a single downloadable file (a zip archive in this case). Note that this requires a library to create the zip archive; this is just illustrative and you would need to include a suitable library like JSZip.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { saveAs } <span class="im">from</span> <span class="st">'file-saver'</span><span class="op">;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> JSZip <span class="im">from</span> <span class="st">'jszip'</span><span class="op">;</span> <span class="co">// You'll need to install jszip: npm install jszip</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">saveCombinedData</span>() {</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> zip <span class="op">=</span> <span class="kw">new</span> <span class="fu">JSZip</span>()<span class="op">;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add text file</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"data.txt"</span><span class="op">,</span> <span class="st">"This is some text data."</span>)<span class="op">;</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add JSON data</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"data.json"</span><span class="op">,</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({ <span class="dt">a</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">b</span><span class="op">:</span> <span class="dv">2</span> }))<span class="op">;</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Assuming you have image data as a Uint8Array</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> imageData <span class="op">=</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>([<span class="co">/* ... your image data ... */</span>])<span class="op">;</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"image.jpg"</span><span class="op">,</span> imageData<span class="op">,</span> {<span class="dt">binary</span><span class="op">:</span><span class="kw">true</span>})<span class="op">;</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> content <span class="op">=</span> <span class="cf">await</span> zip<span class="op">.</span><span class="fu">generateAsync</span>({ <span class="dt">type</span><span class="op">:</span> <span class="st">"blob"</span> })<span class="op">;</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveAs</span>(content<span class="op">,</span> <span class="st">"combined_data.zip"</span>)<span class="op">;</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="fu">saveCombinedData</span>()<span class="op">;</span></span></code></pre></div>
<p>This advanced example shows how FileSaver.js integrates with other libraries to handle more complex file types and data combinations. Remember to replace placeholder data with your actual data and install the necessary libraries.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-errors-and-solutions">Common errors and solutions</h3>
<ul>
<li><p><strong>“TypeError: Failed to execute ‘saveAs’ on ‘FileWriter’: parameter 1 is not of type ‘Blob’.”</strong> This error indicates that you’re not passing a <code>Blob</code> object as the first argument to <code>saveAs()</code>. Double-check that you’ve correctly created a <code>Blob</code> using the <code>Blob</code> constructor and that the variable you’re passing is indeed a <code>Blob</code> instance.</p></li>
<li><p><strong>File doesn’t download or opens incorrectly:</strong> This is often due to an incorrect MIME type specified in the <code>Blob</code> constructor. Ensure you use a MIME type that accurately represents the file’s content (e.g., <code>text/plain</code>, <code>application/json</code>, <code>image/png</code>, <code>application/pdf</code>). Inconsistencies between the file extension in the filename and the MIME type can also cause this issue.</p></li>
<li><p><strong>Browser doesn’t support FileSaver.js:</strong> While FileSaver.js has wide browser compatibility, extremely old or unsupported browsers might lack the necessary features. Test on your target browsers and consider providing graceful fallback mechanisms if necessary. FileSaver.js typically degrades gracefully for unsupported features.</p></li>
<li><p><strong>Security restrictions:</strong> In some cases, security policies in your browser or server might prevent file downloads. Check your browser’s security settings and ensure that the web server isn’t imposing restrictions.</p></li>
</ul>
<h3 id="debugging-tips">Debugging tips</h3>
<ul>
<li><p><strong>Check the browser’s console:</strong> Open your browser’s developer console (usually by pressing F12) to look for JavaScript errors or warnings. These can often pinpoint the source of problems with FileSaver.js.</p></li>
<li><p><strong>Inspect the <code>Blob</code> object:</strong> Use your browser’s developer tools to inspect the <code>Blob</code> object you’re passing to <code>saveAs()</code>. Verify that it contains the expected data and that its <code>type</code> property is correctly set.</p></li>
<li><p><strong>Simplify the code:</strong> If you’re dealing with a complex scenario, try simplifying your code to isolate the problem. Create a minimal example that demonstrates the issue to help pinpoint the cause.</p></li>
<li><p><strong>Test in different browsers:</strong> Test your code in multiple browsers (Chrome, Firefox, Edge, Safari) to see if the problem is browser-specific. This can help identify compatibility issues.</p></li>
</ul>
<h3 id="browser-specific-issues">Browser-specific issues</h3>
<p>Although FileSaver.js aims for cross-browser compatibility, minor inconsistencies might exist. Here are some potential browser-specific considerations:</p>
<ul>
<li><p><strong>Older browsers:</strong> Older browsers might have limitations in how they handle <code>Blob</code> objects or the file download process. FileSaver.js includes fallback mechanisms but may not fully support all features on older browsers.</p></li>
<li><p><strong>Security contexts:</strong> The browser’s security context (e.g., whether the script is running in a secure HTTPS context) can influence the success of the file download. Ensure your website is served via HTTPS if you’re encountering download issues.</p></li>
<li><p><strong>Extensions and add-ons:</strong> Browser extensions or add-ons can sometimes interfere with file downloads. Try disabling extensions to see if they are causing conflicts.</p></li>
</ul>
<p>If you encounter persistent issues that don’t align with the common errors listed above, please provide detailed information about your setup, code snippet, browser, and observed behavior to facilitate more effective troubleshooting. Consulting the FileSaver.js GitHub repository’s issues section might also reveal solutions to previously encountered problems.</p>
<h2 id="contributing">Contributing</h2>
<h3 id="reporting-bugs">Reporting bugs</h3>
<p>If you discover a bug in FileSaver.js, please report it on the project’s GitHub issue tracker. When reporting a bug, please provide the following information:</p>
<ul>
<li><strong>FileSaver.js version:</strong> Specify the version of FileSaver.js you’re using.</li>
<li><strong>Browser and version:</strong> Indicate the browser (Chrome, Firefox, Safari, Edge, etc.) and its version number.</li>
<li><strong>Operating system:</strong> State the operating system (Windows, macOS, Linux, etc.) you’re using.</li>
<li><strong>Steps to reproduce:</strong> Clearly describe the steps needed to reproduce the bug. Provide a minimal, reproducible example if possible.</li>
<li><strong>Expected behavior:</strong> Explain what you expected to happen.</li>
<li><strong>Actual behavior:</strong> Describe what actually happened.</li>
<li><strong>Error messages (if any):</strong> Include any error messages you encountered.</li>
<li><strong>Code snippet:</strong> Provide the relevant code snippet showing how you’re using FileSaver.js.</li>
</ul>
<p>Clear and concise bug reports greatly assist in identifying and resolving issues efficiently.</p>
<h3 id="suggesting-features">Suggesting features</h3>
<p>If you have an idea for a new feature or improvement to FileSaver.js, please suggest it on the GitHub issue tracker. When suggesting a feature, explain:</p>
<ul>
<li><strong>The problem:</strong> Describe the problem the feature aims to solve.</li>
<li><strong>Proposed solution:</strong> Detail your proposed solution and how it would address the problem.</li>
<li><strong>Benefits:</strong> Highlight the benefits of implementing the feature.</li>
<li><strong>Potential drawbacks:</strong> Discuss any potential drawbacks or challenges in implementing the feature.</li>
</ul>
<p>Well-reasoned feature suggestions increase the likelihood of your proposal being considered and potentially included in future releases.</p>
<h3 id="coding-style-guide">Coding style guide</h3>
<p>FileSaver.js follows a consistent coding style. If you contribute code, please adhere to the following guidelines:</p>
<ul>
<li><strong>Indentation:</strong> Use 2 spaces for indentation.</li>
<li><strong>Line length:</strong> Keep lines under 80 characters.</li>
<li><strong>Naming conventions:</strong> Use descriptive names for variables and functions. Follow camelCase for variable and function names.</li>
<li><strong>Comments:</strong> Add clear and concise comments to explain complex logic.</li>
<li><strong>Test coverage:</strong> Ensure that any new code is thoroughly tested.</li>
</ul>
<p>Consistency in coding style improves code readability and maintainability.</p>
<h3 id="testing-procedures">Testing procedures</h3>
<p>FileSaver.js uses a testing framework (likely Jest or similar). If you’re contributing code, you’re expected to write unit tests to ensure the functionality and correctness of your changes. The project’s <code>README</code> or <code>CONTRIBUTING</code> file usually contains detailed instructions on how to set up the development environment and run the tests. Before submitting a pull request, thoroughly test your code to verify that it works correctly and doesn’t introduce regressions. Testing is essential for maintaining the quality and stability of FileSaver.js. Adhering to existing testing practices will help integrate your changes seamlessly.</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>