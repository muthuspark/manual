{"title":"html2canvas - Documentation","markdown":{"yaml":{"title":"html2canvas - Documentation","description":"html2canvas is a JavaScript library that allows you to take screenshots of web pages or specific elements on a web page and render them as images.","date":"2025-02-09","categories":["JavaScript Libraries and Functions"]},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n### What is html2canvas?\n\nhtml2canvas is a JavaScript library that allows you to take \"screenshots\" of web pages or specific elements on a web page and render them as images on the client-side.  It achieves this by rendering the content directly within the browser, without needing server-side processing or external image generation services.  This makes it a powerful tool for creating dynamic image exports, generating thumbnails, or capturing web page content for offline use.  It works by emulating the browser's rendering engine to create a pixel-perfect representation of the content.\n\n\n### Key Features and Capabilities\n\n* **Client-Side Rendering:** All processing happens in the user's browser, eliminating the need for server-side calls.\n* **Element-Specific Capture:**  You can capture an entire page or a specific HTML element.\n* **Canvas Output:** The resulting image is a Canvas element, allowing easy manipulation and further processing using Canvas APIs.\n* **Image Download:**  The generated image can be easily downloaded or used as a data URL.\n* **Customization Options:** Offers various options to control the rendering process, such as specifying the image size, background color, and scaling.\n* **CSS Respect:**  Generally respects CSS styles applied to the elements being rendered. (However, some complex CSS may not be fully supported.)\n* **Foreign Object Support (SVG):**  Can render SVG elements, though certain complexities may lead to limitations.\n\n\n### Use Cases and Examples\n\n* **Generating thumbnails for web pages or articles.**\n* **Creating shareable images of website content on social media.**\n* **Capturing dynamic content for offline viewing.**\n* **Building web-based image editors.**\n* **Generating printable versions of web pages.**\n* **Creating client-side image previews.**\n\n\n### Browser Compatibility\n\nhtml2canvas strives for broad browser compatibility but may have limitations or rendering differences across various browsers and versions. While it aims to support modern and older browsers, the most reliable and consistent results are typically achieved in up-to-date versions of Chrome, Firefox, Safari, and Edge.  Refer to the project's official documentation and issue tracker for the most up-to-date compatibility information. Some very old or uncommon browsers may not be fully supported.\n\n\n### Installation and Setup\n\nhtml2canvas is typically installed via a package manager like npm or yarn.  For use in simple projects without a build process, you can include the library directly via a `<script>` tag.\n\n**Using npm or yarn:**\n\n```bash\nnpm install html2canvas\n# or\nyarn add html2canvas\n```\n\nThen, import it into your JavaScript code:\n\n```javascript\nimport html2canvas from 'html2canvas';\n```\n\n**Using a `<script>` tag (for simpler projects):**\n\nDownload the library from the official repository and include it in your HTML file:\n\n```html\n<script src=\"path/to/html2canvas.min.js\"></script>\n```\n\nAfter including the library, you can use the `html2canvas` function to capture elements:\n\n```javascript\nhtml2canvas(document.getElementById('myElement')).then(canvas => {\n  // canvas is the generated image as a canvas element\n  document.body.appendChild(canvas); // append to the page\n  // or download the image:\n  const imgData = canvas.toDataURL('image/png');\n  const link = document.createElement('a');\n  link.download = 'screenshot.png';\n  link.href = imgData;\n  link.click();\n});\n```\n\nRemember to replace `'myElement'` with the ID of the element you want to capture.  Consult the library's documentation for advanced usage and configuration options.\n\n\n## Basic Usage\n\n### Capturing a Single Element\n\nThe simplest way to use html2canvas is to capture a single HTML element. You'll need to obtain a reference to the element using its ID or a suitable selector, then pass this reference to the `html2canvas()` function.  The function returns a Promise that resolves with a Canvas object representing the rendered image.\n\n```javascript\nimport html2canvas from 'html2canvas';\n\nconst element = document.getElementById('myElement'); // Get the element to capture\n\nhtml2canvas(element).then(canvas => {\n  // 'canvas' is the generated canvas element.\n  document.body.appendChild(canvas); // Append the canvas to the body (optional)\n\n  // Convert the canvas to a data URL for further use (e.g., downloading):\n  const imgData = canvas.toDataURL('image/png');\n  console.log(imgData); // Output the data URL\n}).catch(error => {\n  console.error('Error capturing element:', error);\n});\n```\n\nReplace `\"myElement\"` with the actual ID of your element.\n\n\n### Capturing the Entire Page\n\nTo capture the entire visible portion of the page, you can pass `document.body` (or `document.documentElement` for slightly different results) to the `html2canvas()` function. Note that this will only capture what's currently visible in the viewport; elements hidden due to scrolling will be excluded.\n\n\n```javascript\nimport html2canvas from 'html2canvas';\n\nhtml2canvas(document.body).then(canvas => {\n  // Process the canvas as needed (e.g., append, download, etc.)\n  document.body.appendChild(canvas); // Append to body\n}).catch(error => {\n  console.error('Error capturing page:', error);\n});\n```\n\n\n### Understanding the `html2canvas()` Function\n\nThe core of the library is the `html2canvas()` function. It takes at least one argument:\n\n* **`element` (required):**  A DOM element (or a selector string that can be used to select a single element) representing the content to render.\n\nThe function returns a `Promise`.  The Promise resolves with a `Canvas` object containing the rendered image. If an error occurs during the rendering process, the Promise rejects and throws an error.  Error handling is crucial, as rendering complex pages or pages with problematic CSS can lead to failures.\n\n\n### Options and Parameters\n\nThe `html2canvas()` function accepts a second argument: an options object. This object allows you to fine-tune the rendering process. Some common options include:\n\n* **`width`:** Specify the width of the rendered canvas.\n* **`height`:** Specify the height of the rendered canvas.\n* **`scale`:**  Scaling factor applied to the rendered content (default is 1). Increasing the scale improves the resolution but increases rendering time.\n* **`backgroundColor`:** Sets the background color of the generated image.\n* **`logging`:** Enables detailed logging for debugging purposes.\n* **`useCORS`:** Enables Cross-Origin Resource Sharing (CORS) for images from different domains (essential if you're capturing images that aren't on the same origin).\n* **`allowTaint`:** By default, `html2canvas` will prevent rendering if it detects a potential taint (often due to cross-origin images). Setting `allowTaint` to `true` ignores this check but may result in issues if those images aren't properly handled. **Use with caution.**\n\n\nExample with options:\n\n```javascript\nhtml2canvas(element, {\n  scale: 2,\n  backgroundColor: '#fff',\n  logging: true,\n  useCORS: true\n}).then(canvas => {\n  // ...\n}).catch(error => {\n  // ...\n});\n```\n\n\n### Handling Promises and Asynchronous Operations\n\nThe `html2canvas()` function is asynchronous. It returns a Promise, which means the rendering process happens in the background.  You must use `.then()` to handle the successful resolution of the Promise (accessing the generated `canvas` object) and `.catch()` to handle potential errors.  Proper error handling is essential for a robust application, as rendering failures can occur due to various reasons (e.g., complex CSS, cross-origin issues, or network problems).  Always wrap your call to `html2canvas` within a `.then`/`.catch` block.\n\n\n## Advanced Usage\n\n### Customizing Canvas Rendering\n\nBeyond the basic options, you can further customize the rendering process using the Canvas API directly after obtaining the Canvas element from the `html2canvas` Promise. This allows for post-processing effects, adding text overlays, or modifying the generated image before downloading or using it.\n\n```javascript\nhtml2canvas(element).then(canvas => {\n  const ctx = canvas.getContext('2d');\n  // Example: Draw a red rectangle on the canvas\n  ctx.fillStyle = 'red';\n  ctx.fillRect(10, 10, 50, 50);\n\n  // Example: Get image data and manipulate pixels\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  // ... manipulate imageData.data ...\n  ctx.putImageData(imageData, 0, 0);\n\n  // ...further canvas manipulation...\n  const imgData = canvas.toDataURL('image/png');\n  // ...\n}).catch(error => {\n  // ...\n});\n```\n\n\n### Handling CSS and Styling\n\nhtml2canvas generally respects CSS styles applied to the elements. However, very complex or unusual CSS might not render perfectly.  Ensure that your CSS is well-formed and avoids overly complex selectors or properties that might confuse the rendering engine.  Consider simplifying stylesheets for better compatibility.  Use the browser's developer tools to inspect the rendered content and identify any discrepancies between the original and captured image.  Sometimes, using a higher `scale` value in the options can improve rendering accuracy for detailed or small elements.  Be mindful that `display: none` will completely hide an element, while `visibility: hidden` might render it as a blank space.\n\n\n### Working with Images and Backgrounds\n\nImages are a common source of issues with html2canvas.  Ensure that images are loaded before attempting to render the element containing them.  For images from a different origin, you'll almost certainly need to enable `useCORS: true` in the options.  Remember that images that aren't properly accessible (due to CORS restrictions or 404 errors) might prevent rendering entirely or cause artifacts. Background images are also rendered, but ensuring they're loaded is also crucial.  Consider using a placeholder image while the background image is loading to prevent rendering inconsistencies.\n\n\n### Using Proxy and iframe\n\nFor capturing pages or elements that are difficult to render due to complex CSS, JavaScript interactions, or cross-origin restrictions, you might consider using an iframe.  Load the content you want to capture into an iframe, then use `html2canvas` on the iframe's content. This can isolate the content from potential conflicts with the main page. A proxy might be needed for certain scenarios involving complex dynamic content or severe cross-origin issues. However,  using a proxy adds significant complexity and potential security concerns and should be a last resort.\n\n### Dealing with Complex Layouts\n\nComplex layouts, especially those heavily reliant on JavaScript frameworks (React, Angular, Vue, etc.), might require extra attention. Ensure that the JavaScript framework has fully rendered the content before calling `html2canvas`.  This often involves using timers, lifecycle hooks, or other mechanisms to ensure the DOM is stable.  Consider using `requestAnimationFrame` for best practices.  For very complex layouts, breaking the capture into smaller sections and combining them later might be more efficient.\n\n### Performance Optimization Techniques\n\nRendering large or complex pages can be slow. To optimize performance:\n\n* **Use a higher `scale` value:** A higher scale reduces the need for upscaling later, but increases the rendering time proportionally. Experiment to find a balance.\n* **Capture only necessary elements:** Avoid capturing unnecessary parts of the page.\n* **Reduce image sizes:** Large images significantly impact rendering time. Optimize images before using them.\n* **Simplify CSS:** Complex CSS can slow down rendering. Simplify your stylesheets wherever possible.\n* **Use `requestAnimationFrame`:** To avoid blocking the main thread, use `requestAnimationFrame` to schedule the `html2canvas` call.\n* **Consider using a lower resolution (smaller width/height):** If the final image resolution doesn't require high detail, rendering at a lower resolution will significantly speed up the process.\n\n\n### Troubleshooting and Debugging\n\nDebugging issues with html2canvas often involves using your browser's developer tools.  Check the console for errors or warnings.  The `logging: true` option can provide useful debugging information. Inspect the captured canvas to visually compare it to the original element.  If images aren't rendering correctly, check CORS settings and image loading states. If the layout is incorrect, check CSS and ensure your JavaScript framework has completed rendering before calling html2canvas.  If performance is a concern, profile your code to identify performance bottlenecks.  Consider using a simpler example to isolate problems before attempting to render very complex pages.  Refer to the official html2canvas documentation and issue tracker for help resolving specific problems.\n\n\n## Options and Configuration\n\n### Detailed Explanation of Each Option\n\nThe `html2canvas` function accepts an optional second argument: an object containing configuration options.  These options allow you to customize various aspects of the rendering process.  Here's a detailed explanation of some key options:\n\n\n* **`width` (Number):**  Specifies the width of the rendered canvas in pixels. If not provided, the width of the target element (or viewport for full-page captures) will be used.\n\n* **`height` (Number):** Specifies the height of the rendered canvas in pixels. If not provided, the height of the target element (or viewport) will be used.\n\n* **`scale` (Number, default: 1):**  A scaling factor applied to the rendered content.  A value of 2 will render at double the resolution. This improves the quality but increases rendering time significantly.\n\n* **`backgroundColor` (String, default: 'rgba(0,0,0,0)' - transparent):**  Sets the background color of the generated canvas.  Use CSS color values (e.g., '#fff', 'rgb(255,255,255)', 'white').\n\n* **`logging` (Boolean, default: false):**  Enables detailed logging to the console. Useful for debugging rendering issues.\n\n* **`useCORS` (Boolean, default: false):** Crucial for handling images from different domains (Cross-Origin Resource Sharing). Setting this to `true` allows html2canvas to attempt to render images from other origins.  However, this still relies on the server allowing CORS access.\n\n* **`allowTaint` (Boolean, default: false):** Controls the handling of \"tainted\" canvases. A canvas becomes tainted if it contains an image from a different origin without proper CORS headers.  Setting this to `true` will allow rendering even if a taint is detected, but may result in incomplete or incorrect rendering.  **Use with extreme caution.**  Generally, addressing the CORS issue is preferred over using `allowTaint`.\n\n* **`x` (Number, default: 0):**  The x-coordinate offset for the rendered content within the canvas. Useful for cropping or positioning.\n\n* **`y` (Number, default: 0):**  The y-coordinate offset for the rendered content within the canvas. Useful for cropping or positioning.\n\n* **`imageTimeout` (Number, default: 10000):** The maximum time (in milliseconds) to wait for images to load before rendering.\n\n* **`proxy` (String):**  A URL to a proxy server for handling cross-origin requests.  This should generally be avoided unless absolutely necessary and used with caution due to security implications.\n\n* **`removeContainer` (Boolean, default: false):** Removes the temporary container element used during the rendering process after capturing.\n\n\n### Using Custom Options and Settings\n\nTo use custom options, simply create an object containing the options you want to set and pass it as the second argument to `html2canvas()`.  Example:\n\n```javascript\nconst options = {\n  scale: 2,\n  backgroundColor: '#f0f0f0',\n  logging: true,\n  useCORS: true\n};\n\nhtml2canvas(document.getElementById('myElement'), options).then(canvas => {\n  // ...\n});\n```\n\nYou can combine multiple options as needed.\n\n\n### Option Combinations and Interactions\n\nSome options interact with each other. For instance, `scale` affects the size of the output canvas, while `width` and `height` can override the dimensions derived from the scaling.  `useCORS` and `allowTaint` handle cross-origin resources differently: `useCORS` attempts to properly handle CORS, while `allowTaint` bypasses CORS checks, often leading to incomplete or distorted results.  Carefully consider the interactions when combining options.  Testing is essential to ensure the desired outcome.\n\n\n### Default Values and Behavior\n\nIf options aren't explicitly provided, `html2canvas` uses default values.  These defaults are generally designed for typical use cases. The default `backgroundColor` is transparent (`rgba(0,0,0,0)`), and the default `scale` is 1. The default behavior is to render the entire visible area of the target element, respecting its CSS styles, within a canvas of the same size as the element.  Understanding the default behavior is essential when modifying options to customize the rendering process.  Be aware that the rendering engine's interpretation of complex CSS might differ slightly from the browser's rendering, leading to minor discrepancies in some cases.\n\n\n## API Reference\n\n### `html2canvas()` Function Details\n\nThe core of the library is the `html2canvas()` function.  Its signature is:\n\n```javascript\nhtml2canvas(element, options)\n```\n\n* **`element` (required):** This parameter specifies the DOM element (or a CSS selector string that resolves to a single element) to be rendered.  This can be any element on the page, including `document.body` to render the entire page (visible portion).  Invalid selectors or non-existent elements will lead to errors.\n\n* **`options` (optional):** This parameter is an object containing configuration options (detailed in the \"Options and Configuration\" section).  This allows customization of the rendering process (e.g., setting the scale, background color, handling CORS).\n\n\nThe function returns a `Promise`. This Promise resolves with a `Canvas` object if the rendering is successful.  The Promise rejects with an error if the rendering fails for any reason (e.g., missing images, CORS issues, invalid CSS).\n\n\n### Event Handling and Callbacks\n\n`html2canvas` is primarily asynchronous and uses Promises for handling asynchronous operations.  There are no direct event handling mechanisms or callbacks in the traditional sense.  Instead, you use the `.then()` method of the returned Promise to access the generated `Canvas` element after the rendering completes successfully.  The `.catch()` method handles any errors that occur during the rendering process.\n\nExample:\n\n```javascript\nhtml2canvas(element).then(canvas => {\n  // Success: 'canvas' is the generated Canvas element.\n  // Process the canvas (e.g., download, append to page)\n}).catch(error => {\n  // Error handling: 'error' contains information about the failure\n  console.error(\"html2canvas failed:\", error);\n});\n```\n\nThis approach is cleaner and more consistent with modern JavaScript asynchronous programming practices.\n\n\n### Error Handling and Reporting\n\nError handling is crucial when using `html2canvas`, as various factors can cause rendering failures (network issues, missing images, complex CSS, CORS problems, etc.). The `Promise.catch()` method is the primary mechanism for handling errors.  The `error` object passed to the `.catch()` callback typically contains information about the type of error and its source.  Check the console for detailed error messages during development, as these often provide clues to solve the issue.\n\nBest practice involves wrapping your `html2canvas` call within a `try...catch` block for more robust error management.  Consider adding user-friendly error messages to improve the user experience in production environments.\n\n\n### Return Values and Data Structures\n\nThe `html2canvas()` function returns a `Promise`. If successful, the Promise resolves to a single HTML5 `Canvas` element. This `Canvas` element contains the rendered image. You can access its properties (e.g., `width`, `height`) and methods (e.g., `toDataURL()`, `getContext()`) to manipulate or process the generated image further.  You can then use the `toDataURL()` method to get the image as a data URL (e.g., for downloading or embedding).\n\nIf the Promise rejects, the `catch()` handler receives an `Error` object. This object contains information about the error that occurred, often including a descriptive message to help identify the cause of the failure.\n\n\n## Examples and Tutorials\n\n### Simple Screenshot Example\n\nThis example captures a single element with the ID \"myElement\" and displays the resulting image on the page:\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n<title>html2canvas Example</title>\n<script src=\"https://html2canvas.hertzen.com/dist/html2canvas.min.js\"></script>\n<script>\n  document.addEventListener('DOMContentLoaded', function() {\n    const element = document.getElementById('myElement');\n    html2canvas(element).then(canvas => {\n      document.body.appendChild(canvas);\n    });\n  });\n</script>\n</head>\n<body>\n  <div id=\"myElement\" style=\"width: 200px; height: 100px; background-color: lightblue; border: 1px solid black;\">\n    This is my element!\n  </div>\n</body>\n</html>\n```\n\nRemember to replace `\"https://html2canvas.hertzen.com/dist/html2canvas.min.js\"` with the correct path if you've downloaded the library locally.  This example showcases the most basic usage.  It captures the element, and then appends the generated canvas to the body of the HTML document.\n\n\n### Advanced Screenshot with Customizations\n\nThis example demonstrates more advanced usage, including scaling, background color, and error handling:\n\n```javascript\nimport html2canvas from 'html2canvas';\n\nconst element = document.getElementById('myElement');\nconst options = {\n  scale: 2, // Double the resolution\n  backgroundColor: '#f0f0f0', // Light gray background\n  logging: true  //Enable logging for debugging\n};\n\nhtml2canvas(element, options).then(canvas => {\n  // Success: Canvas is ready\n  const imgData = canvas.toDataURL('image/png');\n  const link = document.createElement('a');\n  link.download = 'screenshot.png';\n  link.href = imgData;\n  link.click(); //Download the image\n\n}).catch(error => {\n  // Error handling\n  console.error('Screenshot failed:', error);\n  // Consider adding user-friendly error display here\n});\n```\n\nThis example demonstrates more advanced features, including scaling, background color, and error handling. The resulting image is then downloaded automatically.  Remember that you will need a suitable import mechanism for the `html2canvas` library if you're using a module bundler (like Webpack or Parcel).\n\n\n### Integrating with Other Libraries\n\nhtml2canvas can be integrated with various JavaScript libraries.  Here's a conceptual example of integrating it with a library that handles image uploads:\n\n\n```javascript\nimport html2canvas from 'html2canvas';\nimport imageUpload from './imageUploadLibrary'; // Placeholder for your upload library\n\nconst element = document.getElementById('myElement');\n\nhtml2canvas(element).then(canvas => {\n  const imgData = canvas.toDataURL('image/png');\n  imageUpload(imgData, 'screenshot.png'); //Use your upload library\n}).catch(error => {\n  console.error('Error:', error);\n});\n\n```\n\nThis is a general structure.  The specifics will heavily depend on the functionalities and API of your chosen image upload library. Ensure you adapt this example to the library's specific methods and requirements.\n\n\n### Real-world Application Examples\n\n* **Web-based Screenshot Tools:** Create a web application that allows users to capture screenshots of web pages or specific elements.\n\n* **Social Media Sharing:** Generate shareable images of product details or website content for social media platforms.\n\n* **Dynamic Thumbnail Generation:** Create dynamic thumbnails for articles or web pages, providing previews without server-side processing.\n\n* **Client-Side Image Editing:** Use the generated canvas as a base for client-side image editing functionalities.\n\n* **Printable Web Pages:** Offer printable versions of web pages by capturing the relevant content and generating a suitable image.\n\n* **Report Generation:** Dynamically generate reports by capturing sections of web pages as images and including them in the report document.\n\nThese examples provide a starting point.  The possibilities are numerous, leveraging html2canvas's capability for client-side image generation.  Remember to always handle errors gracefully and optimize for performance, especially with complex or large pages.\n\n\n## Troubleshooting\n\n### Common Errors and Solutions\n\nHere are some common errors encountered when using html2canvas and their potential solutions:\n\n* **\"Uncaught (in promise) Error: Rendering failed\":** This generic error often indicates a problem during the rendering process.  Check the browser's developer console for more specific error messages. Common causes include:\n    * **CORS issues:**  If the page contains images from a different domain, ensure that the server hosting those images allows CORS.  Set the `useCORS: true` option in html2canvas.\n    * **Missing images:** Verify that all images referenced on the page are correctly loaded before calling `html2canvas`.\n    * **Complex CSS:**  Simplify complex CSS or use a higher `scale` value to improve rendering accuracy.\n    * **JavaScript errors:**  Fix any JavaScript errors on the page that might interfere with rendering.\n    * **Timeout:** If images take too long to load, increase `imageTimeout` in the options.\n\n\n* **Blank or incomplete screenshots:** This usually indicates a problem with image loading, CORS, or CSS.  Check the browser's developer console for errors.  Examine the HTML structure to ensure all elements are visible and correctly rendered.\n\n* **Incorrect layout or distorted elements:** This might be due to complex CSS, especially issues with `transform`, `opacity`, or other CSS properties that might not be fully supported by html2canvas.  Simplify your CSS if possible.\n\n\n* **Performance Issues:**  Rendering large or complex pages can be slow.  See the \"Performance Issues and Optimization\" section below for solutions.\n\n* **Canvas is empty after rendering:** Verify that you are correctly selecting the element to capture and that the Promise is resolving correctly.  Double check your `.then()` block is executing correctly.\n\n\n### Debugging Techniques\n\n* **Browser Developer Tools:** Use your browser's developer tools (usually accessed by pressing F12) to inspect the page, check for JavaScript errors in the console, and examine the network requests to ensure images are loading properly.\n\n* **`logging: true` Option:**  Set the `logging` option to `true` in the html2canvas configuration to enable detailed logging to the console.  This provides insights into the rendering process and may reveal the source of errors.\n\n* **Simplify the target element:**  If you are capturing a complex page, try capturing a smaller, simpler element first to isolate potential issues.\n\n* **Inspect the Canvas:** After the rendering is complete (in the `.then()` block), use the browser's developer tools to inspect the generated Canvas element directly. This allows you to visually verify the content and look for any rendering discrepancies.\n\n* **Check CORS Headers:** Use your browser's developer tools' network tab to examine the network requests made by `html2canvas`, especially for images, to ensure the server is sending the correct CORS headers if necessary.\n\n\n### Performance Issues and Optimization\n\nRendering large or complex pages can be time-consuming.  Use these strategies to improve performance:\n\n* **Reduce the scale:** Lowering the `scale` value reduces rendering resolution, speeding up the process but decreasing image quality.  Find a good balance.\n\n* **Capture smaller sections:** Instead of capturing the whole page, try capturing smaller sections separately and combining them afterward using the Canvas API.\n\n* **Optimize images:** Compress images to reduce their file size and improve loading times. Use appropriately sized images for your needs.\n\n* **Simplify CSS:** Complex CSS can slow down rendering. Try to simplify your CSS rules and avoid overly complex selectors or properties.\n\n* **Use requestAnimationFrame:** Consider using `requestAnimationFrame` to schedule the `html2canvas` call to avoid blocking the main thread.\n\n* **Asynchronous Loading:** Ensure all images and resources are fully loaded before calling `html2canvas`.  You might need to wait for events or use Promises to ensure everything is ready.\n\n* **Reduce unnecessary content:**  Remove any unnecessary elements from the target area before capturing it.\n\n\n\n### Cross-Browser Compatibility Issues\n\nWhile html2canvas strives for broad compatibility, minor rendering differences might exist across browsers.  Always test your implementation thoroughly in the target browsers.  Some less common or very old browsers might not be fully supported.  Be aware that different browsers handle CSS differently; some subtle rendering discrepancies might be inevitable.  Focus on ensuring your CSS works well across the most common browser platforms.  If compatibility across a particularly wide range of browsers is critical, detailed testing across the targeted browser versions is crucial.  Use a testing framework to ensure consistency across different browsers and browser versions.\n\n\n## Contributing\n\n### Development Setup\n\nTo contribute to html2canvas, you'll need to clone the repository and set up a development environment.  These instructions assume a basic familiarity with Git and Node.js.\n\n1. **Clone the repository:**\n\n```bash\ngit clone https://github.com/niklasvh/html2canvas.git\ncd html2canvas\n```\n\n2. **Install dependencies:**\n\n```bash\nnpm install\n```\n\nThis will install all the necessary packages for building and testing the library.\n\n3. **Build the library:**\n\n```bash\nnpm run build\n```\n\nThis will create a minified version of the library in the `dist` directory.\n\n\n### Testing and Code Style\n\nhtml2canvas uses a comprehensive test suite.  Before submitting any pull requests, ensure your changes pass all existing tests and adhere to the project's coding style.\n\n* **Running tests:**\n\n```bash\nnpm test\n```\n\n* **Code Style:** The project follows a consistent coding style.  Use a code formatter (like Prettier) to ensure your code conforms to the style guide. You can typically run the formatter with a command like `npm run format` (or a similar command specified in the project's documentation).\n\n* **Test Coverage:**  Strive to maintain high test coverage for any new features or bug fixes you introduce.  Use the testing framework's tools (likely Jest) to check coverage.  This ensures that your changes don't introduce regressions.\n\n\n### Submitting Pull Requests\n\n1. **Fork the repository:** Create a fork of the html2canvas repository on GitHub.\n\n2. **Create a branch:** Create a new branch for your changes.  Use descriptive branch names (e.g., `fix/bug-123` or `feat/new-feature`).\n\n3. **Make your changes:** Implement your changes, ensuring they pass all tests and adhere to the coding style.\n\n4. **Commit your changes:** Commit your changes with clear and concise commit messages. Follow a conventional commit message format (e.g., `fix: Resolve issue #123`, `feat: Add new feature`).\n\n5. **Push your branch:** Push your branch to your forked repository on GitHub.\n\n6. **Create a pull request:** Create a pull request from your branch to the main branch of the original html2canvas repository.  Provide a clear description of your changes and address any comments or feedback from reviewers.\n\n\n### Community Guidelines\n\n* **Be respectful:** Treat all contributors and maintainers with respect.  Constructive criticism is welcome, but personal attacks are not.\n\n* **Follow the code of conduct:** Adhere to the project's code of conduct (if one exists).\n\n* **Write clear and concise commit messages:**  Make it easy for others to understand your changes.\n\n* **Provide clear and detailed descriptions for pull requests:** Explain the purpose and scope of your changes.\n\n* **Be patient:**  The review process can take time.  Be patient and responsive to feedback.\n\n* **Test your changes thoroughly:** Ensure your changes work correctly and don't introduce regressions.\n\nBy following these guidelines, you can contribute to the improvement and maintenance of the html2canvas library.  Your contributions are valuable to the community!\n\n","srcMarkdownNoYaml":"\n## Introduction\n\n### What is html2canvas?\n\nhtml2canvas is a JavaScript library that allows you to take \"screenshots\" of web pages or specific elements on a web page and render them as images on the client-side.  It achieves this by rendering the content directly within the browser, without needing server-side processing or external image generation services.  This makes it a powerful tool for creating dynamic image exports, generating thumbnails, or capturing web page content for offline use.  It works by emulating the browser's rendering engine to create a pixel-perfect representation of the content.\n\n\n### Key Features and Capabilities\n\n* **Client-Side Rendering:** All processing happens in the user's browser, eliminating the need for server-side calls.\n* **Element-Specific Capture:**  You can capture an entire page or a specific HTML element.\n* **Canvas Output:** The resulting image is a Canvas element, allowing easy manipulation and further processing using Canvas APIs.\n* **Image Download:**  The generated image can be easily downloaded or used as a data URL.\n* **Customization Options:** Offers various options to control the rendering process, such as specifying the image size, background color, and scaling.\n* **CSS Respect:**  Generally respects CSS styles applied to the elements being rendered. (However, some complex CSS may not be fully supported.)\n* **Foreign Object Support (SVG):**  Can render SVG elements, though certain complexities may lead to limitations.\n\n\n### Use Cases and Examples\n\n* **Generating thumbnails for web pages or articles.**\n* **Creating shareable images of website content on social media.**\n* **Capturing dynamic content for offline viewing.**\n* **Building web-based image editors.**\n* **Generating printable versions of web pages.**\n* **Creating client-side image previews.**\n\n\n### Browser Compatibility\n\nhtml2canvas strives for broad browser compatibility but may have limitations or rendering differences across various browsers and versions. While it aims to support modern and older browsers, the most reliable and consistent results are typically achieved in up-to-date versions of Chrome, Firefox, Safari, and Edge.  Refer to the project's official documentation and issue tracker for the most up-to-date compatibility information. Some very old or uncommon browsers may not be fully supported.\n\n\n### Installation and Setup\n\nhtml2canvas is typically installed via a package manager like npm or yarn.  For use in simple projects without a build process, you can include the library directly via a `<script>` tag.\n\n**Using npm or yarn:**\n\n```bash\nnpm install html2canvas\n# or\nyarn add html2canvas\n```\n\nThen, import it into your JavaScript code:\n\n```javascript\nimport html2canvas from 'html2canvas';\n```\n\n**Using a `<script>` tag (for simpler projects):**\n\nDownload the library from the official repository and include it in your HTML file:\n\n```html\n<script src=\"path/to/html2canvas.min.js\"></script>\n```\n\nAfter including the library, you can use the `html2canvas` function to capture elements:\n\n```javascript\nhtml2canvas(document.getElementById('myElement')).then(canvas => {\n  // canvas is the generated image as a canvas element\n  document.body.appendChild(canvas); // append to the page\n  // or download the image:\n  const imgData = canvas.toDataURL('image/png');\n  const link = document.createElement('a');\n  link.download = 'screenshot.png';\n  link.href = imgData;\n  link.click();\n});\n```\n\nRemember to replace `'myElement'` with the ID of the element you want to capture.  Consult the library's documentation for advanced usage and configuration options.\n\n\n## Basic Usage\n\n### Capturing a Single Element\n\nThe simplest way to use html2canvas is to capture a single HTML element. You'll need to obtain a reference to the element using its ID or a suitable selector, then pass this reference to the `html2canvas()` function.  The function returns a Promise that resolves with a Canvas object representing the rendered image.\n\n```javascript\nimport html2canvas from 'html2canvas';\n\nconst element = document.getElementById('myElement'); // Get the element to capture\n\nhtml2canvas(element).then(canvas => {\n  // 'canvas' is the generated canvas element.\n  document.body.appendChild(canvas); // Append the canvas to the body (optional)\n\n  // Convert the canvas to a data URL for further use (e.g., downloading):\n  const imgData = canvas.toDataURL('image/png');\n  console.log(imgData); // Output the data URL\n}).catch(error => {\n  console.error('Error capturing element:', error);\n});\n```\n\nReplace `\"myElement\"` with the actual ID of your element.\n\n\n### Capturing the Entire Page\n\nTo capture the entire visible portion of the page, you can pass `document.body` (or `document.documentElement` for slightly different results) to the `html2canvas()` function. Note that this will only capture what's currently visible in the viewport; elements hidden due to scrolling will be excluded.\n\n\n```javascript\nimport html2canvas from 'html2canvas';\n\nhtml2canvas(document.body).then(canvas => {\n  // Process the canvas as needed (e.g., append, download, etc.)\n  document.body.appendChild(canvas); // Append to body\n}).catch(error => {\n  console.error('Error capturing page:', error);\n});\n```\n\n\n### Understanding the `html2canvas()` Function\n\nThe core of the library is the `html2canvas()` function. It takes at least one argument:\n\n* **`element` (required):**  A DOM element (or a selector string that can be used to select a single element) representing the content to render.\n\nThe function returns a `Promise`.  The Promise resolves with a `Canvas` object containing the rendered image. If an error occurs during the rendering process, the Promise rejects and throws an error.  Error handling is crucial, as rendering complex pages or pages with problematic CSS can lead to failures.\n\n\n### Options and Parameters\n\nThe `html2canvas()` function accepts a second argument: an options object. This object allows you to fine-tune the rendering process. Some common options include:\n\n* **`width`:** Specify the width of the rendered canvas.\n* **`height`:** Specify the height of the rendered canvas.\n* **`scale`:**  Scaling factor applied to the rendered content (default is 1). Increasing the scale improves the resolution but increases rendering time.\n* **`backgroundColor`:** Sets the background color of the generated image.\n* **`logging`:** Enables detailed logging for debugging purposes.\n* **`useCORS`:** Enables Cross-Origin Resource Sharing (CORS) for images from different domains (essential if you're capturing images that aren't on the same origin).\n* **`allowTaint`:** By default, `html2canvas` will prevent rendering if it detects a potential taint (often due to cross-origin images). Setting `allowTaint` to `true` ignores this check but may result in issues if those images aren't properly handled. **Use with caution.**\n\n\nExample with options:\n\n```javascript\nhtml2canvas(element, {\n  scale: 2,\n  backgroundColor: '#fff',\n  logging: true,\n  useCORS: true\n}).then(canvas => {\n  // ...\n}).catch(error => {\n  // ...\n});\n```\n\n\n### Handling Promises and Asynchronous Operations\n\nThe `html2canvas()` function is asynchronous. It returns a Promise, which means the rendering process happens in the background.  You must use `.then()` to handle the successful resolution of the Promise (accessing the generated `canvas` object) and `.catch()` to handle potential errors.  Proper error handling is essential for a robust application, as rendering failures can occur due to various reasons (e.g., complex CSS, cross-origin issues, or network problems).  Always wrap your call to `html2canvas` within a `.then`/`.catch` block.\n\n\n## Advanced Usage\n\n### Customizing Canvas Rendering\n\nBeyond the basic options, you can further customize the rendering process using the Canvas API directly after obtaining the Canvas element from the `html2canvas` Promise. This allows for post-processing effects, adding text overlays, or modifying the generated image before downloading or using it.\n\n```javascript\nhtml2canvas(element).then(canvas => {\n  const ctx = canvas.getContext('2d');\n  // Example: Draw a red rectangle on the canvas\n  ctx.fillStyle = 'red';\n  ctx.fillRect(10, 10, 50, 50);\n\n  // Example: Get image data and manipulate pixels\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  // ... manipulate imageData.data ...\n  ctx.putImageData(imageData, 0, 0);\n\n  // ...further canvas manipulation...\n  const imgData = canvas.toDataURL('image/png');\n  // ...\n}).catch(error => {\n  // ...\n});\n```\n\n\n### Handling CSS and Styling\n\nhtml2canvas generally respects CSS styles applied to the elements. However, very complex or unusual CSS might not render perfectly.  Ensure that your CSS is well-formed and avoids overly complex selectors or properties that might confuse the rendering engine.  Consider simplifying stylesheets for better compatibility.  Use the browser's developer tools to inspect the rendered content and identify any discrepancies between the original and captured image.  Sometimes, using a higher `scale` value in the options can improve rendering accuracy for detailed or small elements.  Be mindful that `display: none` will completely hide an element, while `visibility: hidden` might render it as a blank space.\n\n\n### Working with Images and Backgrounds\n\nImages are a common source of issues with html2canvas.  Ensure that images are loaded before attempting to render the element containing them.  For images from a different origin, you'll almost certainly need to enable `useCORS: true` in the options.  Remember that images that aren't properly accessible (due to CORS restrictions or 404 errors) might prevent rendering entirely or cause artifacts. Background images are also rendered, but ensuring they're loaded is also crucial.  Consider using a placeholder image while the background image is loading to prevent rendering inconsistencies.\n\n\n### Using Proxy and iframe\n\nFor capturing pages or elements that are difficult to render due to complex CSS, JavaScript interactions, or cross-origin restrictions, you might consider using an iframe.  Load the content you want to capture into an iframe, then use `html2canvas` on the iframe's content. This can isolate the content from potential conflicts with the main page. A proxy might be needed for certain scenarios involving complex dynamic content or severe cross-origin issues. However,  using a proxy adds significant complexity and potential security concerns and should be a last resort.\n\n### Dealing with Complex Layouts\n\nComplex layouts, especially those heavily reliant on JavaScript frameworks (React, Angular, Vue, etc.), might require extra attention. Ensure that the JavaScript framework has fully rendered the content before calling `html2canvas`.  This often involves using timers, lifecycle hooks, or other mechanisms to ensure the DOM is stable.  Consider using `requestAnimationFrame` for best practices.  For very complex layouts, breaking the capture into smaller sections and combining them later might be more efficient.\n\n### Performance Optimization Techniques\n\nRendering large or complex pages can be slow. To optimize performance:\n\n* **Use a higher `scale` value:** A higher scale reduces the need for upscaling later, but increases the rendering time proportionally. Experiment to find a balance.\n* **Capture only necessary elements:** Avoid capturing unnecessary parts of the page.\n* **Reduce image sizes:** Large images significantly impact rendering time. Optimize images before using them.\n* **Simplify CSS:** Complex CSS can slow down rendering. Simplify your stylesheets wherever possible.\n* **Use `requestAnimationFrame`:** To avoid blocking the main thread, use `requestAnimationFrame` to schedule the `html2canvas` call.\n* **Consider using a lower resolution (smaller width/height):** If the final image resolution doesn't require high detail, rendering at a lower resolution will significantly speed up the process.\n\n\n### Troubleshooting and Debugging\n\nDebugging issues with html2canvas often involves using your browser's developer tools.  Check the console for errors or warnings.  The `logging: true` option can provide useful debugging information. Inspect the captured canvas to visually compare it to the original element.  If images aren't rendering correctly, check CORS settings and image loading states. If the layout is incorrect, check CSS and ensure your JavaScript framework has completed rendering before calling html2canvas.  If performance is a concern, profile your code to identify performance bottlenecks.  Consider using a simpler example to isolate problems before attempting to render very complex pages.  Refer to the official html2canvas documentation and issue tracker for help resolving specific problems.\n\n\n## Options and Configuration\n\n### Detailed Explanation of Each Option\n\nThe `html2canvas` function accepts an optional second argument: an object containing configuration options.  These options allow you to customize various aspects of the rendering process.  Here's a detailed explanation of some key options:\n\n\n* **`width` (Number):**  Specifies the width of the rendered canvas in pixels. If not provided, the width of the target element (or viewport for full-page captures) will be used.\n\n* **`height` (Number):** Specifies the height of the rendered canvas in pixels. If not provided, the height of the target element (or viewport) will be used.\n\n* **`scale` (Number, default: 1):**  A scaling factor applied to the rendered content.  A value of 2 will render at double the resolution. This improves the quality but increases rendering time significantly.\n\n* **`backgroundColor` (String, default: 'rgba(0,0,0,0)' - transparent):**  Sets the background color of the generated canvas.  Use CSS color values (e.g., '#fff', 'rgb(255,255,255)', 'white').\n\n* **`logging` (Boolean, default: false):**  Enables detailed logging to the console. Useful for debugging rendering issues.\n\n* **`useCORS` (Boolean, default: false):** Crucial for handling images from different domains (Cross-Origin Resource Sharing). Setting this to `true` allows html2canvas to attempt to render images from other origins.  However, this still relies on the server allowing CORS access.\n\n* **`allowTaint` (Boolean, default: false):** Controls the handling of \"tainted\" canvases. A canvas becomes tainted if it contains an image from a different origin without proper CORS headers.  Setting this to `true` will allow rendering even if a taint is detected, but may result in incomplete or incorrect rendering.  **Use with extreme caution.**  Generally, addressing the CORS issue is preferred over using `allowTaint`.\n\n* **`x` (Number, default: 0):**  The x-coordinate offset for the rendered content within the canvas. Useful for cropping or positioning.\n\n* **`y` (Number, default: 0):**  The y-coordinate offset for the rendered content within the canvas. Useful for cropping or positioning.\n\n* **`imageTimeout` (Number, default: 10000):** The maximum time (in milliseconds) to wait for images to load before rendering.\n\n* **`proxy` (String):**  A URL to a proxy server for handling cross-origin requests.  This should generally be avoided unless absolutely necessary and used with caution due to security implications.\n\n* **`removeContainer` (Boolean, default: false):** Removes the temporary container element used during the rendering process after capturing.\n\n\n### Using Custom Options and Settings\n\nTo use custom options, simply create an object containing the options you want to set and pass it as the second argument to `html2canvas()`.  Example:\n\n```javascript\nconst options = {\n  scale: 2,\n  backgroundColor: '#f0f0f0',\n  logging: true,\n  useCORS: true\n};\n\nhtml2canvas(document.getElementById('myElement'), options).then(canvas => {\n  // ...\n});\n```\n\nYou can combine multiple options as needed.\n\n\n### Option Combinations and Interactions\n\nSome options interact with each other. For instance, `scale` affects the size of the output canvas, while `width` and `height` can override the dimensions derived from the scaling.  `useCORS` and `allowTaint` handle cross-origin resources differently: `useCORS` attempts to properly handle CORS, while `allowTaint` bypasses CORS checks, often leading to incomplete or distorted results.  Carefully consider the interactions when combining options.  Testing is essential to ensure the desired outcome.\n\n\n### Default Values and Behavior\n\nIf options aren't explicitly provided, `html2canvas` uses default values.  These defaults are generally designed for typical use cases. The default `backgroundColor` is transparent (`rgba(0,0,0,0)`), and the default `scale` is 1. The default behavior is to render the entire visible area of the target element, respecting its CSS styles, within a canvas of the same size as the element.  Understanding the default behavior is essential when modifying options to customize the rendering process.  Be aware that the rendering engine's interpretation of complex CSS might differ slightly from the browser's rendering, leading to minor discrepancies in some cases.\n\n\n## API Reference\n\n### `html2canvas()` Function Details\n\nThe core of the library is the `html2canvas()` function.  Its signature is:\n\n```javascript\nhtml2canvas(element, options)\n```\n\n* **`element` (required):** This parameter specifies the DOM element (or a CSS selector string that resolves to a single element) to be rendered.  This can be any element on the page, including `document.body` to render the entire page (visible portion).  Invalid selectors or non-existent elements will lead to errors.\n\n* **`options` (optional):** This parameter is an object containing configuration options (detailed in the \"Options and Configuration\" section).  This allows customization of the rendering process (e.g., setting the scale, background color, handling CORS).\n\n\nThe function returns a `Promise`. This Promise resolves with a `Canvas` object if the rendering is successful.  The Promise rejects with an error if the rendering fails for any reason (e.g., missing images, CORS issues, invalid CSS).\n\n\n### Event Handling and Callbacks\n\n`html2canvas` is primarily asynchronous and uses Promises for handling asynchronous operations.  There are no direct event handling mechanisms or callbacks in the traditional sense.  Instead, you use the `.then()` method of the returned Promise to access the generated `Canvas` element after the rendering completes successfully.  The `.catch()` method handles any errors that occur during the rendering process.\n\nExample:\n\n```javascript\nhtml2canvas(element).then(canvas => {\n  // Success: 'canvas' is the generated Canvas element.\n  // Process the canvas (e.g., download, append to page)\n}).catch(error => {\n  // Error handling: 'error' contains information about the failure\n  console.error(\"html2canvas failed:\", error);\n});\n```\n\nThis approach is cleaner and more consistent with modern JavaScript asynchronous programming practices.\n\n\n### Error Handling and Reporting\n\nError handling is crucial when using `html2canvas`, as various factors can cause rendering failures (network issues, missing images, complex CSS, CORS problems, etc.). The `Promise.catch()` method is the primary mechanism for handling errors.  The `error` object passed to the `.catch()` callback typically contains information about the type of error and its source.  Check the console for detailed error messages during development, as these often provide clues to solve the issue.\n\nBest practice involves wrapping your `html2canvas` call within a `try...catch` block for more robust error management.  Consider adding user-friendly error messages to improve the user experience in production environments.\n\n\n### Return Values and Data Structures\n\nThe `html2canvas()` function returns a `Promise`. If successful, the Promise resolves to a single HTML5 `Canvas` element. This `Canvas` element contains the rendered image. You can access its properties (e.g., `width`, `height`) and methods (e.g., `toDataURL()`, `getContext()`) to manipulate or process the generated image further.  You can then use the `toDataURL()` method to get the image as a data URL (e.g., for downloading or embedding).\n\nIf the Promise rejects, the `catch()` handler receives an `Error` object. This object contains information about the error that occurred, often including a descriptive message to help identify the cause of the failure.\n\n\n## Examples and Tutorials\n\n### Simple Screenshot Example\n\nThis example captures a single element with the ID \"myElement\" and displays the resulting image on the page:\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n<title>html2canvas Example</title>\n<script src=\"https://html2canvas.hertzen.com/dist/html2canvas.min.js\"></script>\n<script>\n  document.addEventListener('DOMContentLoaded', function() {\n    const element = document.getElementById('myElement');\n    html2canvas(element).then(canvas => {\n      document.body.appendChild(canvas);\n    });\n  });\n</script>\n</head>\n<body>\n  <div id=\"myElement\" style=\"width: 200px; height: 100px; background-color: lightblue; border: 1px solid black;\">\n    This is my element!\n  </div>\n</body>\n</html>\n```\n\nRemember to replace `\"https://html2canvas.hertzen.com/dist/html2canvas.min.js\"` with the correct path if you've downloaded the library locally.  This example showcases the most basic usage.  It captures the element, and then appends the generated canvas to the body of the HTML document.\n\n\n### Advanced Screenshot with Customizations\n\nThis example demonstrates more advanced usage, including scaling, background color, and error handling:\n\n```javascript\nimport html2canvas from 'html2canvas';\n\nconst element = document.getElementById('myElement');\nconst options = {\n  scale: 2, // Double the resolution\n  backgroundColor: '#f0f0f0', // Light gray background\n  logging: true  //Enable logging for debugging\n};\n\nhtml2canvas(element, options).then(canvas => {\n  // Success: Canvas is ready\n  const imgData = canvas.toDataURL('image/png');\n  const link = document.createElement('a');\n  link.download = 'screenshot.png';\n  link.href = imgData;\n  link.click(); //Download the image\n\n}).catch(error => {\n  // Error handling\n  console.error('Screenshot failed:', error);\n  // Consider adding user-friendly error display here\n});\n```\n\nThis example demonstrates more advanced features, including scaling, background color, and error handling. The resulting image is then downloaded automatically.  Remember that you will need a suitable import mechanism for the `html2canvas` library if you're using a module bundler (like Webpack or Parcel).\n\n\n### Integrating with Other Libraries\n\nhtml2canvas can be integrated with various JavaScript libraries.  Here's a conceptual example of integrating it with a library that handles image uploads:\n\n\n```javascript\nimport html2canvas from 'html2canvas';\nimport imageUpload from './imageUploadLibrary'; // Placeholder for your upload library\n\nconst element = document.getElementById('myElement');\n\nhtml2canvas(element).then(canvas => {\n  const imgData = canvas.toDataURL('image/png');\n  imageUpload(imgData, 'screenshot.png'); //Use your upload library\n}).catch(error => {\n  console.error('Error:', error);\n});\n\n```\n\nThis is a general structure.  The specifics will heavily depend on the functionalities and API of your chosen image upload library. Ensure you adapt this example to the library's specific methods and requirements.\n\n\n### Real-world Application Examples\n\n* **Web-based Screenshot Tools:** Create a web application that allows users to capture screenshots of web pages or specific elements.\n\n* **Social Media Sharing:** Generate shareable images of product details or website content for social media platforms.\n\n* **Dynamic Thumbnail Generation:** Create dynamic thumbnails for articles or web pages, providing previews without server-side processing.\n\n* **Client-Side Image Editing:** Use the generated canvas as a base for client-side image editing functionalities.\n\n* **Printable Web Pages:** Offer printable versions of web pages by capturing the relevant content and generating a suitable image.\n\n* **Report Generation:** Dynamically generate reports by capturing sections of web pages as images and including them in the report document.\n\nThese examples provide a starting point.  The possibilities are numerous, leveraging html2canvas's capability for client-side image generation.  Remember to always handle errors gracefully and optimize for performance, especially with complex or large pages.\n\n\n## Troubleshooting\n\n### Common Errors and Solutions\n\nHere are some common errors encountered when using html2canvas and their potential solutions:\n\n* **\"Uncaught (in promise) Error: Rendering failed\":** This generic error often indicates a problem during the rendering process.  Check the browser's developer console for more specific error messages. Common causes include:\n    * **CORS issues:**  If the page contains images from a different domain, ensure that the server hosting those images allows CORS.  Set the `useCORS: true` option in html2canvas.\n    * **Missing images:** Verify that all images referenced on the page are correctly loaded before calling `html2canvas`.\n    * **Complex CSS:**  Simplify complex CSS or use a higher `scale` value to improve rendering accuracy.\n    * **JavaScript errors:**  Fix any JavaScript errors on the page that might interfere with rendering.\n    * **Timeout:** If images take too long to load, increase `imageTimeout` in the options.\n\n\n* **Blank or incomplete screenshots:** This usually indicates a problem with image loading, CORS, or CSS.  Check the browser's developer console for errors.  Examine the HTML structure to ensure all elements are visible and correctly rendered.\n\n* **Incorrect layout or distorted elements:** This might be due to complex CSS, especially issues with `transform`, `opacity`, or other CSS properties that might not be fully supported by html2canvas.  Simplify your CSS if possible.\n\n\n* **Performance Issues:**  Rendering large or complex pages can be slow.  See the \"Performance Issues and Optimization\" section below for solutions.\n\n* **Canvas is empty after rendering:** Verify that you are correctly selecting the element to capture and that the Promise is resolving correctly.  Double check your `.then()` block is executing correctly.\n\n\n### Debugging Techniques\n\n* **Browser Developer Tools:** Use your browser's developer tools (usually accessed by pressing F12) to inspect the page, check for JavaScript errors in the console, and examine the network requests to ensure images are loading properly.\n\n* **`logging: true` Option:**  Set the `logging` option to `true` in the html2canvas configuration to enable detailed logging to the console.  This provides insights into the rendering process and may reveal the source of errors.\n\n* **Simplify the target element:**  If you are capturing a complex page, try capturing a smaller, simpler element first to isolate potential issues.\n\n* **Inspect the Canvas:** After the rendering is complete (in the `.then()` block), use the browser's developer tools to inspect the generated Canvas element directly. This allows you to visually verify the content and look for any rendering discrepancies.\n\n* **Check CORS Headers:** Use your browser's developer tools' network tab to examine the network requests made by `html2canvas`, especially for images, to ensure the server is sending the correct CORS headers if necessary.\n\n\n### Performance Issues and Optimization\n\nRendering large or complex pages can be time-consuming.  Use these strategies to improve performance:\n\n* **Reduce the scale:** Lowering the `scale` value reduces rendering resolution, speeding up the process but decreasing image quality.  Find a good balance.\n\n* **Capture smaller sections:** Instead of capturing the whole page, try capturing smaller sections separately and combining them afterward using the Canvas API.\n\n* **Optimize images:** Compress images to reduce their file size and improve loading times. Use appropriately sized images for your needs.\n\n* **Simplify CSS:** Complex CSS can slow down rendering. Try to simplify your CSS rules and avoid overly complex selectors or properties.\n\n* **Use requestAnimationFrame:** Consider using `requestAnimationFrame` to schedule the `html2canvas` call to avoid blocking the main thread.\n\n* **Asynchronous Loading:** Ensure all images and resources are fully loaded before calling `html2canvas`.  You might need to wait for events or use Promises to ensure everything is ready.\n\n* **Reduce unnecessary content:**  Remove any unnecessary elements from the target area before capturing it.\n\n\n\n### Cross-Browser Compatibility Issues\n\nWhile html2canvas strives for broad compatibility, minor rendering differences might exist across browsers.  Always test your implementation thoroughly in the target browsers.  Some less common or very old browsers might not be fully supported.  Be aware that different browsers handle CSS differently; some subtle rendering discrepancies might be inevitable.  Focus on ensuring your CSS works well across the most common browser platforms.  If compatibility across a particularly wide range of browsers is critical, detailed testing across the targeted browser versions is crucial.  Use a testing framework to ensure consistency across different browsers and browser versions.\n\n\n## Contributing\n\n### Development Setup\n\nTo contribute to html2canvas, you'll need to clone the repository and set up a development environment.  These instructions assume a basic familiarity with Git and Node.js.\n\n1. **Clone the repository:**\n\n```bash\ngit clone https://github.com/niklasvh/html2canvas.git\ncd html2canvas\n```\n\n2. **Install dependencies:**\n\n```bash\nnpm install\n```\n\nThis will install all the necessary packages for building and testing the library.\n\n3. **Build the library:**\n\n```bash\nnpm run build\n```\n\nThis will create a minified version of the library in the `dist` directory.\n\n\n### Testing and Code Style\n\nhtml2canvas uses a comprehensive test suite.  Before submitting any pull requests, ensure your changes pass all existing tests and adhere to the project's coding style.\n\n* **Running tests:**\n\n```bash\nnpm test\n```\n\n* **Code Style:** The project follows a consistent coding style.  Use a code formatter (like Prettier) to ensure your code conforms to the style guide. You can typically run the formatter with a command like `npm run format` (or a similar command specified in the project's documentation).\n\n* **Test Coverage:**  Strive to maintain high test coverage for any new features or bug fixes you introduce.  Use the testing framework's tools (likely Jest) to check coverage.  This ensures that your changes don't introduce regressions.\n\n\n### Submitting Pull Requests\n\n1. **Fork the repository:** Create a fork of the html2canvas repository on GitHub.\n\n2. **Create a branch:** Create a new branch for your changes.  Use descriptive branch names (e.g., `fix/bug-123` or `feat/new-feature`).\n\n3. **Make your changes:** Implement your changes, ensuring they pass all tests and adhere to the coding style.\n\n4. **Commit your changes:** Commit your changes with clear and concise commit messages. Follow a conventional commit message format (e.g., `fix: Resolve issue #123`, `feat: Add new feature`).\n\n5. **Push your branch:** Push your branch to your forked repository on GitHub.\n\n6. **Create a pull request:** Create a pull request from your branch to the main branch of the original html2canvas repository.  Provide a clear description of your changes and address any comments or feedback from reviewers.\n\n\n### Community Guidelines\n\n* **Be respectful:** Treat all contributors and maintainers with respect.  Constructive criticism is welcome, but personal attacks are not.\n\n* **Follow the code of conduct:** Adhere to the project's code of conduct (if one exists).\n\n* **Write clear and concise commit messages:**  Make it easy for others to understand your changes.\n\n* **Provide clear and detailed descriptions for pull requests:** Explain the purpose and scope of your changes.\n\n* **Be patient:**  The review process can take time.  Be patient and responsive to feedback.\n\n* **Test your changes thoroughly:** Ensure your changes work correctly and don't introduce regressions.\n\nBy following these guidelines, you can contribute to the improvement and maintenance of the html2canvas library.  Your contributions are valuable to the community!\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"css":["../../styles.css"],"html-math-method":{"method":"mathjax","url":"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"},"include-in-header":["../../favicon.html","../../header.html","../../schema.html"],"include-after-body":[{"text":"<script async src=\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561\" crossorigin=\"anonymous\"></script>\n"},"../../footer.html"],"output-file":"html2canvas.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.8.25","theme":"pandoc","mermaid":{"theme":"neutral"},"minimal":true,"title-block-banner":true,"page-navigation":true,"license":"MIT","author-meta":"Muthukrishnan","title":"html2canvas - Documentation","description":"html2canvas is a JavaScript library that allows you to take screenshots of web pages or specific elements on a web page and render them as images.","date":"2025-02-09","categories":["JavaScript Libraries and Functions"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}