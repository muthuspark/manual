<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>html2canvas - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MXDPF6L5TL"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MXDPF6L5TL', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta property="og:title" content="html2canvas - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">html2canvas - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction">Introduction</a>
  <ul>
  <li><a href="#what-is-html2canvas" id="toc-what-is-html2canvas">What is html2canvas?</a></li>
  <li><a href="#key-features-and-capabilities" id="toc-key-features-and-capabilities">Key Features and Capabilities</a></li>
  <li><a href="#use-cases-and-examples" id="toc-use-cases-and-examples">Use Cases and Examples</a></li>
  <li><a href="#browser-compatibility" id="toc-browser-compatibility">Browser Compatibility</a></li>
  <li><a href="#installation-and-setup" id="toc-installation-and-setup">Installation and Setup</a></li>
  </ul></li>
  <li><a href="#basic-usage" id="toc-basic-usage">Basic Usage</a>
  <ul>
  <li><a href="#capturing-a-single-element" id="toc-capturing-a-single-element">Capturing a Single Element</a></li>
  <li><a href="#capturing-the-entire-page" id="toc-capturing-the-entire-page">Capturing the Entire Page</a></li>
  <li><a href="#understanding-the-html2canvas-function" id="toc-understanding-the-html2canvas-function">Understanding the <code>html2canvas()</code> Function</a></li>
  <li><a href="#options-and-parameters" id="toc-options-and-parameters">Options and Parameters</a></li>
  <li><a href="#handling-promises-and-asynchronous-operations" id="toc-handling-promises-and-asynchronous-operations">Handling Promises and Asynchronous Operations</a></li>
  </ul></li>
  <li><a href="#advanced-usage" id="toc-advanced-usage">Advanced Usage</a>
  <ul>
  <li><a href="#customizing-canvas-rendering" id="toc-customizing-canvas-rendering">Customizing Canvas Rendering</a></li>
  <li><a href="#handling-css-and-styling" id="toc-handling-css-and-styling">Handling CSS and Styling</a></li>
  <li><a href="#working-with-images-and-backgrounds" id="toc-working-with-images-and-backgrounds">Working with Images and Backgrounds</a></li>
  <li><a href="#using-proxy-and-iframe" id="toc-using-proxy-and-iframe">Using Proxy and iframe</a></li>
  <li><a href="#dealing-with-complex-layouts" id="toc-dealing-with-complex-layouts">Dealing with Complex Layouts</a></li>
  <li><a href="#performance-optimization-techniques" id="toc-performance-optimization-techniques">Performance Optimization Techniques</a></li>
  <li><a href="#troubleshooting-and-debugging" id="toc-troubleshooting-and-debugging">Troubleshooting and Debugging</a></li>
  </ul></li>
  <li><a href="#options-and-configuration" id="toc-options-and-configuration">Options and Configuration</a>
  <ul>
  <li><a href="#detailed-explanation-of-each-option" id="toc-detailed-explanation-of-each-option">Detailed Explanation of Each Option</a></li>
  <li><a href="#using-custom-options-and-settings" id="toc-using-custom-options-and-settings">Using Custom Options and Settings</a></li>
  <li><a href="#option-combinations-and-interactions" id="toc-option-combinations-and-interactions">Option Combinations and Interactions</a></li>
  <li><a href="#default-values-and-behavior" id="toc-default-values-and-behavior">Default Values and Behavior</a></li>
  </ul></li>
  <li><a href="#api-reference" id="toc-api-reference">API Reference</a>
  <ul>
  <li><a href="#html2canvas-function-details" id="toc-html2canvas-function-details"><code>html2canvas()</code> Function Details</a></li>
  <li><a href="#event-handling-and-callbacks" id="toc-event-handling-and-callbacks">Event Handling and Callbacks</a></li>
  <li><a href="#error-handling-and-reporting" id="toc-error-handling-and-reporting">Error Handling and Reporting</a></li>
  <li><a href="#return-values-and-data-structures" id="toc-return-values-and-data-structures">Return Values and Data Structures</a></li>
  </ul></li>
  <li><a href="#examples-and-tutorials" id="toc-examples-and-tutorials">Examples and Tutorials</a>
  <ul>
  <li><a href="#simple-screenshot-example" id="toc-simple-screenshot-example">Simple Screenshot Example</a></li>
  <li><a href="#advanced-screenshot-with-customizations" id="toc-advanced-screenshot-with-customizations">Advanced Screenshot with Customizations</a></li>
  <li><a href="#integrating-with-other-libraries" id="toc-integrating-with-other-libraries">Integrating with Other Libraries</a></li>
  <li><a href="#real-world-application-examples" id="toc-real-world-application-examples">Real-world Application Examples</a></li>
  </ul></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting">Troubleshooting</a>
  <ul>
  <li><a href="#common-errors-and-solutions" id="toc-common-errors-and-solutions">Common Errors and Solutions</a></li>
  <li><a href="#debugging-techniques" id="toc-debugging-techniques">Debugging Techniques</a></li>
  <li><a href="#performance-issues-and-optimization" id="toc-performance-issues-and-optimization">Performance Issues and Optimization</a></li>
  <li><a href="#cross-browser-compatibility-issues" id="toc-cross-browser-compatibility-issues">Cross-Browser Compatibility Issues</a></li>
  </ul></li>
  <li><a href="#contributing" id="toc-contributing">Contributing</a>
  <ul>
  <li><a href="#development-setup" id="toc-development-setup">Development Setup</a></li>
  <li><a href="#testing-and-code-style" id="toc-testing-and-code-style">Testing and Code Style</a></li>
  <li><a href="#submitting-pull-requests" id="toc-submitting-pull-requests">Submitting Pull Requests</a></li>
  <li><a href="#community-guidelines" id="toc-community-guidelines">Community Guidelines</a></li>
  </ul></li>
  </ul>
</nav>
<h2 id="introduction">Introduction</h2>
<h3 id="what-is-html2canvas">What is html2canvas?</h3>
<p>html2canvas is a JavaScript library that allows you to take “screenshots” of web pages or specific elements on a web page and render them as images on the client-side. It achieves this by rendering the content directly within the browser, without needing server-side processing or external image generation services. This makes it a powerful tool for creating dynamic image exports, generating thumbnails, or capturing web page content for offline use. It works by emulating the browser’s rendering engine to create a pixel-perfect representation of the content.</p>
<h3 id="key-features-and-capabilities">Key Features and Capabilities</h3>
<ul>
<li><strong>Client-Side Rendering:</strong> All processing happens in the user’s browser, eliminating the need for server-side calls.</li>
<li><strong>Element-Specific Capture:</strong> You can capture an entire page or a specific HTML element.</li>
<li><strong>Canvas Output:</strong> The resulting image is a Canvas element, allowing easy manipulation and further processing using Canvas APIs.</li>
<li><strong>Image Download:</strong> The generated image can be easily downloaded or used as a data URL.</li>
<li><strong>Customization Options:</strong> Offers various options to control the rendering process, such as specifying the image size, background color, and scaling.</li>
<li><strong>CSS Respect:</strong> Generally respects CSS styles applied to the elements being rendered. (However, some complex CSS may not be fully supported.)</li>
<li><strong>Foreign Object Support (SVG):</strong> Can render SVG elements, though certain complexities may lead to limitations.</li>
</ul>
<h3 id="use-cases-and-examples">Use Cases and Examples</h3>
<ul>
<li><strong>Generating thumbnails for web pages or articles.</strong></li>
<li><strong>Creating shareable images of website content on social media.</strong></li>
<li><strong>Capturing dynamic content for offline viewing.</strong></li>
<li><strong>Building web-based image editors.</strong></li>
<li><strong>Generating printable versions of web pages.</strong></li>
<li><strong>Creating client-side image previews.</strong></li>
</ul>
<h3 id="browser-compatibility">Browser Compatibility</h3>
<p>html2canvas strives for broad browser compatibility but may have limitations or rendering differences across various browsers and versions. While it aims to support modern and older browsers, the most reliable and consistent results are typically achieved in up-to-date versions of Chrome, Firefox, Safari, and Edge. Refer to the project’s official documentation and issue tracker for the most up-to-date compatibility information. Some very old or uncommon browsers may not be fully supported.</p>
<h3 id="installation-and-setup">Installation and Setup</h3>
<p>html2canvas is typically installed via a package manager like npm or yarn. For use in simple projects without a build process, you can include the library directly via a <code>&lt;script&gt;</code> tag.</p>
<p><strong>Using npm or yarn:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install html2canvas</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">yarn</span> add html2canvas</span></code></pre></div>
<p>Then, import it into your JavaScript code:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> html2canvas <span class="im">from</span> <span class="st">'html2canvas'</span><span class="op">;</span></span></code></pre></div>
<p><strong>Using a <code>&lt;script&gt;</code> tag (for simpler projects):</strong></p>
<p>Download the library from the official repository and include it in your HTML file:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"path/to/html2canvas.min.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code></pre></div>
<p>After including the library, you can use the <code>html2canvas</code> function to capture elements:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(<span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myElement'</span>))<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// canvas is the generated image as a canvas element</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="fu">appendChild</span>(canvas)<span class="op">;</span> <span class="co">// append to the page</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// or download the image:</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> imgData <span class="op">=</span> canvas<span class="op">.</span><span class="fu">toDataURL</span>(<span class="st">'image/png'</span>)<span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> link <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'a'</span>)<span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  link<span class="op">.</span><span class="at">download</span> <span class="op">=</span> <span class="st">'screenshot.png'</span><span class="op">;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  link<span class="op">.</span><span class="at">href</span> <span class="op">=</span> imgData<span class="op">;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  link<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Remember to replace <code>'myElement'</code> with the ID of the element you want to capture. Consult the library’s documentation for advanced usage and configuration options.</p>
<h2 id="basic-usage">Basic Usage</h2>
<h3 id="capturing-a-single-element">Capturing a Single Element</h3>
<p>The simplest way to use html2canvas is to capture a single HTML element. You’ll need to obtain a reference to the element using its ID or a suitable selector, then pass this reference to the <code>html2canvas()</code> function. The function returns a Promise that resolves with a Canvas object representing the rendered image.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> html2canvas <span class="im">from</span> <span class="st">'html2canvas'</span><span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> element <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myElement'</span>)<span class="op">;</span> <span class="co">// Get the element to capture</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(element)<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 'canvas' is the generated canvas element.</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="fu">appendChild</span>(canvas)<span class="op">;</span> <span class="co">// Append the canvas to the body (optional)</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Convert the canvas to a data URL for further use (e.g., downloading):</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> imgData <span class="op">=</span> canvas<span class="op">.</span><span class="fu">toDataURL</span>(<span class="st">'image/png'</span>)<span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(imgData)<span class="op">;</span> <span class="co">// Output the data URL</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> {</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">'Error capturing element:'</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Replace <code>"myElement"</code> with the actual ID of your element.</p>
<h3 id="capturing-the-entire-page">Capturing the Entire Page</h3>
<p>To capture the entire visible portion of the page, you can pass <code>document.body</code> (or <code>document.documentElement</code> for slightly different results) to the <code>html2canvas()</code> function. Note that this will only capture what’s currently visible in the viewport; elements hidden due to scrolling will be excluded.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> html2canvas <span class="im">from</span> <span class="st">'html2canvas'</span><span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(<span class="bu">document</span><span class="op">.</span><span class="at">body</span>)<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Process the canvas as needed (e.g., append, download, etc.)</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="fu">appendChild</span>(canvas)<span class="op">;</span> <span class="co">// Append to body</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> {</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">'Error capturing page:'</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="understanding-the-html2canvas-function">Understanding the <code>html2canvas()</code> Function</h3>
<p>The core of the library is the <code>html2canvas()</code> function. It takes at least one argument:</p>
<ul>
<li><strong><code>element</code> (required):</strong> A DOM element (or a selector string that can be used to select a single element) representing the content to render.</li>
</ul>
<p>The function returns a <code>Promise</code>. The Promise resolves with a <code>Canvas</code> object containing the rendered image. If an error occurs during the rendering process, the Promise rejects and throws an error. Error handling is crucial, as rendering complex pages or pages with problematic CSS can lead to failures.</p>
<h3 id="options-and-parameters">Options and Parameters</h3>
<p>The <code>html2canvas()</code> function accepts a second argument: an options object. This object allows you to fine-tune the rendering process. Some common options include:</p>
<ul>
<li><strong><code>width</code>:</strong> Specify the width of the rendered canvas.</li>
<li><strong><code>height</code>:</strong> Specify the height of the rendered canvas.</li>
<li><strong><code>scale</code>:</strong> Scaling factor applied to the rendered content (default is 1). Increasing the scale improves the resolution but increases rendering time.</li>
<li><strong><code>backgroundColor</code>:</strong> Sets the background color of the generated image.</li>
<li><strong><code>logging</code>:</strong> Enables detailed logging for debugging purposes.</li>
<li><strong><code>useCORS</code>:</strong> Enables Cross-Origin Resource Sharing (CORS) for images from different domains (essential if you’re capturing images that aren’t on the same origin).</li>
<li><strong><code>allowTaint</code>:</strong> By default, <code>html2canvas</code> will prevent rendering if it detects a potential taint (often due to cross-origin images). Setting <code>allowTaint</code> to <code>true</code> ignores this check but may result in issues if those images aren’t properly handled. <strong>Use with caution.</strong></li>
</ul>
<p>Example with options:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(element<span class="op">,</span> {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">scale</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">'#fff'</span><span class="op">,</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">logging</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">useCORS</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> {</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="handling-promises-and-asynchronous-operations">Handling Promises and Asynchronous Operations</h3>
<p>The <code>html2canvas()</code> function is asynchronous. It returns a Promise, which means the rendering process happens in the background. You must use <code>.then()</code> to handle the successful resolution of the Promise (accessing the generated <code>canvas</code> object) and <code>.catch()</code> to handle potential errors. Proper error handling is essential for a robust application, as rendering failures can occur due to various reasons (e.g., complex CSS, cross-origin issues, or network problems). Always wrap your call to <code>html2canvas</code> within a <code>.then</code>/<code>.catch</code> block.</p>
<h2 id="advanced-usage">Advanced Usage</h2>
<h3 id="customizing-canvas-rendering">Customizing Canvas Rendering</h3>
<p>Beyond the basic options, you can further customize the rendering process using the Canvas API directly after obtaining the Canvas element from the <code>html2canvas</code> Promise. This allows for post-processing effects, adding text overlays, or modifying the generated image before downloading or using it.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(element)<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> ctx <span class="op">=</span> canvas<span class="op">.</span><span class="fu">getContext</span>(<span class="st">'2d'</span>)<span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Example: Draw a red rectangle on the canvas</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="at">fillStyle</span> <span class="op">=</span> <span class="st">'red'</span><span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="fu">fillRect</span>(<span class="dv">10</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">50</span>)<span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Example: Get image data and manipulate pixels</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> imageData <span class="op">=</span> ctx<span class="op">.</span><span class="fu">getImageData</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> canvas<span class="op">.</span><span class="at">width</span><span class="op">,</span> canvas<span class="op">.</span><span class="at">height</span>)<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ... manipulate imageData.data ...</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  ctx<span class="op">.</span><span class="fu">putImageData</span>(imageData<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...further canvas manipulation...</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> imgData <span class="op">=</span> canvas<span class="op">.</span><span class="fu">toDataURL</span>(<span class="st">'image/png'</span>)<span class="op">;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> {</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="handling-css-and-styling">Handling CSS and Styling</h3>
<p>html2canvas generally respects CSS styles applied to the elements. However, very complex or unusual CSS might not render perfectly. Ensure that your CSS is well-formed and avoids overly complex selectors or properties that might confuse the rendering engine. Consider simplifying stylesheets for better compatibility. Use the browser’s developer tools to inspect the rendered content and identify any discrepancies between the original and captured image. Sometimes, using a higher <code>scale</code> value in the options can improve rendering accuracy for detailed or small elements. Be mindful that <code>display: none</code> will completely hide an element, while <code>visibility: hidden</code> might render it as a blank space.</p>
<h3 id="working-with-images-and-backgrounds">Working with Images and Backgrounds</h3>
<p>Images are a common source of issues with html2canvas. Ensure that images are loaded before attempting to render the element containing them. For images from a different origin, you’ll almost certainly need to enable <code>useCORS: true</code> in the options. Remember that images that aren’t properly accessible (due to CORS restrictions or 404 errors) might prevent rendering entirely or cause artifacts. Background images are also rendered, but ensuring they’re loaded is also crucial. Consider using a placeholder image while the background image is loading to prevent rendering inconsistencies.</p>
<h3 id="using-proxy-and-iframe">Using Proxy and iframe</h3>
<p>For capturing pages or elements that are difficult to render due to complex CSS, JavaScript interactions, or cross-origin restrictions, you might consider using an iframe. Load the content you want to capture into an iframe, then use <code>html2canvas</code> on the iframe’s content. This can isolate the content from potential conflicts with the main page. A proxy might be needed for certain scenarios involving complex dynamic content or severe cross-origin issues. However, using a proxy adds significant complexity and potential security concerns and should be a last resort.</p>
<h3 id="dealing-with-complex-layouts">Dealing with Complex Layouts</h3>
<p>Complex layouts, especially those heavily reliant on JavaScript frameworks (React, Angular, Vue, etc.), might require extra attention. Ensure that the JavaScript framework has fully rendered the content before calling <code>html2canvas</code>. This often involves using timers, lifecycle hooks, or other mechanisms to ensure the DOM is stable. Consider using <code>requestAnimationFrame</code> for best practices. For very complex layouts, breaking the capture into smaller sections and combining them later might be more efficient.</p>
<h3 id="performance-optimization-techniques">Performance Optimization Techniques</h3>
<p>Rendering large or complex pages can be slow. To optimize performance:</p>
<ul>
<li><strong>Use a higher <code>scale</code> value:</strong> A higher scale reduces the need for upscaling later, but increases the rendering time proportionally. Experiment to find a balance.</li>
<li><strong>Capture only necessary elements:</strong> Avoid capturing unnecessary parts of the page.</li>
<li><strong>Reduce image sizes:</strong> Large images significantly impact rendering time. Optimize images before using them.</li>
<li><strong>Simplify CSS:</strong> Complex CSS can slow down rendering. Simplify your stylesheets wherever possible.</li>
<li><strong>Use <code>requestAnimationFrame</code>:</strong> To avoid blocking the main thread, use <code>requestAnimationFrame</code> to schedule the <code>html2canvas</code> call.</li>
<li><strong>Consider using a lower resolution (smaller width/height):</strong> If the final image resolution doesn’t require high detail, rendering at a lower resolution will significantly speed up the process.</li>
</ul>
<h3 id="troubleshooting-and-debugging">Troubleshooting and Debugging</h3>
<p>Debugging issues with html2canvas often involves using your browser’s developer tools. Check the console for errors or warnings. The <code>logging: true</code> option can provide useful debugging information. Inspect the captured canvas to visually compare it to the original element. If images aren’t rendering correctly, check CORS settings and image loading states. If the layout is incorrect, check CSS and ensure your JavaScript framework has completed rendering before calling html2canvas. If performance is a concern, profile your code to identify performance bottlenecks. Consider using a simpler example to isolate problems before attempting to render very complex pages. Refer to the official html2canvas documentation and issue tracker for help resolving specific problems.</p>
<h2 id="options-and-configuration">Options and Configuration</h2>
<h3 id="detailed-explanation-of-each-option">Detailed Explanation of Each Option</h3>
<p>The <code>html2canvas</code> function accepts an optional second argument: an object containing configuration options. These options allow you to customize various aspects of the rendering process. Here’s a detailed explanation of some key options:</p>
<ul>
<li><p><strong><code>width</code> (Number):</strong> Specifies the width of the rendered canvas in pixels. If not provided, the width of the target element (or viewport for full-page captures) will be used.</p></li>
<li><p><strong><code>height</code> (Number):</strong> Specifies the height of the rendered canvas in pixels. If not provided, the height of the target element (or viewport) will be used.</p></li>
<li><p><strong><code>scale</code> (Number, default: 1):</strong> A scaling factor applied to the rendered content. A value of 2 will render at double the resolution. This improves the quality but increases rendering time significantly.</p></li>
<li><p><strong><code>backgroundColor</code> (String, default: ‘rgba(0,0,0,0)’ - transparent):</strong> Sets the background color of the generated canvas. Use CSS color values (e.g., ‘#fff’, ‘rgb(255,255,255)’, ‘white’).</p></li>
<li><p><strong><code>logging</code> (Boolean, default: false):</strong> Enables detailed logging to the console. Useful for debugging rendering issues.</p></li>
<li><p><strong><code>useCORS</code> (Boolean, default: false):</strong> Crucial for handling images from different domains (Cross-Origin Resource Sharing). Setting this to <code>true</code> allows html2canvas to attempt to render images from other origins. However, this still relies on the server allowing CORS access.</p></li>
<li><p><strong><code>allowTaint</code> (Boolean, default: false):</strong> Controls the handling of “tainted” canvases. A canvas becomes tainted if it contains an image from a different origin without proper CORS headers. Setting this to <code>true</code> will allow rendering even if a taint is detected, but may result in incomplete or incorrect rendering. <strong>Use with extreme caution.</strong> Generally, addressing the CORS issue is preferred over using <code>allowTaint</code>.</p></li>
<li><p><strong><code>x</code> (Number, default: 0):</strong> The x-coordinate offset for the rendered content within the canvas. Useful for cropping or positioning.</p></li>
<li><p><strong><code>y</code> (Number, default: 0):</strong> The y-coordinate offset for the rendered content within the canvas. Useful for cropping or positioning.</p></li>
<li><p><strong><code>imageTimeout</code> (Number, default: 10000):</strong> The maximum time (in milliseconds) to wait for images to load before rendering.</p></li>
<li><p><strong><code>proxy</code> (String):</strong> A URL to a proxy server for handling cross-origin requests. This should generally be avoided unless absolutely necessary and used with caution due to security implications.</p></li>
<li><p><strong><code>removeContainer</code> (Boolean, default: false):</strong> Removes the temporary container element used during the rendering process after capturing.</p></li>
</ul>
<h3 id="using-custom-options-and-settings">Using Custom Options and Settings</h3>
<p>To use custom options, simply create an object containing the options you want to set and pass it as the second argument to <code>html2canvas()</code>. Example:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> options <span class="op">=</span> {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">scale</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">'#f0f0f0'</span><span class="op">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">logging</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">useCORS</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(<span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myElement'</span>)<span class="op">,</span> options)<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>You can combine multiple options as needed.</p>
<h3 id="option-combinations-and-interactions">Option Combinations and Interactions</h3>
<p>Some options interact with each other. For instance, <code>scale</code> affects the size of the output canvas, while <code>width</code> and <code>height</code> can override the dimensions derived from the scaling. <code>useCORS</code> and <code>allowTaint</code> handle cross-origin resources differently: <code>useCORS</code> attempts to properly handle CORS, while <code>allowTaint</code> bypasses CORS checks, often leading to incomplete or distorted results. Carefully consider the interactions when combining options. Testing is essential to ensure the desired outcome.</p>
<h3 id="default-values-and-behavior">Default Values and Behavior</h3>
<p>If options aren’t explicitly provided, <code>html2canvas</code> uses default values. These defaults are generally designed for typical use cases. The default <code>backgroundColor</code> is transparent (<code>rgba(0,0,0,0)</code>), and the default <code>scale</code> is 1. The default behavior is to render the entire visible area of the target element, respecting its CSS styles, within a canvas of the same size as the element. Understanding the default behavior is essential when modifying options to customize the rendering process. Be aware that the rendering engine’s interpretation of complex CSS might differ slightly from the browser’s rendering, leading to minor discrepancies in some cases.</p>
<h2 id="api-reference">API Reference</h2>
<h3 id="html2canvas-function-details"><code>html2canvas()</code> Function Details</h3>
<p>The core of the library is the <code>html2canvas()</code> function. Its signature is:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(element<span class="op">,</span> options)</span></code></pre></div>
<ul>
<li><p><strong><code>element</code> (required):</strong> This parameter specifies the DOM element (or a CSS selector string that resolves to a single element) to be rendered. This can be any element on the page, including <code>document.body</code> to render the entire page (visible portion). Invalid selectors or non-existent elements will lead to errors.</p></li>
<li><p><strong><code>options</code> (optional):</strong> This parameter is an object containing configuration options (detailed in the “Options and Configuration” section). This allows customization of the rendering process (e.g., setting the scale, background color, handling CORS).</p></li>
</ul>
<p>The function returns a <code>Promise</code>. This Promise resolves with a <code>Canvas</code> object if the rendering is successful. The Promise rejects with an error if the rendering fails for any reason (e.g., missing images, CORS issues, invalid CSS).</p>
<h3 id="event-handling-and-callbacks">Event Handling and Callbacks</h3>
<p><code>html2canvas</code> is primarily asynchronous and uses Promises for handling asynchronous operations. There are no direct event handling mechanisms or callbacks in the traditional sense. Instead, you use the <code>.then()</code> method of the returned Promise to access the generated <code>Canvas</code> element after the rendering completes successfully. The <code>.catch()</code> method handles any errors that occur during the rendering process.</p>
<p>Example:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(element)<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Success: 'canvas' is the generated Canvas element.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Process the canvas (e.g., download, append to page)</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> {</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Error handling: 'error' contains information about the failure</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">"html2canvas failed:"</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>This approach is cleaner and more consistent with modern JavaScript asynchronous programming practices.</p>
<h3 id="error-handling-and-reporting">Error Handling and Reporting</h3>
<p>Error handling is crucial when using <code>html2canvas</code>, as various factors can cause rendering failures (network issues, missing images, complex CSS, CORS problems, etc.). The <code>Promise.catch()</code> method is the primary mechanism for handling errors. The <code>error</code> object passed to the <code>.catch()</code> callback typically contains information about the type of error and its source. Check the console for detailed error messages during development, as these often provide clues to solve the issue.</p>
<p>Best practice involves wrapping your <code>html2canvas</code> call within a <code>try...catch</code> block for more robust error management. Consider adding user-friendly error messages to improve the user experience in production environments.</p>
<h3 id="return-values-and-data-structures">Return Values and Data Structures</h3>
<p>The <code>html2canvas()</code> function returns a <code>Promise</code>. If successful, the Promise resolves to a single HTML5 <code>Canvas</code> element. This <code>Canvas</code> element contains the rendered image. You can access its properties (e.g., <code>width</code>, <code>height</code>) and methods (e.g., <code>toDataURL()</code>, <code>getContext()</code>) to manipulate or process the generated image further. You can then use the <code>toDataURL()</code> method to get the image as a data URL (e.g., for downloading or embedding).</p>
<p>If the Promise rejects, the <code>catch()</code> handler receives an <code>Error</code> object. This object contains information about the error that occurred, often including a descriptive message to help identify the cause of the failure.</p>
<h2 id="examples-and-tutorials">Examples and Tutorials</h2>
<h3 id="simple-screenshot-example">Simple Screenshot Example</h3>
<p>This example captures a single element with the ID “myElement” and displays the resulting image on the page:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>html2canvas Example<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://html2canvas.hertzen.com/dist/html2canvas.min.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'DOMContentLoaded'</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> element <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myElement'</span>)<span class="op">;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html2canvas</span>(element)<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="fu">appendChild</span>(canvas)<span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"myElement"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"width: 200px; height: 100px; background-color: lightblue; border: 1px solid black;"</span><span class="dt">&gt;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    This is my element!</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Remember to replace <code>"https://html2canvas.hertzen.com/dist/html2canvas.min.js"</code> with the correct path if you’ve downloaded the library locally. This example showcases the most basic usage. It captures the element, and then appends the generated canvas to the body of the HTML document.</p>
<h3 id="advanced-screenshot-with-customizations">Advanced Screenshot with Customizations</h3>
<p>This example demonstrates more advanced usage, including scaling, background color, and error handling:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> html2canvas <span class="im">from</span> <span class="st">'html2canvas'</span><span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> element <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myElement'</span>)<span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> options <span class="op">=</span> {</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">scale</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="co">// Double the resolution</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">'#f0f0f0'</span><span class="op">,</span> <span class="co">// Light gray background</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">logging</span><span class="op">:</span> <span class="kw">true</span>  <span class="co">//Enable logging for debugging</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(element<span class="op">,</span> options)<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Success: Canvas is ready</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> imgData <span class="op">=</span> canvas<span class="op">.</span><span class="fu">toDataURL</span>(<span class="st">'image/png'</span>)<span class="op">;</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> link <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'a'</span>)<span class="op">;</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  link<span class="op">.</span><span class="at">download</span> <span class="op">=</span> <span class="st">'screenshot.png'</span><span class="op">;</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  link<span class="op">.</span><span class="at">href</span> <span class="op">=</span> imgData<span class="op">;</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  link<span class="op">.</span><span class="fu">click</span>()<span class="op">;</span> <span class="co">//Download the image</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> {</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Error handling</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">'Screenshot failed:'</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Consider adding user-friendly error display here</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>This example demonstrates more advanced features, including scaling, background color, and error handling. The resulting image is then downloaded automatically. Remember that you will need a suitable import mechanism for the <code>html2canvas</code> library if you’re using a module bundler (like Webpack or Parcel).</p>
<h3 id="integrating-with-other-libraries">Integrating with Other Libraries</h3>
<p>html2canvas can be integrated with various JavaScript libraries. Here’s a conceptual example of integrating it with a library that handles image uploads:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> html2canvas <span class="im">from</span> <span class="st">'html2canvas'</span><span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> imageUpload <span class="im">from</span> <span class="st">'./imageUploadLibrary'</span><span class="op">;</span> <span class="co">// Placeholder for your upload library</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> element <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'myElement'</span>)<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fu">html2canvas</span>(element)<span class="op">.</span><span class="fu">then</span>(canvas <span class="kw">=&gt;</span> {</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> imgData <span class="op">=</span> canvas<span class="op">.</span><span class="fu">toDataURL</span>(<span class="st">'image/png'</span>)<span class="op">;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">imageUpload</span>(imgData<span class="op">,</span> <span class="st">'screenshot.png'</span>)<span class="op">;</span> <span class="co">//Use your upload library</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">catch</span>(error <span class="kw">=&gt;</span> {</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">'Error:'</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>This is a general structure. The specifics will heavily depend on the functionalities and API of your chosen image upload library. Ensure you adapt this example to the library’s specific methods and requirements.</p>
<h3 id="real-world-application-examples">Real-world Application Examples</h3>
<ul>
<li><p><strong>Web-based Screenshot Tools:</strong> Create a web application that allows users to capture screenshots of web pages or specific elements.</p></li>
<li><p><strong>Social Media Sharing:</strong> Generate shareable images of product details or website content for social media platforms.</p></li>
<li><p><strong>Dynamic Thumbnail Generation:</strong> Create dynamic thumbnails for articles or web pages, providing previews without server-side processing.</p></li>
<li><p><strong>Client-Side Image Editing:</strong> Use the generated canvas as a base for client-side image editing functionalities.</p></li>
<li><p><strong>Printable Web Pages:</strong> Offer printable versions of web pages by capturing the relevant content and generating a suitable image.</p></li>
<li><p><strong>Report Generation:</strong> Dynamically generate reports by capturing sections of web pages as images and including them in the report document.</p></li>
</ul>
<p>These examples provide a starting point. The possibilities are numerous, leveraging html2canvas’s capability for client-side image generation. Remember to always handle errors gracefully and optimize for performance, especially with complex or large pages.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-errors-and-solutions">Common Errors and Solutions</h3>
<p>Here are some common errors encountered when using html2canvas and their potential solutions:</p>
<ul>
<li><p><strong>“Uncaught (in promise) Error: Rendering failed”:</strong> This generic error often indicates a problem during the rendering process. Check the browser’s developer console for more specific error messages. Common causes include:</p>
<ul>
<li><strong>CORS issues:</strong> If the page contains images from a different domain, ensure that the server hosting those images allows CORS. Set the <code>useCORS: true</code> option in html2canvas.</li>
<li><strong>Missing images:</strong> Verify that all images referenced on the page are correctly loaded before calling <code>html2canvas</code>.</li>
<li><strong>Complex CSS:</strong> Simplify complex CSS or use a higher <code>scale</code> value to improve rendering accuracy.</li>
<li><strong>JavaScript errors:</strong> Fix any JavaScript errors on the page that might interfere with rendering.</li>
<li><strong>Timeout:</strong> If images take too long to load, increase <code>imageTimeout</code> in the options.</li>
</ul></li>
<li><p><strong>Blank or incomplete screenshots:</strong> This usually indicates a problem with image loading, CORS, or CSS. Check the browser’s developer console for errors. Examine the HTML structure to ensure all elements are visible and correctly rendered.</p></li>
<li><p><strong>Incorrect layout or distorted elements:</strong> This might be due to complex CSS, especially issues with <code>transform</code>, <code>opacity</code>, or other CSS properties that might not be fully supported by html2canvas. Simplify your CSS if possible.</p></li>
<li><p><strong>Performance Issues:</strong> Rendering large or complex pages can be slow. See the “Performance Issues and Optimization” section below for solutions.</p></li>
<li><p><strong>Canvas is empty after rendering:</strong> Verify that you are correctly selecting the element to capture and that the Promise is resolving correctly. Double check your <code>.then()</code> block is executing correctly.</p></li>
</ul>
<h3 id="debugging-techniques">Debugging Techniques</h3>
<ul>
<li><p><strong>Browser Developer Tools:</strong> Use your browser’s developer tools (usually accessed by pressing F12) to inspect the page, check for JavaScript errors in the console, and examine the network requests to ensure images are loading properly.</p></li>
<li><p><strong><code>logging: true</code> Option:</strong> Set the <code>logging</code> option to <code>true</code> in the html2canvas configuration to enable detailed logging to the console. This provides insights into the rendering process and may reveal the source of errors.</p></li>
<li><p><strong>Simplify the target element:</strong> If you are capturing a complex page, try capturing a smaller, simpler element first to isolate potential issues.</p></li>
<li><p><strong>Inspect the Canvas:</strong> After the rendering is complete (in the <code>.then()</code> block), use the browser’s developer tools to inspect the generated Canvas element directly. This allows you to visually verify the content and look for any rendering discrepancies.</p></li>
<li><p><strong>Check CORS Headers:</strong> Use your browser’s developer tools’ network tab to examine the network requests made by <code>html2canvas</code>, especially for images, to ensure the server is sending the correct CORS headers if necessary.</p></li>
</ul>
<h3 id="performance-issues-and-optimization">Performance Issues and Optimization</h3>
<p>Rendering large or complex pages can be time-consuming. Use these strategies to improve performance:</p>
<ul>
<li><p><strong>Reduce the scale:</strong> Lowering the <code>scale</code> value reduces rendering resolution, speeding up the process but decreasing image quality. Find a good balance.</p></li>
<li><p><strong>Capture smaller sections:</strong> Instead of capturing the whole page, try capturing smaller sections separately and combining them afterward using the Canvas API.</p></li>
<li><p><strong>Optimize images:</strong> Compress images to reduce their file size and improve loading times. Use appropriately sized images for your needs.</p></li>
<li><p><strong>Simplify CSS:</strong> Complex CSS can slow down rendering. Try to simplify your CSS rules and avoid overly complex selectors or properties.</p></li>
<li><p><strong>Use requestAnimationFrame:</strong> Consider using <code>requestAnimationFrame</code> to schedule the <code>html2canvas</code> call to avoid blocking the main thread.</p></li>
<li><p><strong>Asynchronous Loading:</strong> Ensure all images and resources are fully loaded before calling <code>html2canvas</code>. You might need to wait for events or use Promises to ensure everything is ready.</p></li>
<li><p><strong>Reduce unnecessary content:</strong> Remove any unnecessary elements from the target area before capturing it.</p></li>
</ul>
<h3 id="cross-browser-compatibility-issues">Cross-Browser Compatibility Issues</h3>
<p>While html2canvas strives for broad compatibility, minor rendering differences might exist across browsers. Always test your implementation thoroughly in the target browsers. Some less common or very old browsers might not be fully supported. Be aware that different browsers handle CSS differently; some subtle rendering discrepancies might be inevitable. Focus on ensuring your CSS works well across the most common browser platforms. If compatibility across a particularly wide range of browsers is critical, detailed testing across the targeted browser versions is crucial. Use a testing framework to ensure consistency across different browsers and browser versions.</p>
<h2 id="contributing">Contributing</h2>
<h3 id="development-setup">Development Setup</h3>
<p>To contribute to html2canvas, you’ll need to clone the repository and set up a development environment. These instructions assume a basic familiarity with Git and Node.js.</p>
<ol type="1">
<li><strong>Clone the repository:</strong></li>
</ol>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/niklasvh/html2canvas.git</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> html2canvas</span></code></pre></div>
<ol start="2" type="1">
<li><strong>Install dependencies:</strong></li>
</ol>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span></code></pre></div>
<p>This will install all the necessary packages for building and testing the library.</p>
<ol start="3" type="1">
<li><strong>Build the library:</strong></li>
</ol>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span></code></pre></div>
<p>This will create a minified version of the library in the <code>dist</code> directory.</p>
<h3 id="testing-and-code-style">Testing and Code Style</h3>
<p>html2canvas uses a comprehensive test suite. Before submitting any pull requests, ensure your changes pass all existing tests and adhere to the project’s coding style.</p>
<ul>
<li><strong>Running tests:</strong></li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> test</span></code></pre></div>
<ul>
<li><p><strong>Code Style:</strong> The project follows a consistent coding style. Use a code formatter (like Prettier) to ensure your code conforms to the style guide. You can typically run the formatter with a command like <code>npm run format</code> (or a similar command specified in the project’s documentation).</p></li>
<li><p><strong>Test Coverage:</strong> Strive to maintain high test coverage for any new features or bug fixes you introduce. Use the testing framework’s tools (likely Jest) to check coverage. This ensures that your changes don’t introduce regressions.</p></li>
</ul>
<h3 id="submitting-pull-requests">Submitting Pull Requests</h3>
<ol type="1">
<li><p><strong>Fork the repository:</strong> Create a fork of the html2canvas repository on GitHub.</p></li>
<li><p><strong>Create a branch:</strong> Create a new branch for your changes. Use descriptive branch names (e.g., <code>fix/bug-123</code> or <code>feat/new-feature</code>).</p></li>
<li><p><strong>Make your changes:</strong> Implement your changes, ensuring they pass all tests and adhere to the coding style.</p></li>
<li><p><strong>Commit your changes:</strong> Commit your changes with clear and concise commit messages. Follow a conventional commit message format (e.g., <code>fix: Resolve issue #123</code>, <code>feat: Add new feature</code>).</p></li>
<li><p><strong>Push your branch:</strong> Push your branch to your forked repository on GitHub.</p></li>
<li><p><strong>Create a pull request:</strong> Create a pull request from your branch to the main branch of the original html2canvas repository. Provide a clear description of your changes and address any comments or feedback from reviewers.</p></li>
</ol>
<h3 id="community-guidelines">Community Guidelines</h3>
<ul>
<li><p><strong>Be respectful:</strong> Treat all contributors and maintainers with respect. Constructive criticism is welcome, but personal attacks are not.</p></li>
<li><p><strong>Follow the code of conduct:</strong> Adhere to the project’s code of conduct (if one exists).</p></li>
<li><p><strong>Write clear and concise commit messages:</strong> Make it easy for others to understand your changes.</p></li>
<li><p><strong>Provide clear and detailed descriptions for pull requests:</strong> Explain the purpose and scope of your changes.</p></li>
<li><p><strong>Be patient:</strong> The review process can take time. Be patient and responsive to feedback.</p></li>
<li><p><strong>Test your changes thoroughly:</strong> Ensure your changes work correctly and don’t introduce regressions.</p></li>
</ul>
<p>By following these guidelines, you can contribute to the improvement and maintenance of the html2canvas library. Your contributions are valuable to the community!</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>