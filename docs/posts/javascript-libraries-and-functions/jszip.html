<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">

<title>JSZip - Documentation – Technical Manuals</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MXDPF6L5TL"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MXDPF6L5TL', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta property="og:title" content="JSZip - Documentation – Technical Manuals">
<meta property="og:site_name" content="Technical Manuals">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../" aria-label="Home">
                    <span>Technical Manuals - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                    <li>
                        <button onclick="window.print()" class="print-button">
                            <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                              <path d="M6 9V2h12v7"></path>
                              <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"></path>
                              <path d="M6 14h12v8H6z"></path>
                            </svg>
                            Print Page
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../styles.css">





<header id="title-block-header">
<h1 class="title">JSZip - Documentation</h1>

</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-jszip" id="toc-what-is-jszip">What is JSZip?</a></li>
  <li><a href="#why-use-jszip" id="toc-why-use-jszip">Why use JSZip?</a></li>
  <li><a href="#setting-up-jszip-installation-and-basic-usage" id="toc-setting-up-jszip-installation-and-basic-usage">Setting up JSZip: Installation and Basic Usage</a></li>
  <li><a href="#jszip-and-browser-compatibility" id="toc-jszip-and-browser-compatibility">JSZip and Browser Compatibility</a></li>
  <li><a href="#core-functionality-creating-and-manipulating-zip-files" id="toc-core-functionality-creating-and-manipulating-zip-files">Core Functionality: Creating and Manipulating Zip Files</a>
  <ul>
  <li><a href="#creating-a-new-zip-file" id="toc-creating-a-new-zip-file">Creating a new Zip file</a></li>
  <li><a href="#adding-files-to-a-zip-archive" id="toc-adding-files-to-a-zip-archive">Adding files to a Zip archive</a></li>
  <li><a href="#adding-folders-to-a-zip-archive" id="toc-adding-folders-to-a-zip-archive">Adding folders to a Zip archive</a></li>
  <li><a href="#reading-files-from-a-zip-archive" id="toc-reading-files-from-a-zip-archive">Reading files from a Zip archive</a></li>
  <li><a href="#removing-files-from-a-zip-archive" id="toc-removing-files-from-a-zip-archive">Removing files from a Zip archive</a></li>
  <li><a href="#updating-files-in-a-zip-archive" id="toc-updating-files-in-a-zip-archive">Updating files in a Zip archive</a></li>
  <li><a href="#file-metadata-name-comment-etc." id="toc-file-metadata-name-comment-etc.">File Metadata (name, comment, etc.)</a></li>
  <li><a href="#handling-large-files" id="toc-handling-large-files">Handling large files</a></li>
  </ul></li>
  <li><a href="#advanced-techniques" id="toc-advanced-techniques">Advanced Techniques</a>
  <ul>
  <li><a href="#working-with-zip-streams" id="toc-working-with-zip-streams">Working with Zip streams</a></li>
  <li><a href="#asynchronous-operations" id="toc-asynchronous-operations">Asynchronous operations</a></li>
  <li><a href="#using-promises" id="toc-using-promises">Using Promises</a></li>
  <li><a href="#error-handling" id="toc-error-handling">Error Handling</a></li>
  <li><a href="#customizing-compression-levels" id="toc-customizing-compression-levels">Customizing Compression Levels</a></li>
  <li><a href="#using-different-compression-methods" id="toc-using-different-compression-methods">Using different compression methods</a></li>
  <li><a href="#handling-encrypted-zip-files" id="toc-handling-encrypted-zip-files">Handling encrypted zip files</a></li>
  <li><a href="#integration-with-other-libraries" id="toc-integration-with-other-libraries">Integration with other libraries</a></li>
  </ul></li>
  <li><a href="#jszip-and-other-technologies" id="toc-jszip-and-other-technologies">JSZip and other Technologies</a>
  <ul>
  <li><a href="#jszip-with-node.js" id="toc-jszip-with-node.js">JSZip with Node.js</a></li>
  <li><a href="#jszip-with-web-workers" id="toc-jszip-with-web-workers">JSZip with Web Workers</a></li>
  <li><a href="#jszip-with-react" id="toc-jszip-with-react">JSZip with React</a></li>
  <li><a href="#jszip-with-angular" id="toc-jszip-with-angular">JSZip with Angular</a></li>
  <li><a href="#jszip-with-vue" id="toc-jszip-with-vue">JSZip with Vue</a></li>
  <li><a href="#jszip-and-file-apis" id="toc-jszip-and-file-apis">JSZip and File APIs</a></li>
  <li><a href="#jszip-and-server-side-technologies" id="toc-jszip-and-server-side-technologies">JSZip and server-side technologies</a></li>
  </ul></li>
  <li><a href="#best-practices-and-optimization" id="toc-best-practices-and-optimization">Best Practices and Optimization</a>
  <ul>
  <li><a href="#optimizing-for-performance" id="toc-optimizing-for-performance">Optimizing for performance</a></li>
  <li><a href="#memory-management" id="toc-memory-management">Memory management</a></li>
  <li><a href="#security-considerations" id="toc-security-considerations">Security considerations</a></li>
  <li><a href="#code-examples-and-best-practices" id="toc-code-examples-and-best-practices">Code examples and best practices</a></li>
  </ul></li>
  <li><a href="#api-reference" id="toc-api-reference">API Reference</a>
  <ul>
  <li><a href="#jszip-class" id="toc-jszip-class">JSZip Class</a></li>
  <li><a href="#zipfile-class" id="toc-zipfile-class">ZipFile Class</a></li>
  <li><a href="#zipobject-class" id="toc-zipobject-class">ZipObject Class</a></li>
  <li><a href="#utility-functions" id="toc-utility-functions">Utility functions</a></li>
  </ul></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting">Troubleshooting</a>
  <ul>
  <li><a href="#common-errors-and-solutions" id="toc-common-errors-and-solutions">Common errors and solutions</a></li>
  <li><a href="#debugging-tips" id="toc-debugging-tips">Debugging tips</a></li>
  <li><a href="#where-to-find-help" id="toc-where-to-find-help">Where to find help</a></li>
  </ul></li>
  </ul>
</nav>
<h3 id="what-is-jszip">What is JSZip?</h3>
<p>JSZip is a JavaScript library for creating, reading, and manipulating zip files in the browser and Node.js. It allows you to add files to a zip archive, extract files from a zip archive, and perform other zip-related operations entirely client-side, without requiring server-side interaction for basic zip file manipulation. JSZip handles the complexities of the ZIP file format, providing a simple and consistent API for developers to work with.</p>
<h3 id="why-use-jszip">Why use JSZip?</h3>
<p>JSZip offers several compelling reasons for its use in your projects:</p>
<ul>
<li><strong>Client-side zip manipulation:</strong> Avoid unnecessary server round-trips by handling zip file creation and extraction directly in the user’s browser or Node.js environment. This reduces latency and improves the user experience, especially for applications dealing with large files or many files.</li>
<li><strong>Ease of use:</strong> JSZip provides a clean and intuitive API, making it easy to integrate into your applications. The library handles the intricate details of the ZIP format, allowing you to focus on your application’s logic.</li>
<li><strong>Lightweight:</strong> JSZip is designed to be a lightweight library, minimizing the impact on your application’s performance and download size.</li>
<li><strong>Cross-platform compatibility:</strong> JSZip works in both browser environments (with support for various browsers) and Node.js, providing consistent functionality across different platforms.</li>
<li><strong>Comprehensive features:</strong> Beyond basic zip creation and extraction, JSZip offers features like file compression level control, password protection (though security considerations should be carefully evaluated), and asynchronous operations for better performance with large files.</li>
</ul>
<h3 id="setting-up-jszip-installation-and-basic-usage">Setting up JSZip: Installation and Basic Usage</h3>
<p><strong>Node.js:</strong></p>
<p>To use JSZip in a Node.js project, install it using npm or yarn:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install jszip</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">yarn</span> add jszip</span></code></pre></div>
<p>Then, you can include it in your code:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> JSZip <span class="op">=</span> <span class="pp">require</span>(<span class="st">'jszip'</span>)<span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">// ... your JSZip code ...</span></span></code></pre></div>
<p><strong>Browser:</strong></p>
<p>You can include JSZip in your browser project via a <code>&lt;script&gt;</code> tag from a CDN, like jsDelivr:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code></pre></div>
<p>or by downloading the library and including it locally. Then, the <code>JSZip</code> object will be available globally.</p>
<p>A basic example of creating a zip file in both environments:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> zip <span class="op">=</span> <span class="kw">new</span> <span class="fu">JSZip</span>()<span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"hello.txt"</span><span class="op">,</span> <span class="st">"Hello, world!"</span>)<span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">generateAsync</span>({<span class="dt">type</span><span class="op">:</span><span class="st">"blob"</span>})</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(content) {</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// see FileSaver.js</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveAs</span>(content<span class="op">,</span> <span class="st">"example.zip"</span>)<span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span></code></pre></div>
<p>Remember to include a library like FileSaver.js for saving the generated zip file in the browser.</p>
<h3 id="jszip-and-browser-compatibility">JSZip and Browser Compatibility</h3>
<p>JSZip is designed to work across a wide range of modern browsers. While it strives for broad compatibility, older or less commonly used browsers might exhibit limitations. It’s generally recommended to target evergreen browsers (those that auto-update) to ensure consistent functionality. For optimal performance, it is important to consider using features supported by modern JavaScript implementations. Refer to the JSZip documentation and release notes for detailed information on supported browsers and any potential compatibility issues or known limitations with specific browser versions.</p>
<h2 id="core-functionality-creating-and-manipulating-zip-files">Core Functionality: Creating and Manipulating Zip Files</h2>
<h3 id="creating-a-new-zip-file">Creating a new Zip file</h3>
<p>Creating a new zip file using JSZip is straightforward. You instantiate a new <code>JSZip</code> object, which represents an empty zip archive. Subsequently, you add files and folders to this object before generating the final zip file.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> JSZip <span class="op">=</span> <span class="pp">require</span>(<span class="st">'jszip'</span>)<span class="op">;</span> <span class="co">// or import JSZip from 'jszip'; for ES modules</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> zip <span class="op">=</span> <span class="kw">new</span> <span class="fu">JSZip</span>()<span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ... add files and folders to the 'zip' object ...</span></span></code></pre></div>
<h3 id="adding-files-to-a-zip-archive">Adding files to a Zip archive</h3>
<p>Files are added using the <code>file()</code> method. This method takes the file name (including path if needed for subdirectories) and the file content as arguments. The content can be a string, a <code>Uint8Array</code>, or a <code>Blob</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"hello.txt"</span><span class="op">,</span> <span class="st">"Hello, world!"</span>)<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"my_image.jpg"</span><span class="op">,</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>([ <span class="co">/* your image data */</span> ]))<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"path/to/file.json"</span><span class="op">,</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({<span class="dt">data</span><span class="op">:</span> <span class="st">"some data"</span>}))<span class="op">;</span></span></code></pre></div>
<h3 id="adding-folders-to-a-zip-archive">Adding folders to a Zip archive</h3>
<p>JSZip automatically handles folder creation. You don’t explicitly create folders; simply add files with paths that include directory separators (“/” or “\”).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"images/image1.png"</span><span class="op">,</span> <span class="st">"..."</span>)<span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"images/image2.png"</span><span class="op">,</span> <span class="st">"..."</span>)<span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"documents/report.pdf"</span><span class="op">,</span> <span class="st">"..."</span>)<span class="op">;</span></span></code></pre></div>
<p>This will create the “images” and “documents” folders within the zip archive.</p>
<h3 id="reading-files-from-a-zip-archive">Reading files from a Zip archive</h3>
<p>You can access individual files within the archive using the <code>file()</code> method (to get the file object) or <code>forEach()</code> to iterate through the files. The file content can then be accessed using the <code>async</code> methods.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"hello.txt"</span>)<span class="op">.</span><span class="fu">async</span>(<span class="st">"string"</span>)<span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span> (content) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(content)<span class="op">;</span> <span class="co">// Outputs "Hello, world!"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span> (relativePath<span class="op">,</span> zipEntry) {</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(relativePath)<span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    zipEntry<span class="op">.</span><span class="fu">async</span>(<span class="st">"string"</span>)<span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(content){</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(content)<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="removing-files-from-a-zip-archive">Removing files from a Zip archive</h3>
<p>Remove files using the <code>remove()</code> method.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">remove</span>(<span class="st">"hello.txt"</span>)<span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">remove</span>(<span class="st">"images/image1.png"</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="updating-files-in-a-zip-archive">Updating files in a Zip archive</h3>
<p>Updating a file simply involves adding a file with the same name. The previous version will be overwritten.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"hello.txt"</span><span class="op">,</span> <span class="st">"New Hello, world!"</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="file-metadata-name-comment-etc.">File Metadata (name, comment, etc.)</h3>
<p>JSZip allows you to set various metadata properties for files within the archive, such as comments. This is done through the <code>zipEntry</code> object obtained from <code>zip.file()</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> file <span class="op">=</span> zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"my_file.txt"</span><span class="op">,</span> <span class="st">"Some text"</span>)<span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>file<span class="op">.</span><span class="at">comment</span> <span class="op">=</span> <span class="st">"This is a comment about my_file.txt"</span><span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>file<span class="op">.</span><span class="at">name</span> <span class="op">=</span> <span class="st">"updated_file_name.txt"</span> <span class="co">//This will change file name</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Accessing metadata</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(file<span class="op">.</span><span class="at">comment</span>)<span class="op">;</span> <span class="co">// Access the comment</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(file<span class="op">.</span><span class="at">name</span>)<span class="op">;</span> <span class="co">// Access the filename</span></span></code></pre></div>
<h3 id="handling-large-files">Handling large files</h3>
<p>For large files, it’s crucial to use asynchronous methods to avoid blocking the main thread. JSZip’s asynchronous methods (those ending in <code>Async</code>) are designed for this purpose. Instead of directly accessing the file content, you should use <code>.async("string")</code>, <code>.async("uint8array")</code>, or <code>.async("blob")</code> to read files asynchronously. Also, consider using streaming options when generating the zip file to improve memory management. Chunking the large file into smaller parts before adding to the archive might also be beneficial. Refer to the JSZip documentation for advanced options concerning stream handling and large files.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"largefile.txt"</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">ReadableStream</span>())<span class="op">.</span><span class="fu">generateAsync</span>({<span class="dt">type</span><span class="op">:</span> <span class="st">'blob'</span><span class="op">,</span> <span class="dt">streamFiles</span><span class="op">:</span><span class="kw">true</span>})<span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span>(content){</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// handle the blob</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>Remember to replace <code>ReadableStream</code> with your actual large file streaming mechanism. The <code>streamFiles: true</code> option is crucial for handling large files efficiently.</p>
<h2 id="advanced-techniques">Advanced Techniques</h2>
<h3 id="working-with-zip-streams">Working with Zip streams</h3>
<p>For optimal performance with large files, working directly with streams is essential. JSZip supports streaming both during file addition and zip archive generation. Instead of loading the entire file content into memory, you can provide a stream (like a <code>ReadableStream</code> in browsers or a Node.js stream) as the file content. This is particularly beneficial when dealing with files larger than available memory. The <code>generateAsync</code> method allows configuring stream-based generation.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Example using a Node.js stream (adapt for browser ReadableStream)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> fs <span class="op">=</span> <span class="pp">require</span>(<span class="st">'node:fs'</span>)<span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> zip <span class="op">=</span> <span class="kw">new</span> <span class="fu">JSZip</span>()<span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> readStream <span class="op">=</span> fs<span class="op">.</span><span class="fu">createReadStream</span>(<span class="st">'largefile.txt'</span>)<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">'largefile.txt'</span><span class="op">,</span> readStream)<span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">generateAsync</span>({ <span class="dt">type</span><span class="op">:</span> <span class="st">'nodebuffer'</span><span class="op">,</span> <span class="dt">streamFiles</span><span class="op">:</span> <span class="kw">true</span> })</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span> (content) {</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Handle the generated zip file as a Buffer</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span></code></pre></div>
<h3 id="asynchronous-operations">Asynchronous operations</h3>
<p>JSZip’s core functionality is built around asynchronous operations. Methods like <code>generateAsync()</code>, <code>loadAsync()</code>, and file access methods with <code>.async()</code> ensure that long-running tasks don’t block the main thread. This is crucial for responsiveness in browser applications and prevents performance bottlenecks in Node.js. Always prefer asynchronous methods when dealing with potentially large zip files or numerous files.</p>
<h3 id="using-promises">Using Promises</h3>
<p>JSZip’s asynchronous methods return Promises. This allows you to use standard Promise chaining and error handling techniques for a clean and efficient approach to asynchronous programming.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">generateAsync</span>({ <span class="dt">type</span><span class="op">:</span> <span class="st">'blob'</span> })</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span> (content) {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Success: 'content' is the generated zip file as a Blob</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveAs</span>(content<span class="op">,</span> <span class="st">"myzip.zip"</span>)<span class="op">;</span> <span class="co">// Requires FileSaver.js</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">catch</span>(<span class="kw">function</span> (error) {</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Error handling</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">"Error generating zip:"</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span></code></pre></div>
<h3 id="error-handling">Error Handling</h3>
<p>Proper error handling is crucial when working with JSZip. Utilize <code>.catch()</code> blocks to handle potential errors during zip file generation, loading, or file access. JSZip typically throws errors for issues like invalid zip files, missing files, or incorrect input data. These errors provide helpful information for debugging.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">loadAsync</span>(fileContent)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>(<span class="kw">function</span> (zip) {</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Zip file loaded successfully</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">catch</span>(<span class="kw">function</span> (error) {</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="st">"Error loading zip file:"</span><span class="op">,</span> error)<span class="op">;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span></code></pre></div>
<h3 id="customizing-compression-levels">Customizing Compression Levels</h3>
<p>JSZip allows you to control the compression level for individual files or the entire archive. Higher compression levels (e.g., <code>DEFLATE</code> with a higher compression level) result in smaller zip files but require more processing time. Lower levels are faster but result in larger files.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"compressedFile.txt"</span><span class="op">,</span> <span class="st">"My text"</span><span class="op">,</span> { <span class="dt">compression</span><span class="op">:</span> <span class="st">'DEFLATE'</span><span class="op">,</span> <span class="dt">compressionOptions</span><span class="op">:</span> { <span class="dt">level</span><span class="op">:</span> <span class="dv">9</span> } })<span class="op">;</span> <span class="co">// High compression</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">file</span>(<span class="st">"lessCompressedFile.txt"</span><span class="op">,</span> <span class="st">"My text"</span><span class="op">,</span> { <span class="dt">compression</span><span class="op">:</span> <span class="st">'DEFLATE'</span><span class="op">,</span> <span class="dt">compressionOptions</span><span class="op">:</span> { <span class="dt">level</span><span class="op">:</span> <span class="dv">1</span> } })<span class="op">;</span> <span class="co">// Low compression</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>zip<span class="op">.</span><span class="fu">generateAsync</span>({ <span class="dt">type</span><span class="op">:</span> <span class="st">'blob'</span><span class="op">,</span> <span class="dt">compression</span><span class="op">:</span> <span class="st">'DEFLATE'</span><span class="op">,</span> <span class="dt">compressionOptions</span><span class="op">:</span> { <span class="dt">level</span><span class="op">:</span> <span class="dv">6</span> } }) <span class="co">//default compression for all files</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">then</span>(<span class="op">...</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">catch</span>(<span class="op">...</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="using-different-compression-methods">Using different compression methods</h3>
<p>Besides <code>DEFLATE</code>, JSZip supports other compression methods, though <code>DEFLATE</code> is the most common and generally recommended. The availability and performance of alternative methods might vary depending on the browser or environment. Check the JSZip documentation for details on supported compression methods.</p>
<h3 id="handling-encrypted-zip-files">Handling encrypted zip files</h3>
<p>JSZip’s core functionality does <em>not</em> directly support creating or decrypting encrypted zip files. Encryption requires additional libraries and often involves more complex cryptography. Note that handling encrypted ZIP files introduces significant security considerations, and improper handling can lead to vulnerabilities.</p>
<h3 id="integration-with-other-libraries">Integration with other libraries</h3>
<p>JSZip can be readily integrated with other JavaScript libraries. For example, it works well with libraries for handling file uploads/downloads (like FileSaver.js and Dropzone.js), image manipulation, or other data processing tasks. The flexibility of JSZip’s API (accepting various data types) makes it easy to incorporate it into complex workflows.</p>
<h2 id="jszip-and-other-technologies">JSZip and other Technologies</h2>
<h3 id="jszip-with-node.js">JSZip with Node.js</h3>
<p>JSZip works seamlessly within Node.js environments. Installation is via npm or yarn (as described in the basic usage section). The API remains consistent, but you’ll typically work with buffers (<code>Buffer</code>) instead of <code>Blob</code> objects for file I/O. Node.js’s file system access capabilities can be leveraged for reading and writing zip files directly to disk.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> JSZip <span class="op">=</span> <span class="pp">require</span>(<span class="st">'jszip'</span>)<span class="op">;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> fs <span class="op">=</span> <span class="pp">require</span>(<span class="st">'node:fs/promises'</span>)<span class="op">;</span> <span class="co">//For Asynchronous file operations</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">zipFiles</span>(files){</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> zip <span class="op">=</span> <span class="kw">new</span> <span class="fu">JSZip</span>()<span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> file <span class="kw">of</span> files){</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> fs<span class="op">.</span><span class="fu">readFile</span>(file<span class="op">.</span><span class="at">path</span>)<span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>        zip<span class="op">.</span><span class="fu">file</span>(file<span class="op">.</span><span class="at">name</span><span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> zipBuffer <span class="op">=</span> <span class="cf">await</span> zip<span class="op">.</span><span class="fu">generateAsync</span>({<span class="dt">type</span><span class="op">:</span><span class="st">"nodebuffer"</span>})<span class="op">;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> fs<span class="op">.</span><span class="fu">writeFile</span>(<span class="st">"myZipFile.zip"</span><span class="op">,</span>zipBuffer)<span class="op">;</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="jszip-with-web-workers">JSZip with Web Workers</h3>
<p>To improve the responsiveness of your web application when dealing with potentially long-running zip operations (especially with large files), offload the work to Web Workers. This prevents blocking the main thread. Create a Web Worker that handles the JSZip operations and communicate with it via messages to send and receive data.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">// main thread</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> worker <span class="op">=</span> <span class="kw">new</span> <span class="bu">Worker</span>(<span class="st">'worker.js'</span>)<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>worker<span class="op">.</span><span class="fu">postMessage</span>({ <span class="dt">action</span><span class="op">:</span> <span class="st">'generateZip'</span><span class="op">,</span> <span class="dt">files</span><span class="op">:</span> files })<span class="op">;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>worker<span class="op">.</span><span class="at">onmessage</span> <span class="op">=</span> <span class="kw">function</span>(e) {</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Handle zip file received from worker</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">// worker.js</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>onmessage <span class="op">=</span> <span class="kw">function</span>(e) {</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { action<span class="op">,</span> files } <span class="op">=</span> e<span class="op">.</span><span class="at">data</span><span class="op">;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (action <span class="op">===</span> <span class="st">'generateZip'</span>) {</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">//Use JSZip here to generate the zip file asynchronously</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">// ... JSZip code ...</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">postMessage</span>({ <span class="dt">action</span><span class="op">:</span> <span class="st">'zipGenerated'</span><span class="op">,</span> <span class="dt">zip</span><span class="op">:</span> zipBlob })<span class="op">;</span> <span class="co">// send the generated zip back to the main thread</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h3 id="jszip-with-react">JSZip with React</h3>
<p>Integrate JSZip into React applications by importing it into your component and using it within lifecycle methods or functional components. For large zip operations, consider using asynchronous operations and managing loading states to provide a smooth user experience.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> React<span class="op">,</span> { useState } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> JSZip <span class="im">from</span> <span class="st">'jszip'</span><span class="op">;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">MyComponent</span>() {</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [zipBlob<span class="op">,</span> setZipBlob] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> generateZip <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> zip <span class="op">=</span> <span class="kw">new</span> <span class="fu">JSZip</span>()<span class="op">;</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// ... add files to the zip ...</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> blob <span class="op">=</span> <span class="cf">await</span> zip<span class="op">.</span><span class="fu">generateAsync</span>({ <span class="dt">type</span><span class="op">:</span> <span class="st">'blob'</span> })<span class="op">;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setZipBlob</span>(blob)<span class="op">;</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>button onClick<span class="op">=</span>{generateZip}<span class="op">&gt;</span>Generate <span class="bu">Zip</span><span class="op">&lt;/</span>button<span class="op">&gt;</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>      {zipBlob <span class="op">&amp;&amp;</span> <span class="op">&lt;</span>a href<span class="op">=</span>{URL<span class="op">.</span><span class="fu">createObjectURL</span>(zipBlob)} download<span class="op">=</span><span class="st">"myzip.zip"</span><span class="op">&gt;</span>Download<span class="op">&lt;/</span>a<span class="op">&gt;</span>}</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="jszip-with-angular">JSZip with Angular</h3>
<p>Similar to React, integrate JSZip into Angular applications by importing it into your service or component and using it within methods. Leverage Angular’s dependency injection and RxJS observables to handle asynchronous operations effectively.</p>
<h3 id="jszip-with-vue">JSZip with Vue</h3>
<p>In Vue applications, you can use JSZip within your components’ methods. Utilize Vue’s reactivity system to update the UI as needed during asynchronous zip operations.</p>
<h3 id="jszip-and-file-apis">JSZip and File APIs</h3>
<p>JSZip works well with browser File APIs. You can use the File API to select files from the user’s computer, read their contents, add them to a zip archive, and handle the generated zip file (using <code>Blob</code> objects).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">//example of handling file selection.</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> input <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'input'</span>)<span class="op">;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>input<span class="op">.</span><span class="at">type</span> <span class="op">=</span> <span class="st">'file'</span><span class="op">;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>input<span class="op">.</span><span class="at">multiple</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>input<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'change'</span><span class="op">,</span> <span class="kw">async</span> (e) <span class="kw">=&gt;</span> {</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> files <span class="op">=</span> e<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">files</span><span class="op">;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">//Use JSZip to create a zip file with the selected files.</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<h3 id="jszip-and-server-side-technologies">JSZip and server-side technologies</h3>
<p>While JSZip primarily operates client-side, it can be used in conjunction with server-side technologies. The client-side can generate a zip file using JSZip and then send it to the server for storage or further processing, or the server can send the zip file to the client for download after server side generation. Node.js, for example, can use JSZip for server-side zip file manipulation. However, for large-scale zip processing on the server, more performant server-side libraries might be preferable.</p>
<h2 id="best-practices-and-optimization">Best Practices and Optimization</h2>
<h3 id="optimizing-for-performance">Optimizing for performance</h3>
<p>Optimizing JSZip usage for performance involves several key strategies:</p>
<ul>
<li><p><strong>Asynchronous Operations:</strong> Always favor asynchronous methods (those ending in <code>Async</code>). This prevents blocking the main thread in browsers and improves responsiveness. For large files or many files, the difference in performance is significant.</p></li>
<li><p><strong>Streaming:</strong> When dealing with large files, use streams for both file input and zip generation (<code>generateAsync</code> with <code>streamFiles: true</code>). This dramatically reduces memory consumption by avoiding loading the entire file into memory at once.</p></li>
<li><p><strong>Compression Level:</strong> Choose an appropriate compression level. Higher levels result in smaller files but increase processing time. A balance needs to be struck depending on your application’s needs.</p></li>
<li><p><strong>Chunking (for very large files):</strong> For extremely large files that still exceed memory constraints even with streaming, consider breaking the file into smaller chunks before adding them to the zip archive.</p></li>
<li><p><strong>Web Workers (for browsers):</strong> Offload heavy zip operations (like creating large archives) to Web Workers to prevent blocking the main browser thread.</p></li>
<li><p><strong>Avoid unnecessary operations:</strong> Don’t perform redundant operations like repeatedly generating the same zip file. Cache results where possible.</p></li>
</ul>
<h3 id="memory-management">Memory management</h3>
<p>Efficient memory management is crucial, particularly when working with large zip files. The core strategies for this are:</p>
<ul>
<li><p><strong>Streaming:</strong> The most important aspect of memory management is using streams when generating and loading zip files. This prevents loading the entire file into memory.</p></li>
<li><p><strong>Asynchronous operations:</strong> Asynchronous methods prevent memory leaks by not blocking the main thread. Properly handling promises and clearing resources once they’re no longer needed is also key.</p></li>
<li><p><strong>Garbage collection:</strong> Rely on the browser’s or Node.js’s garbage collection mechanisms to reclaim memory that is no longer in use.</p></li>
</ul>
<h3 id="security-considerations">Security considerations</h3>
<p>Security is paramount, especially when handling user-uploaded files or sensitive data within zip archives:</p>
<ul>
<li><p><strong>Input Validation:</strong> Always validate user inputs to prevent malicious code injection or buffer overflows. Sanitize filenames and check file types to avoid security risks.</p></li>
<li><p><strong>File Type Restrictions:</strong> Limit the types of files that can be added to a zip archive to prevent the inclusion of potentially harmful executable files.</p></li>
<li><p><strong>Password Protection (Caution):</strong> While JSZip allows setting passwords, it’s crucial to understand that the security of this encryption is limited. For robust security, use a well-vetted, industry-standard encryption library separate from JSZip and handle encryption outside JSZip’s scope. Never rely solely on JSZip’s password protection for critical data. Consider the trade-offs between user convenience and security when using password protection.</p></li>
<li><p><strong>Avoid Server-Side Decompression of Untrusted Data:</strong> If you’re processing zip files received from untrusted sources on a server, always perform strict input validation and sanitize data before decompression to prevent potential vulnerabilities.</p></li>
</ul>
<h3 id="code-examples-and-best-practices">Code examples and best practices</h3>
<p><strong>Example of best practices using async/await and streaming:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> JSZip <span class="op">=</span> <span class="pp">require</span>(<span class="st">'jszip'</span>)<span class="op">;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> fs <span class="op">=</span> <span class="pp">require</span>(<span class="st">'node:fs/promises'</span>)<span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">createZip</span>(files) {</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> zip <span class="op">=</span> <span class="kw">new</span> <span class="fu">JSZip</span>()<span class="op">;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> file <span class="kw">of</span> files) {</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> fs<span class="op">.</span><span class="fu">readFile</span>(file<span class="op">.</span><span class="at">path</span>)<span class="op">;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    zip<span class="op">.</span><span class="fu">file</span>(file<span class="op">.</span><span class="at">name</span><span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> zipBuffer <span class="op">=</span> <span class="cf">await</span> zip<span class="op">.</span><span class="fu">generateAsync</span>({ <span class="dt">type</span><span class="op">:</span> <span class="st">'nodebuffer'</span><span class="op">,</span> <span class="dt">streamFiles</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">await</span> fs<span class="op">.</span><span class="fu">writeFile</span>(<span class="st">'myzip.zip'</span><span class="op">,</span> zipBuffer)<span class="op">;</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This example demonstrates proper async/await usage and streaming for efficient zip file generation in Node.js. Adapt the streaming to use <code>ReadableStream</code> in browsers. Remember to always handle potential errors using try…catch blocks within your asynchronous functions. Always validate user input thoroughly and never trust user-supplied data without thorough sanitization and validation.</p>
<h2 id="api-reference">API Reference</h2>
<p>This section provides a concise overview of the core JSZip API. For complete and up-to-date details, refer to the official JSZip documentation. Note that specific method signatures and available options might vary across JSZip versions.</p>
<h3 id="jszip-class">JSZip Class</h3>
<p>The <code>JSZip</code> class is the primary entry point for creating and manipulating zip archives.</p>
<ul>
<li><p><strong><code>constructor()</code>:</strong> Creates a new, empty zip archive. <code>new JSZip()</code></p></li>
<li><p><strong><code>file(name, content, options)</code>:</strong> Adds a file to the archive.</p>
<ul>
<li><code>name</code>: String; The name of the file (including path for subdirectories).</li>
<li><code>content</code>: String, <code>Uint8Array</code>, <code>Blob</code>, or <code>ReadableStream</code>; The file’s content.</li>
<li><code>options</code>: Object (optional); Allows specifying compression level, compression method, and other metadata. See the JSZip documentation for details.</li>
</ul></li>
<li><p><strong><code>folder(name)</code>:</strong> Creates a folder within the archive (though this is often implicit by adding files with paths that include folders).</p></li>
<li><p><strong><code>remove(name)</code>:</strong> Removes a file or folder from the archive.</p></li>
<li><p><strong><code>generateAsync(options)</code>:</strong> Asynchronously generates the zip file. Returns a Promise that resolves to the generated file as a <code>Blob</code>, <code>Uint8Array</code>, or <code>NodeBuffer</code> (depending on <code>options</code>).</p>
<ul>
<li><code>options</code>: Object (required); Specifies the output type (<code>type: 'blob'</code>, <code>type: 'uint8array'</code>, <code>type: 'nodebuffer'</code>), compression method, and other settings. See JSZip documentation for details. Crucially, for large files, use <code>streamFiles: true</code>.</li>
</ul></li>
<li><p><strong><code>loadAsync(content, options)</code>:</strong> Asynchronously loads a zip file from its content (string, <code>Uint8Array</code>, <code>Blob</code>, or <code>Buffer</code>). Returns a Promise that resolves to the loaded <code>JSZip</code> object.</p></li>
<li><p><strong><code>forEach(callback)</code>:</strong> Iterates over all files and folders in the archive.</p></li>
<li><p><strong><code>files</code>:</strong> (Read-only) returns an object containing information for each file in the archive</p></li>
</ul>
<h3 id="zipfile-class">ZipFile Class</h3>
<p>The <code>ZipFile</code> class (or similar, depending on the JSZip version) represents a single file within the archive. It’s obtained using <code>zip.file(name)</code>. The properties and methods available depend on the JSZip version. Key properties typically include:</p>
<ul>
<li><strong><code>name</code>:</strong> String; The name of the file (including path).</li>
<li><strong><code>comment</code>:</strong> String; A comment associated with the file.</li>
<li><strong><code>async(type)</code>:</strong> Asynchronously retrieves the file content as a string (<code>'string'</code>), <code>Uint8Array</code> (<code>'uint8array'</code>), or <code>Blob</code> (<code>'blob'</code>). This is the recommended way to access file contents, especially for large files to avoid blocking the main thread.</li>
</ul>
<h3 id="zipobject-class">ZipObject Class</h3>
<p>This class (or a similar representation) may be available in newer JSZip versions, offering a more structured way to interact with both files and folders in the archive. Check the official JSZip documentation for specific details and properties available for your JSZip version.</p>
<h3 id="utility-functions">Utility functions</h3>
<p>JSZip might provide utility functions (the availability depends on the version). These are helper functions not directly related to creating or modifying zip files but can be useful in related tasks. Refer to the official documentation for the complete list. These may include functions to work with data types such as <code>Blob</code> and <code>Uint8Array</code>.</p>
<p><strong>Important Note:</strong> This is a simplified overview. Consult the official JSZip documentation for the most current and detailed API reference, including specific method signatures, options, and error handling. The API might evolve across versions, so always verify against the current version you are using.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-errors-and-solutions">Common errors and solutions</h3>
<p>This section covers some common issues encountered when using JSZip and suggests troubleshooting steps. Always refer to the console logs and error messages for specific details.</p>
<ul>
<li><strong>“Error generating zip”:</strong> This general error often indicates problems with the input data or options passed to <code>generateAsync</code>.
<ul>
<li><strong>Solution:</strong> Check the input data for errors (e.g., invalid file content, extremely large files exceeding memory limits). Verify that the <code>generateAsync</code> options are correctly specified, particularly the <code>type</code> option and, crucially for large files, <code>streamFiles: true</code>. Ensure that the file content isn’t corrupted.</li>
</ul></li>
<li><strong>“Error loading zip”:</strong> This usually means the zip file is corrupted or invalid.
<ul>
<li><strong>Solution:</strong> Verify the integrity of the zip file. Ensure it’s a valid zip archive. Test with a different zip file to rule out problems with your input.</li>
</ul></li>
<li><strong>Memory issues (browser):</strong> Working with very large zip files can lead to browser crashes or slowdowns.
<ul>
<li><strong>Solution:</strong> Use asynchronous operations, streaming (<code>streamFiles: true</code>), and consider offloading the work to Web Workers. Optimize memory usage in your application generally.</li>
</ul></li>
<li><strong>“ReferenceError: JSZip is not defined”:</strong> This error occurs if the JSZip library isn’t correctly included or imported into your project.
<ul>
<li><strong>Solution:</strong> Ensure that you’ve correctly installed the JSZip package (using npm or yarn for Node.js, or included it via a <code>&lt;script&gt;</code> tag for browsers). Check that the path to the library file is correct and the <code>JSZip</code> object is accessible in your code.</li>
</ul></li>
<li><strong>Compression issues:</strong> Problems with compression might result in unexpectedly large or small zip files.
<ul>
<li><strong>Solution:</strong> Check the compression level and method specified in the <code>generateAsync</code> options. Experiment with different settings.</li>
</ul></li>
<li><strong>Asynchronous operation errors:</strong> Promises not resolving or rejecting correctly usually points to issues in handling the asynchronous nature of JSZip’s API.
<ul>
<li><strong>Solution:</strong> Use <code>async/await</code> or <code>.then()</code> and <code>.catch()</code> correctly to handle Promise resolutions and rejections. Ensure you are awaiting asynchronous functions before trying to access their results.</li>
</ul></li>
</ul>
<h3 id="debugging-tips">Debugging tips</h3>
<ul>
<li><p><strong>Console Logging:</strong> Use <code>console.log()</code> statements to track variables, the content of files, and the values of options passed to JSZip methods. This helps identify errors in data or configuration.</p></li>
<li><p><strong>Browser Developer Tools:</strong> Utilize your browser’s developer tools (Network, Console, Sources tabs) to inspect network requests, console logs, and step through your code to find the root cause of errors.</p></li>
<li><p><strong>Node.js Debugging:</strong> In Node.js, leverage Node.js’s debugging capabilities (e.g., using <code>node --inspect-brk your-script.js</code>) to step through the code, inspect variables, and identify problems.</p></li>
<li><p><strong>Simplify:</strong> If you encounter a complex issue, create a minimal, reproducible example to isolate the problem. This makes it easier to debug and identify the root cause.</p></li>
</ul>
<h3 id="where-to-find-help">Where to find help</h3>
<ul>
<li><p><strong>Official JSZip Documentation:</strong> The official JSZip documentation is the primary resource for API details, examples, and troubleshooting information.</p></li>
<li><p><strong>JSZip GitHub Repository:</strong> The JSZip GitHub repository may contain helpful information, issue reports, or community discussions that address similar problems.</p></li>
<li><p><strong>Stack Overflow:</strong> Search for relevant JSZip questions on Stack Overflow. If you don’t find an answer, consider asking a well-formed question, providing sufficient context and a minimal reproducible example.</p></li>
</ul>
<p>Remember to always check the error messages provided by JSZip. They are often very helpful in identifying the source of the problem. Provide sufficient context when asking for help (code snippet, error message, steps to reproduce).</p>


<footer>Copyright 2025 - Muthukrishnan</footer>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3609399560636561" crossorigin="anonymous"></script>




</body></html>